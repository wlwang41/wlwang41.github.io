<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title>crow coffin</title>
  <link href="/"/>
  <link type= "application/atom+xml" href="/atom.xml" rel="self"/>
  <updated>2014-07-20</updated>
  <id></id>
  <author>
    <name>crow</name>
  </author>

  
  <entry>
    <title>python import机制</title>
    <link type="text/html" rel="alternate" href="/content/python/python-import机制.html"/>
    <id>/content/python/python-import机制.html</id>
    <published>2015-02-05 22:50</published>
    <updated>2015-02-05 22:50</updated>
    <content type="html">
      &lt;p&gt;今天王颖同学问了我一个问题，大概就是说mongo的数据库连接应该写在哪里，
然后我告诉他应该写在models层的 &lt;strong&gt; &lt;strong&gt;init&lt;/strong&gt;.py &lt;/strong&gt; 文件中，这样整个项目启动的时候会初始化得到一个mongo的连接，
整个项目就能通过这个连接来完成数据库操作。&lt;/p&gt;
&lt;p&gt;实际上，我们正式通过python的import机制，实现了一个数据库连接的单例模式。&lt;/p&gt;
&lt;p&gt;王颖同学虽然是c++大神，但是毕竟不太懂python，所以我觉得要想真正的理解这个设计，就必须搞清楚python的import机制。
于是我问了王颖同学这样一个问题:&lt;/p&gt;
&lt;p&gt;假设在同一个目录下有这样3个文件，分别是a.py, b.py, c.py，代码如下:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;c&#34;&gt;# a.py&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;b&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;print&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;attr&lt;/span&gt;

&lt;span class=&#34;c&#34;&gt;# b.py&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;a&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;attr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;quot;Hello world!&amp;quot;&lt;/span&gt;

&lt;span class=&#34;c&#34;&gt;# c.py&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;a&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;此时 &lt;code&gt;python c.py&lt;/code&gt; 会得到什么呢?&lt;/p&gt;
&lt;p&gt;王颖同学认为此时应该会爆出循环引用的错误，实则不然，正确的结果是会输出 &lt;code&gt;Hello world!&lt;/code&gt; 。&lt;/p&gt;
&lt;p&gt;当import一个模块的时候，python会去看sys.modules里面有没有这个模块，如果有，
则跳过import语句，执行后面的内容，如果没有则会降模块放入sys.modules字典中，
并载入模块中内容，如:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;sys&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#39;requests&amp;#39;&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sys&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;modules&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;Out&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;False&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;requests&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#39;requests&amp;#39;&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sys&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;modules&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;Out&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;True&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;更多的信息则放在模块的 &lt;code&gt;__dict__&lt;/code&gt; 属性中。&lt;/p&gt;
&lt;p&gt;当执行c.py的时候，执行import a这条语句：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;判断a是否在sys.modules里面，发现不在，则创建一个新的module对象a放到sys.modules中
然后执行a.py其他语句，填充module a的 &lt;code&gt;__dict__&lt;/code&gt; 属性。&lt;/li&gt;
&lt;li&gt;a.py中第一句就是import b，所以又开始载入b模块，同理，会在sys.modules中创建module对象b。&lt;/li&gt;
&lt;li&gt;然后执行b.py中其他语句，b.py中第一句就是import a，由于a模块已经在sys.modules中有了，
所以会跳过这条import，执行b.py中下一条语句，也就是 &lt;code&gt;attr = &#34;Hello world!&#34;&lt;/code&gt; 并且放到了b模块对象
的 &lt;code&gt;__dict__&lt;/code&gt; 属性中。&lt;/li&gt;
&lt;li&gt;接着会执行a.py中剩余语句，也就打印出了 &lt;code&gt;b.attr&lt;/code&gt; ，也就是 &#34;Hello world!&#34;。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;由于python不会重复import一个模块，所以也就保证了数据库连接初始化只会执行一次。
写在 &lt;strong&gt; &lt;strong&gt;init&lt;/strong&gt;.py &lt;/strong&gt; 中是保证会最先被执行到，因为 &lt;strong&gt; &lt;strong&gt;init&lt;/strong&gt;.py &lt;/strong&gt; 是表示这个文件夹是一个python的package，它会首先被执行到。&lt;/p&gt;
    </content>
  </entry>
  <entry>
    <title>用python一行实现一棵树</title>
    <link type="text/html" rel="alternate" href="/content/python/用python一行实现一棵树.html"/>
    <id>/content/python/用python一行实现一棵树.html</id>
    <published>2014-07-22 14:40</published>
    <updated>2014-07-22 14:40</updated>
    <content type="html">
      &lt;p&gt;使用python自带的 &lt;code&gt;defaultdict&lt;/code&gt;, 可以一行实现一棵树 &lt;code&gt;tree = lambda: defaultdict (tree)&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;collections&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;defaultdict&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tree&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;lambda&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;defaultdict&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#39;name&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;][&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#39;crow&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#39;__crow__&amp;#39;&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#39;name&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;][&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#39;wlwang&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#39;__wlwang__&amp;#39;&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;t&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;Out&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;defaultdict&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;lambda&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;at&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x10bed7140&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#39;name&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;defaultdict&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;lambda&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;at&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x10bed7140&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#39;crow&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#39;__crow__&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#39;wlwang&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#39;__wlwang__&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})})&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;7&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;json&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;print&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dumps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;crow&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;quot;__crow__&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;quot;wlwang&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;quot;__wlwang__&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;甚至可以不用赋值! 详情请戳&lt;a href=&#34;https://gist.github.com/hrldcpr/2012250&#34;&gt;这里&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
    </content>
  </entry>
  <entry>
    <title>Python中的attributes</title>
    <link type="text/html" rel="alternate" href="/content/python/python中的attributes.html"/>
    <id>/content/python/python中的attributes.html</id>
    <published>2014-10-27 22:07</published>
    <updated>2014-10-27 22:07</updated>
    <content type="html">
      &lt;p&gt;前言：这篇文章主要是翻译整理了Pycoders&#39;s Weekly邮件推荐的一篇文章，原文地址请戳&lt;a href=&#34;http://blog.lerner.co.il/python-attributes/&#34;&gt;这里&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;在python中，声明一个类是非常容易的，比如：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Foo&lt;/span&gt;(&lt;span class=&#34;n&#34;&gt;object&lt;/span&gt;):
    &lt;span class=&#34;n&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;__init__&lt;/span&gt;(&lt;span class=&#34;k&#34;&gt;self&lt;/span&gt;, &lt;span class=&#34;o&#34;&gt;x&lt;/span&gt;, &lt;span class=&#34;n&#34;&gt;y&lt;/span&gt;):
        &lt;span class=&#34;k&#34;&gt;self&lt;/span&gt;.&lt;span class=&#34;o&#34;&gt;x&lt;/span&gt; = &lt;span class=&#34;o&#34;&gt;x&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;self&lt;/span&gt;.&lt;span class=&#34;n&#34;&gt;y&lt;/span&gt; = &lt;span class=&#34;n&#34;&gt;y&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;这样就声明了一个名叫Foo的类，有这个类创造一个对象也同样简单：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;f = Foo(20, &amp;#39;hello&amp;#39;)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;从表面上看，我们创建了一个Foo的对象f，并且为f的2个实例变量赋了初始值。
但是实际上在python中并没有所谓的实例变量(instance variables)和类变量(class variables)这一说，
它们在python的oop里面，都只是对象的属性(attributes)而已。
而在python的世界中，所有变量都是对象，所以实际上，属性是整个python的基础。
所有对象都有属性，通过built-in的 &lt;code&gt;dir([object]) -&amp;gt; list of strings&lt;/code&gt; 函数可以看到对象的属性:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;对于模块对象(module object): 返回模块的属性&lt;/li&gt;
&lt;li&gt;对于类对象(class object): 返回它的属性并且递归的返回它所有父类的属性&lt;/li&gt;
&lt;li&gt;对于其他的对象: 返回它的属性，它类的属性，以及各个父类的属性&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;所以对于python中的变量都可以通过 &lt;code&gt;dir&lt;/code&gt; 函数来查看它的属性：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;In [3]: s = &amp;quot;hello&amp;quot;

In [4]: len(dir(s))
Out[4]: 71

In [5]: i = 123

In [6]: len(dir(i))
Out[6]: 64

In [7]: t = (1, 2, 3)

In [8]: len(dir(t))
Out[8]: 32

In [9]: def f():
   ...:     pass
   ...:

In [10]: len(dir(f))
Out[10]: 31
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;可以看到，方法都有属性，因为方法也是对象嘛，这个js程序员应该不会陌生，js里面也是所有变量都是对象。
我们设置可以对方法进行赋值：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;In [11]: f.a = 1

In [12]: f.a
Out[12]: 1
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;说到对属性的赋值，python提供了2个函数来为对象的属性赋值以及取属性的值。他们是 &lt;code&gt;getattr(object, name[, default]) -&amp;gt; value&lt;/code&gt; 以及 &lt;code&gt;setattr(object, name, value)&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;在我刚写python的时候，有一个问题当时困扰了我一会，当时我需要根据字符串的方法名来调用这个方法。这个问题可以进一步抽象为，怎么通过一个 &lt;code&gt;dir&lt;/code&gt; 方法得到那些字符串为对象的&#34;同名&#34;属性来赋值或者取值?&lt;/p&gt;
&lt;p&gt;这里就可以用 &lt;code&gt;getattr&lt;/code&gt; 和 &lt;code&gt;setattr&lt;/code&gt; 来实现，如：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nx&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;cp&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;19&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;getattr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;quot;split&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;nx&#34;&gt;Out&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;19&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;split&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;这里等同于:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nx&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;cp&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;split&lt;/span&gt;
&lt;span class=&#34;nx&#34;&gt;Out&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;split&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;实际上，这种&#34;.&#34;(dot notation)方式取对象的属性只是 &lt;code&gt;getattr&lt;/code&gt; 函数的一个语法糖而已。
同理，&lt;code&gt;f.x = 10&lt;/code&gt; 也只是 &lt;code&gt;setattr(f, &#34;x&#34;, 10)&lt;/code&gt; 的语法糖。
并且在python中，可以为对象的属性赋任何类型的值，就算赋一个复杂的对象也没有关系。
当然，如果对对象中一个没有声明过的属性赋值，会先创建这个属性。如:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;In [21]: f.new_attr = &amp;quot;hello&amp;quot;

In [22]: f.school = &amp;quot;blue_shit&amp;quot;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;虽然我们可以随时为对象增加属性，但是一个好的编程规范就是把属性的初始化操作都封装到 &lt;code&gt;__init__&lt;/code&gt; 方法中，而不是到处随时初始化一个属性。&lt;/p&gt;
&lt;p&gt;对于一个对象来说，我们可以随时对它初始化一个属性，对于类来说也是一样，如：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;In [24]: class F(object):
....:     pass
....:

In [25]: F.age = 21

In [26]: F.age
Out[26]: 21
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;类也是对象，所以类也会有属性。同样，到处对类初始化属性是一个非常不好的习惯，对象可以把这些操作封装到 &lt;code&gt;__init__&lt;/code&gt; 方法里面，对类来说，可以把这些操作封装到类的声明里面。对于在类的主体中初始化的属性，会被立即执行，但是通过 &lt;code&gt;def&lt;/code&gt; 关键字声明的方法，则不会被执行，只有被调用到才会执行。如下的代码中，print函数就会被执行，name会被初始化，但是func方法主体则不会被执行。&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;In [29]: class F(object):
....:     name = &amp;quot;crow&amp;quot;
....:     print &amp;quot;in class&amp;quot;
....:     def func():
....:         print &amp;quot;in func&amp;quot;
....:
in class

In [30]: F.name
Out[30]: &amp;#39;crow&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;所以对于类来说，在类声明中初始化的变量，将会成为类对象的属性。&lt;/p&gt;
&lt;p&gt;如果我们通过 &lt;code&gt;def&lt;/code&gt; 关键字定义了一个函数，实际上我们是在全局定义了一个变量，但是如果我们同样在类中去定义一个函数(方法)，实际上我们只是为这个类对象添加了一个属性。
换句话说，实例的方法实际上是在类中，而不是在实例中的。当我们调用Foo的实例f的方法say时 &lt;code&gt;f.say()&lt;/code&gt; , 实际上是调用了Foo的say方法，并且把f作为第一个参数传到say中。
所以说， &lt;code&gt;f.say()&lt;/code&gt; 和 &lt;code&gt;Foo.say(f)&lt;/code&gt; 没有本质上的区别。更多关于python方法和函数的区别会在以后的文章中写到。&lt;/p&gt;
&lt;p&gt;那python是怎么把 &lt;code&gt;f.say()&lt;/code&gt; 转到 &lt;code&gt;Foo.say(f)&lt;/code&gt; 上的呢？&lt;/p&gt;
&lt;p&gt;这个就和python中变量和属性的&#34;寻址&#34;有关了。&lt;/p&gt;
&lt;p&gt;在python中，变量的查找遵循LEGB原则：Local，Enclosing，Global以及Builtin。而属性的查找则稍有不同，首先它会找属性声明的那个对象，然后是创造出对象的类，然后是随着类的继承链往上找，直到object对象。&lt;/p&gt;
&lt;p&gt;Thus, in our case, we invoke “f.blah()”. Python looks on the instance f, and doesn’t find an attribute named “blah”. Thus, it looks on f’s class, Foo. It finds the attribute there, and performs some Python method rewriting magic, thus invoking “Foo.blah(f)”.&lt;/p&gt;
&lt;p&gt;因此，在上面讨论到的例子中，我们调用 &lt;code&gt;f.say()&lt;/code&gt; python会先查找对象f，没有找到一个名叫say的属性，因此就会去找f的类，Foo，然后找到了这个属性，python使用了方法的重写魔法，最后就调用到了 &lt;code&gt;Foo.say(f)&lt;/code&gt; .&lt;/p&gt;
&lt;p&gt;所以说，python实际上没有实例变量和类变量这一说，只有对象和属性。&lt;/p&gt;
&lt;p&gt;但是我们应该避免一种情况，那就是类属性和实例属性重名的问题，例如：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Person&lt;/span&gt;(&lt;span class=&#34;n&#34;&gt;object&lt;/span&gt;):
    &lt;span class=&#34;n&#34;&gt;population&lt;/span&gt; = &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;__init__&lt;/span&gt;(&lt;span class=&#34;k&#34;&gt;self&lt;/span&gt;, &lt;span class=&#34;nb&#34;&gt;first&lt;/span&gt;, &lt;span class=&#34;k&#34;&gt;last&lt;/span&gt;):
        &lt;span class=&#34;k&#34;&gt;self&lt;/span&gt;.&lt;span class=&#34;nb&#34;&gt;first&lt;/span&gt; = &lt;span class=&#34;nb&#34;&gt;first&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;self&lt;/span&gt;.&lt;span class=&#34;k&#34;&gt;last&lt;/span&gt; = &lt;span class=&#34;k&#34;&gt;last&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;self&lt;/span&gt;.&lt;span class=&#34;n&#34;&gt;population&lt;/span&gt; += &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;p1&lt;/span&gt; = &lt;span class=&#34;n&#34;&gt;Person&lt;/span&gt;(&lt;span class=&#34;s&#34;&gt;&amp;#39;Reuven&amp;#39;&lt;/span&gt;, &lt;span class=&#34;s&#34;&gt;&amp;#39;Lerner&amp;#39;&lt;/span&gt;)
&lt;span class=&#34;n&#34;&gt;p2&lt;/span&gt; = &lt;span class=&#34;n&#34;&gt;Person&lt;/span&gt;(&lt;span class=&#34;s&#34;&gt;&amp;#39;foo&amp;#39;&lt;/span&gt;, &lt;span class=&#34;s&#34;&gt;&amp;#39;bar&amp;#39;&lt;/span&gt;)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;当得到p1和p2之后， &lt;code&gt;Person.population&lt;/code&gt; 还是0， &lt;code&gt;p1.population&lt;/code&gt; 和 &lt;code&gt;p2.population&lt;/code&gt; 都是1.&lt;/p&gt;
&lt;p&gt;这个是由 &lt;code&gt;self.population += 1&lt;/code&gt; 导致的。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;self.population += 1&lt;/code&gt; 等效于 &lt;code&gt;self.population = self.population + 1&lt;/code&gt; ，首先右边表达式将会先计算，然后给左边表达式赋值。 python查看实例对象，self，发现没有population这个属性，然后就会去查它的Person类，结果发现了这个属性，取它的值0，加一然后重新付给了实例的population属性。所无论有多少个Person对象被创建出来，它们的population属性都会是1，类的population都是0.&lt;/p&gt;
&lt;p&gt;最后，这篇文章只是很简单的介绍，更详细的关于python oop，函数以及方法等等都会以后慢慢给出。&lt;/p&gt;
    </content>
  </entry>
  <entry>
    <title>没有外网权限的机器装python模块</title>
    <link type="text/html" rel="alternate" href="/content/python/没有外网权限的机器装python模块.html"/>
    <id>/content/python/没有外网权限的机器装python模块.html</id>
    <published>2014-11-26 15:18</published>
    <updated>2014-11-26 15:18</updated>
    <content type="html">
      &lt;p&gt;由于公司服务器大多数是没有外网权限的，也没有自己的pip源，所以要在服务器上装python的第三方模块相对来说比较复杂.&lt;/p&gt;
&lt;p&gt;实际上，pip有一个功能就是直接把一个项目的所有依赖下载下来，并且不安装：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;pip install --download /YOUR/DOWNLOAD/PATH celery
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;上面这个命令就能把celery以及它的依赖包全部现在到本地指定路径中。&lt;/p&gt;
&lt;p&gt;把这些包都传到服务器上，然后在服务器上运行：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;pip install --no-index -f /YOUR/PACKAGES/PATH celery
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;这样就完成了一次python包的安装。&lt;/p&gt;
&lt;p&gt;当然，这种方式非常麻烦，如果要装多台服务器的多个python包将做很多无用功。&lt;/p&gt;
&lt;p&gt;因此我利用fabric写了一个简单的脚本，只需要在config.py里面写入本地下载包的路径，和服务器的host
然后运行 &lt;code&gt;fab install_pys:celery,tornado,requests&lt;/code&gt; 就能完成安装.&lt;/p&gt;
&lt;p&gt;也可以手动一步一步安装，具体命令通过 &lt;code&gt;fab -l&lt;/code&gt; 就能看到。&lt;/p&gt;
&lt;p&gt;项目地址请戳&lt;a href=&#34;https://github.com/wlwang41/install_pys&#34;&gt;这里&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;当然搭建一个pypi镜像才是最方便的。&lt;/p&gt;
&lt;p&gt;近期会开始做一些统一部署方案的工作，以后的python项目可能就会用virtualenv或者docker做隔离，并且搭建一个内部的pypi镜像，
然后规范requirements.txt，那么装环境就只需要 &lt;code&gt;pip install -r requirements.txt&lt;/code&gt; 就能完成一个项目的环境环境配置了。&lt;/p&gt;
    </content>
  </entry>
  <entry>
    <title>rst语法汇总</title>
    <link type="text/html" rel="alternate" href="/content/python/rst语法汇总.html"/>
    <id>/content/python/rst语法汇总.html</id>
    <published>2014-08-05 21:12</published>
    <updated>2014-08-05 21:12</updated>
    <content type="html">
      &lt;p&gt;前段时间一直忙着快站这边插件商城的事情，刚好最近稍微闲了一点，所以我想把之前书签里面的一些文章整理一下发到这里。&lt;/p&gt;
&lt;p&gt;今天就把rst相关的资源都放在这里作为干货。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://docutils.sourceforge.net/docs/user/rst/quickref.html&#34;&gt;quickref&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://docutils.sourceforge.net/docs/ref/rst/directives.html&#34;&gt;more detail&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;最后推荐一个在线的&lt;a href=&#34;http://rst.ninjs.org/&#34;&gt;rst编辑器&lt;/a&gt;。这玩意是一个开源的&lt;code&gt;flask&lt;/code&gt;项目，github上的star数也有几百。
有时间看看这个项目，然后自己也写一个编辑器吧。&lt;/p&gt;
    </content>
  </entry>
  <entry>
    <title>python的坑</title>
    <link type="text/html" rel="alternate" href="/content/python/python的坑.html"/>
    <id>/content/python/python的坑.html</id>
    <published>2014-07-20 21:13</published>
    <updated>2014-07-20 21:13</updated>
    <content type="html">
      &lt;p&gt;近期开始整理以前看过的一些非常好的python文章, 这篇文章就会大概讲一讲Python里面的有些小坑.&lt;/p&gt;
&lt;h2 id=&#34;mro&#34;&gt;MRO&lt;/h2&gt;
&lt;p&gt;当用到多继承的时候, 在父类中去查找继承的方法的顺序叫做 &lt;strong&gt;Method Resolution Order&lt;/strong&gt;. Python里面属性的查找也会是这样.&lt;/p&gt;
&lt;p&gt;Python中老式的类(classic classes)的MRO为 &lt;strong&gt;depth-first left-to-right&lt;/strong&gt;, 就是说是从左往右深度遍历. 举个例子:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;In [1]: class A:
   ...:     def name(self):
   ...:         print &amp;#39;class A&amp;#39;
   ...:

In [2]: class B(A):
   ...:     pass
   ...:

In [3]: class C(A):
   ...:     def name(self):
   ...:         print &amp;#39;class C&amp;#39;
   ...:

In [4]: class D(B, C):
   ...:     pass
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;D().name()&lt;/code&gt;打印了&lt;code&gt;class A&lt;/code&gt;, 它的MRO为: D B A C A. 本来我是想让D继承B, C, 如果B里面没有name方法, 那应该是查找平级的C中的name方法. 但是由于是深度遍历, 所以调用的是A的name方法. 虽然这种多继承的情况比较少见. 但是对于新式类(new-style classes)来说, 就特别普遍了(都继承了&lt;code&gt;object&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;为了解决这个坑, 新式类在深度遍历的时候, 如果有重复的字段, 除了最后一次出现的字段的, 删掉其他重复的字段.所以在新式类中找出上述例子中D的name方法时:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;In [13]: D.__mro__
Out[13]: (__main__.D, __main__.B, __main__.C, __main__.A, object)
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;更多关于MRO的信息请看&lt;a href=&#34;http://python-history.blogspot.ru/2010/06/method-resolution-order.html&#34;&gt;这篇文章&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;list&#34;&gt;List操作&lt;/h2&gt;
&lt;p&gt;直接上代码:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;In [1]: a = [1, 2]

In [2]: id(a)
Out[2]: 4452270664

In [3]: a += [3]

In [4]: id(a)
Out[4]: 4452270664

In [5]: a = a + [4]  # 只有+的时候id会改变

In [6]: a
Out[6]: [1, 2, 3, 4]

In [7]: id(a)
Out[7]: 4452271096

In [8]: a.append(5)

In [9]: id(a)
Out[9]: 4452271096

In [10]: a.extend([6])

In [11]: id(a)
Out[11]: 4452271096
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;对列表的 &lt;code&gt;+&lt;/code&gt;, &lt;code&gt;+=&lt;/code&gt;, &lt;code&gt;append&lt;/code&gt;, &lt;code&gt;extend&lt;/code&gt; 操作中, 只有 &lt;code&gt;+&lt;/code&gt; 操作会改变列表的id.&lt;/p&gt;
&lt;h2 id=&#34;is&#34;&gt;is 和 ==&lt;/h2&gt;
&lt;p&gt;总体来说 &lt;code&gt;is&lt;/code&gt; 是判断2者身份(id), 而 &lt;code&gt;==&lt;/code&gt; 是判断的值.&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;In [1]: a = 1

In [2]: b = 1

In [3]: a is b
Out[3]: True

In [4]: a == b
Out[4]: True

In [5]: c = 257

In [6]: d = 257

In [7]: c == d
Out[7]: True

In [8]: c is d
Out[8]: False

In [9]: e = -6

In [10]: f = -6

In [11]: e is f
Out[11]: False

In [12]: e == f
Out[12]: True
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;python缓存了-5 到 256的对象, 所以在这个之间的相同的数, &lt;code&gt;is&lt;/code&gt;返回的都会是 &lt;code&gt;True&lt;/code&gt; , 但是不在这个返回就是2个对象所以 &lt;code&gt;is&lt;/code&gt; 返回的是 &lt;code&gt;False&lt;/code&gt; , 但是 &lt;code&gt;==&lt;/code&gt; 总是返回 &lt;code&gt;True&lt;/code&gt; .&lt;/p&gt;
&lt;p&gt;字符串也有缓存, 对只含有 &lt;strong&gt;字母&lt;/strong&gt; , &lt;strong&gt;数字&lt;/strong&gt; , &lt;strong&gt;下划线&lt;/strong&gt; 组成的字符串来说, 相同的字符串 &lt;code&gt;is&lt;/code&gt; 和 &lt;code&gt;==&lt;/code&gt; 返回的是 &lt;code&gt;True&lt;/code&gt; 如:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;In [1]: a = &amp;#39;hello&amp;#39;

In [2]: b = &amp;#39;hello&amp;#39;

In [3]: a is b
Out[3]: True

In [4]: a == b
Out[4]: True
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;如果包含了其他字符, 则 &lt;code&gt;is&lt;/code&gt; 返回 &lt;code&gt;False&lt;/code&gt; , &lt;code&gt;==&lt;/code&gt; 为 &lt;code&gt;True&lt;/code&gt; :&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;In [1]: a = &amp;#39;!a&amp;#39;

In [2]: b = &amp;#39;!a&amp;#39;

In [3]: a is b
Out[3]: False

In [4]: a = &amp;#39;hello world&amp;#39;

In [5]: b = &amp;#39;hello world&amp;#39;

In [6]: a is b
Out[6]: False
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;但是也有特例:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;In [1]: a = float(&amp;#39;nan&amp;#39;)

In [2]: a is a
Out[2]: True

In [3]: a == a
Out[3]: False
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;哈哈哈哈. &lt;code&gt;a&lt;/code&gt; 啥也不等于, 连他自己都不等于, 是不是很郁闷?&lt;/p&gt;
&lt;p&gt;如果要判断是不是 &lt;code&gt;nan&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;math&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#39;nan&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;Out&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nan&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;math&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;isnan&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;Out&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;True&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;判断是不是无限大:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#39;Inf&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100000&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;Out&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;True&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;math&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;math&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;isinf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;Out&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;True&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id=&#34;_1&#34;&gt;浅拷贝 深拷贝&lt;/h2&gt;
&lt;p&gt;先来看下面的例子:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;Out&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4415456176&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;Out&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4415456176&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:]&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;Out&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4415465592&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;7&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;d&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;Out&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4415456608&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;9&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;copy&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;copy&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;copy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;11&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;Out&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;11&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4415435048&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;直接赋值很好理解, b的id显然应该和a是一致的, 但是通过切片的方式或者工厂函数以及通过 &lt;code&gt;copy&lt;/code&gt; 函数创建的c, d和e却和a有着不同的id. 实际上通过 &lt;strong&gt;切片&lt;/strong&gt; , &lt;strong&gt;工厂函数&lt;/strong&gt; 或者 &lt;code&gt;copy&lt;/code&gt; 函数的方式来拷贝对象, 就是一种 &lt;strong&gt;浅拷贝&lt;/strong&gt; . 浅拷贝只拷贝父对象.&lt;/p&gt;
&lt;p&gt;再来看一个例子:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;In [12]: obj = [&amp;#39;name&amp;#39;,[&amp;#39;age&amp;#39;,18]]

In [13]: a=obj[:]

In [14]: b=list(obj)

In [15]: for x in obj,a,b:
   ....:         print id(x)
   ....:
4415437424
4415437712
4415435768

In [16]: a[0] = &amp;#39;lisi&amp;#39;

In [17]: b[0] = &amp;#39;zhangsan&amp;#39;

In [18]:

In [18]: print a
[&amp;#39;lisi&amp;#39;, [&amp;#39;age&amp;#39;, 18]]

In [19]: print b
[&amp;#39;zhangsan&amp;#39;, [&amp;#39;age&amp;#39;, 18]]

In [20]:

In [20]: a[1][1] = 25

In [21]:

In [21]: print a
[&amp;#39;lisi&amp;#39;, [&amp;#39;age&amp;#39;, 25]]

In [22]: print b
[&amp;#39;zhangsan&amp;#39;, [&amp;#39;age&amp;#39;, 25]]
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;在这个例子中, 修改a和b的名字都不会互相影响, 单只是修改了a的年龄, 为什么就改变b中的年龄呢?&lt;/p&gt;
&lt;p&gt;实际上, 我们创建的a与b都是从obj对象的浅拷贝, obj中第一个元素是字符串属于不可变类型(immutable), 第二个元素是列表属于可变类型(mutable). 因此我们进行拷贝对象时, 字符串被显示拷贝&lt;em&gt;重新创建&lt;/em&gt;了一个字符串, 而列表只是复制引用, 所以改变列表的元素会影响所有引用对象.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;跟多关于python mutable vs immutable data type的介绍请看&lt;a href=&#34;https://docs.python.org/2/reference/datamodel.html&#34;&gt;这里&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;In [1]: obj = [&amp;#39;name&amp;#39;,[&amp;#39;age&amp;#39;,18]]

In [2]: a=obj[:]

In [3]: b=list(obj)

In [4]: for x in obj,a,b:
   ...:     print id(x[0]),id(x[1])
   ...:
4540997232 4550297144
4540997232 4550297144
4540997232 4550297144

In [5]: a[0] = &amp;#39;lisi&amp;#39;

In [6]: b[0] = &amp;#39;zhangsan&amp;#39;

In [7]: for x in obj,a,b:
   ...:     print id(x[0]),id(x[1])
...:
4540997232 4550297144
4550273760 4550297144
4550274624 4550297144

In [8]: a[1][1] = 23

In [9]: b[1][1] = 25

In [10]: for x in obj,a,b:
   ....:     print id(x[0]),id(x[1])
....:
4540997232 4550297144
4550273760 4550297144
4550274624 4550297144

In [11]: obj
Out[11]: [&amp;#39;name&amp;#39;, [&amp;#39;age&amp;#39;, 25]]
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;修改a b的name字段时, 由于字符串是不可改变类型的数据, 所以改变它就相当于新创建一个对象. 它的id自然会不一样, 也就不会互相影响, 但是由于list是可变类型的, 修改list里面任何字段都不会影响它的指针地址, 所以id没有变化, 也就会互相影响了. 包括原来的obj对象的年龄都变了.&lt;/p&gt;
&lt;p&gt;那我就想复制一个对象和原来的完全没有任何影响应该怎么做呢?&lt;/p&gt;
&lt;p&gt;这个时候深拷贝就登场了.
之前例子中出现过 &lt;code&gt;copy&lt;/code&gt; 这个模块, 这个模块中除了出现过了 &lt;code&gt;copy&lt;/code&gt; 方法来做浅拷贝之外, 还有一个方法 &lt;code&gt;deepcopy&lt;/code&gt; , 这个方法就可以对一个对象做深拷贝.&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;12&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;copy&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;13&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;obj&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#39;name&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#39;age&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;18&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]]&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;14&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;copy&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;deepcopy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;obj&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;15&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;copy&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;deepcopy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;obj&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;][&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;23&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;17&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;][&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;25&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;18&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;Out&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;18&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#39;name&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#39;age&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;23&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]]&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;19&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;Out&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;19&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#39;name&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#39;age&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;25&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]]&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;obj&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;Out&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#39;name&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#39;age&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;18&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id=&#34;_2&#34;&gt;修改元组吧&lt;/h2&gt;
&lt;p&gt;前面提到了可变类型和不可变类型, 现在就来利用可变类型来修改元组.&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;In [1]: t = ([], )

In [2]: t[0] += [1]
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
&amp;lt;ipython-input-2-91852f1a971a&amp;gt; in &amp;lt;module&amp;gt;()
----&amp;gt; 1 t[0] += [1]

TypeError: &amp;#39;tuple&amp;#39; object does not support item assignment

In [3]: t
Out[3]: ([1],)

In [4]: t = ([], )

In [5]: t[0].extend([1])

In [6]: t
Out[6]: ([1],)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;See? 虽然它抛了异常, 但是还是修改成功了.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;+= 到底在干嘛? 看&lt;a href=&#34;http://emptysqua.re/blog/python-increment-is-weird-part-ii/&#34;&gt;这里&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;_3&#34;&gt;可变参数作为函数参数&lt;/h2&gt;
&lt;p&gt;这个也是可变参数的坑, 直接上代码:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;In [1]: def foo(a=[]):
   ...:     a.append(&amp;#39;yo&amp;#39;)
   ...:     print a
   ...:

In [2]: foo()
[&amp;#39;yo&amp;#39;]

In [3]: foo()
[&amp;#39;yo&amp;#39;, &amp;#39;yo&amp;#39;]

In [4]: foo()
[&amp;#39;yo&amp;#39;, &amp;#39;yo&amp;#39;, &amp;#39;yo&amp;#39;]
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;所以不要直接在函数参数上给可变类型赋默认值:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;In [1]: def foo(a=None):
   ...:     if not a:
   ...:         a = []
   ...:     a.append(&amp;#39;yo&amp;#39;)
   ...:     print a
   ...:

In [2]: foo()
[&amp;#39;yo&amp;#39;]

In [3]: foo()
[&amp;#39;yo&amp;#39;]
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id=&#34;_4&#34;&gt;循环中修改列表的索引值&lt;/h2&gt;
&lt;p&gt;先看一个例子:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;In [1]: a = [2, 4, 5, 6]

In [2]: for i in a:
   ...:     if not i % 2:
   ...:         a.remove(i)
   ...:

In [3]: a
Out[3]: [4, 5]
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;这个结果显然错了, 我们希望得到的是奇数. 这个原因就是在遍历列表的时候修改了它的索引.&lt;/p&gt;
&lt;p&gt;再看下面这个例子:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;In [1]: a = [2, 4, 5, 6]

In [2]: for count, i in enumerate(a):
   ...:     print count, i
   ...:     if not i % 2:
   ...:         a.remove(i)
   ...:
0 2
1 5
2 6
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;第一个2被删除没有问题, 由于第一个2被删了, 5的索引值变成了1, 所以4就被跳过了, 导致最终结果错误.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;最终希望看更多python高级编程技(大)巧(坑)的请戳&lt;a href=&#34;http://dongweiming.github.io/Expert-Python/#1&#34;&gt;这里&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
    </content>
  </entry>
  
  <entry>
    <title>git/github黑魔法</title>
    <link type="text/html" rel="alternate" href="/content/tools/git-slash-github黑魔法.html"/>
    <id>/content/tools/git-slash-github黑魔法.html</id>
    <published>2015-01-20 14:28</published>
    <updated>2015-01-20 14:28</updated>
    <content type="html">
      &lt;p&gt;今天看了一篇关于git和github的文章，真是让我脑洞大开，原来还能这么玩。&lt;/p&gt;
&lt;p&gt;下面我就直接搬运了。&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;本秘籍收录了一些Git和Github非常酷同时又少有人知的功能。
灵感来自于&lt;a href=&#34;https://github.com/holman&#34;&gt;Zach Holman&lt;/a&gt;在2012年Aloha Ruby Conference和2013年WDCNZ上所做的演讲：&lt;a href=&#34;http://www.confreaks.com/videos/1229-aloharuby2012-git-and-github-secrets&#34;&gt;Git and GitHub Secrets&lt;/a&gt;(&lt;a href=&#34;https://speakerdeck.com/holman/git-and-github-secrets&#34;&gt;slides&lt;/a&gt;)
和&lt;a href=&#34;https://vimeo.com/72955426&#34;&gt;More Git and GitHub Secrets&lt;/a&gt;(&lt;a href=&#34;https://speakerdeck.com/holman/more-git-and-github-secrets&#34;&gt;slides&lt;/a&gt;)。&lt;/p&gt;
&lt;h2 id=&#34;github&#34;&gt;GitHub&lt;/h2&gt;
&lt;h3 id=&#34;_1&#34;&gt;忽略空白字符变化&lt;/h3&gt;
&lt;p&gt;在任意diff页面的URL后加上&lt;code&gt;?w=1&lt;/code&gt;，可以去掉那些只是空白字符的变化，使你能更专注于代码的变化。&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;Diff without whitespace&#34; src=&#34;https://camo.githubusercontent.com/797184940defadec00393e6559b835358a863eeb/68747470733a2f2f6769746875622d696d616765732e73332e616d617a6f6e6177732e636f6d2f626c6f672f323031312f736563726574732f776869746573706163652e706e67&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/blog/967-github-secrets&#34;&gt;&lt;em&gt;详见 GitHub secrets.&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;tab&#34;&gt;调整Tab字符所代表的空格数&lt;/h3&gt;
&lt;p&gt;在diff或者file页面的URL后面加上&lt;code&gt;?ts=4&lt;/code&gt;，这样当显示tab字符的长度时就会是4个空格的长度，不再是默认的8个空格。&lt;code&gt;ts&lt;/code&gt;后面的数字还可以根据你个人的偏好进行修改。不过，这个小诀窍在Gists页面和raw file页面不起作用。&lt;/p&gt;
&lt;p&gt;下面是我们在Go语言的source file页面URL后加&lt;code&gt;?ts=4&lt;/code&gt;&lt;a href=&#34;https://github.com/pengwynn/flint/blob/master/flint/flint.go&#34;&gt;前&lt;/a&gt;的例子：&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;Before, tab space example&#34; src=&#34;http://i.imgur.com/GIT1Fr0.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;然后是我们添加&lt;code&gt;?ts=4&lt;/code&gt;&lt;a href=&#34;https://github.com/pengwynn/flint/blob/master/flint/flint.go?ts=4 =720x&#34;&gt;后&lt;/a&gt;的例子：&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;After, tab space example&#34; src=&#34;http://i.imgur.com/70FL4H9.png&#34; /&gt;&lt;/p&gt;
&lt;h3 id=&#34;commit&#34;&gt;查看某个用户的Commit历史&lt;/h3&gt;
&lt;p&gt;查看某个用户的所有提交历史，只需在commits页面URL后加上&lt;code&gt;?author=username&lt;/code&gt;。&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;https://github.com/rails/rails/commits/master?author=dhh
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt=&#34;DHH commit history&#34; src=&#34;http://i.imgur.com/mDWwuaY.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://help.github.com/articles/differences-between-commit-views&#34;&gt;&lt;em&gt;深入了解提交视图之间的区别&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;_2&#34;&gt;克隆某个仓库&lt;/h3&gt;
&lt;p&gt;当我们克隆某一资源时，可以不要那个&lt;code&gt;.git&lt;/code&gt;后缀。&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;git clone https://github.com/tiimgreen/github-cheat-sheet
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href=&#34;http://git-scm.com/docs/git-clone&#34;&gt;&lt;em&gt;更多对 Git &lt;code&gt;clone&lt;/code&gt; 命令的介绍.&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;_3&#34;&gt;分支&lt;/h3&gt;
&lt;h4 id=&#34;_4&#34;&gt;将某个分支与其他所有分支进行对比&lt;/h4&gt;
&lt;p&gt;当你点击某个仓库的分支（Branches）选项卡时&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;https://github.com/{user}/{repo}/branches
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;你会看到一个包含所有未合并的分支的列表。&lt;/p&gt;
&lt;p&gt;你可以在这里查看比较（Compare）页面或点击删除某个分支。&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;Compare branches not merged into master in jquery/jquery repo - https://github.com/jquery/jquery/branches&#34; src=&#34;http://i.imgur.com/gKWPe8a.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;有的时候我们需要将多个分支与一个非主分支（master）进行对比，此时可以通过在URL后加入要比较的分支名来实现：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;https://github.com/{user}/{repo}/branches/{branch}
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt=&#34;Compare branches not merged into 1.x-master in jquery/jquery repo - https://github.com/jquery/jquery/branches/1.x-master&#34; src=&#34;http://i.imgur.com/jpc6Urb.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;可以在URL后加上&lt;code&gt;?merged=1&lt;/code&gt;来查看已经合并了的分支。&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;Compare branches merged in to 1.x-master in jquery/jquery repo - https://github.com/jquery/jquery/branches/1.x-master?merged=1&#34; src=&#34;http://i.imgur.com/KmYyCVh.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;你可以使用这个界面来替代命令行直接删除分支。&lt;/p&gt;
&lt;h4 id=&#34;_5&#34;&gt;比较分支&lt;/h4&gt;
&lt;p&gt;如果我们想要比较两个分支，可以像下面一样修改URL：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;https://github.com/user/repo/compare/{range}
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;其中&lt;code&gt;{range} = master...4-1-stable&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;例如：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;https://github.com/rails/rails/compare/master...4-1-stable
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt=&#34;Rails branch compare example&#34; src=&#34;http://i.imgur.com/0Z52X5Y.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;{range}&lt;/code&gt;还可以使用下面的形式:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;https://github.com/rails/rails/compare/master@{1.day.ago}...master
https://github.com/rails/rails/compare/master@{2014-10-04}...master
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;日期格式 &lt;code&gt;YYYY-DD-MM&lt;/code&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;Another compare example&#34; src=&#34;http://i.imgur.com/5dtzESz.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;...这样你就能查看master分支上一段时间或者指定日期内的改动。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://help.github.com/articles/comparing-commits-across-time&#34;&gt;&lt;em&gt;了解更多关于比较跨时间段的提交记录.&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&#34;_6&#34;&gt;比较不同派生库的分支&lt;/h4&gt;
&lt;p&gt;想要对派生仓库（Forked Repository）之间的分支进行比较，可以像下面这样修改URL实现：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;https://github.com/user/repo/compare/{foreign-user}:{branch}...{own-branch}
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;例如：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;https://github.com/rails/rails/compare/byroot:master...master
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt=&#34;Forked branch compare&#34; src=&#34;http://i.imgur.com/Q1W6qcB.png&#34; /&gt;&lt;/p&gt;
&lt;h3 id=&#34;gists&#34;&gt;Gists&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://gist.github.com/&#34;&gt;Gists&lt;/a&gt; 给我们提供了一种不需要创建一个完整的仓库，使小段代码也可以工作的简单方式。&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;Gist&#34; src=&#34;http://i.imgur.com/VkKI1LC.png?1&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Gist的URL后加上&lt;code&gt;.pibb&lt;/code&gt;，可以得到更适合嵌入到其他网站的HTML版本。&lt;/p&gt;
&lt;p&gt;Gists还可以像任何标准仓库一样被克隆。&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;git clone https://gist.github.com/tiimgreen/10545817
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt=&#34;Gists&#34; src=&#34;http://i.imgur.com/BcFzabp.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;这意味着你可以像 Github 仓库一样修改和更新 Gists :&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;git commit
&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;Username &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;https://gist.github.com&amp;#39;&lt;/span&gt;:
&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;Password &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;https://tiimgreen@gist.github.com&amp;#39;&lt;/span&gt;:
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href=&#34;https://help.github.com/articles/creating-gists&#34;&gt;&lt;em&gt;进一步了解如何创建 gists.&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;gitio&#34;&gt;Git.io&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;http://git.io&#34;&gt;Git.io&lt;/a&gt;是Github的短网址服务。&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;Git.io&#34; src=&#34;http://i.imgur.com/6JUfbcG.png?1&#34; /&gt;&lt;/p&gt;
&lt;p&gt;你可以通过Curl命令以普通HTTP协议使用它：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;curl -i http://git.io -F &lt;span class=&#34;s2&#34;&gt;&amp;quot;url=https://github.com/...&amp;quot;&lt;/span&gt;
HTTP/1.1 &lt;span class=&#34;m&#34;&gt;201&lt;/span&gt; Created
Location: http://git.io/abc123

&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;curl -i http://git.io/abc123
HTTP/1.1 &lt;span class=&#34;m&#34;&gt;302&lt;/span&gt; Found
Location: https://github.com/...
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href=&#34;https://github.com/blog/985-git-io-github-url-shortener&#34;&gt;&lt;em&gt;进一步了解 Git.io.&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;_7&#34;&gt;键盘快捷键&lt;/h3&gt;
&lt;p&gt;在仓库主页上提供了快捷键方便快速导航。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;按 &lt;code&gt;t&lt;/code&gt; 键会打开一个文件浏览器。&lt;/li&gt;
&lt;li&gt;按 &lt;code&gt;w&lt;/code&gt; 键会打开分支选择菜单。&lt;/li&gt;
&lt;li&gt;按 &lt;code&gt;s&lt;/code&gt; 键会激活顶端的命令栏  (Command Bar)。&lt;/li&gt;
&lt;li&gt;按 &lt;code&gt;l&lt;/code&gt; 键编辑Issue列表页的标签。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;查看文件内容时&lt;/strong&gt;（如：&lt;code&gt;https://github.com/tiimgreen/github-cheat-sheet/blob/master/README.md&lt;/code&gt;），按 &lt;code&gt;y&lt;/code&gt; 键将会冻结这个页面，这样就算代码被修改了也不会影响你当前看到的。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;按&lt;code&gt;?&lt;/code&gt;查看当前页面支持的快捷键列表：&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;Keyboard shortcuts&#34; src=&#34;http://i.imgur.com/y5ZfNEm.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://help.github.com/articles/using-the-command-bar&#34;&gt;&lt;em&gt;进一步了解如何使用 Command Bar.&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;_8&#34;&gt;整行高亮&lt;/h3&gt;
&lt;p&gt;在代码文件地址后加上&lt;code&gt;#L52&lt;/code&gt;或者单击行号52都会将第52行代码高亮显示。&lt;/p&gt;
&lt;p&gt;多行高亮也可以，比如用&lt;code&gt;#L53-L60&lt;/code&gt;选择范围，或者按住 &lt;code&gt;shift&lt;/code&gt;键，然后再点击选择的两行。&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;https://github.com/rails/rails/blob/master/activemodel/lib/active_model.rb#L53-L60
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt=&#34;整行高亮&#34; src=&#34;http://i.imgur.com/8AhjrCz.png&#34; /&gt;&lt;/p&gt;
&lt;h3 id=&#34;commitissue&#34;&gt;用commit信息关闭Issue&lt;/h3&gt;
&lt;p&gt;如果某个提交修复了一个Issue，当提交到master分支时，提交信息里可以使用&lt;code&gt;fix/fixes/fixed&lt;/code&gt;, &lt;code&gt;close/closes/closed&lt;/code&gt; 或者 &lt;code&gt;resolve/resolves/resolved&lt;/code&gt;等关键词，后面再跟上Issue号，这样就会关闭这个Issue。&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;git commit -m &lt;span class=&#34;s2&#34;&gt;&amp;quot;Fix screwup, fixes #12&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;这将会关闭Issue #12，并且在Issue讨论列表里关联引用这次提交。&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;Closing Repo&#34; src=&#34;http://i.imgur.com/Uh1gZdx.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://help.github.com/articles/closing-issues-via-commit-messages&#34;&gt;&lt;em&gt;进一步了解通过提交信息关闭Issue.&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;issue&#34;&gt;链接其他仓库的Issue&lt;/h3&gt;
&lt;p&gt;如果你想引用到同一个仓库中的一个Issue，只需使用井号 &lt;code&gt;#&lt;/code&gt; 加上Issue号，这样就会自动创建到此Issue的链接。&lt;/p&gt;
&lt;p&gt;要链接到其他仓库的Issue，就使用&lt;code&gt;user_name/repo_name#ISSUE_NUMBER&lt;/code&gt;的方式，例如&lt;code&gt;tiimgreen/toc#12&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;Cross-Link Issues&#34; src=&#34;https://camo.githubusercontent.com/447e39ab8d96b553cadc8d31799100190df230a8/68747470733a2f2f6769746875622d696d616765732e73332e616d617a6f6e6177732e636f6d2f626c6f672f323031312f736563726574732f7265666572656e6365732e706e67&#34; /&gt;&lt;/p&gt;
&lt;h3 id=&#34;cipull-request&#34;&gt;设置CI对每条Pull Request都进行构建&lt;/h3&gt;
&lt;p&gt;如果配置正确，&lt;a href=&#34;https://travis-ci.org/&#34;&gt;Travis CI&lt;/a&gt;会为每个你收到的Pull Request执行构建，就像每次提交也会触发构建一样。想了解更多关于Travis CI的信息，请看 &lt;a href=&#34;http://docs.travis-ci.com/user/getting-started/&#34;&gt;Travis CI入门&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/octokit/octokit.rb/pull/452&#34;&gt;&lt;img alt=&#34;Travis CI status&#34; src=&#34;https://cloud.githubusercontent.com/assets/1687642/2700187/3a88838c-c410-11e3-9a46-e65e2a0458cd.png&#34; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/blog/1227-commit-status-api&#34;&gt;&lt;em&gt;进一步了解 Commit status API.&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;markdown&#34;&gt;Markdown文件高亮语法&lt;/h3&gt;
&lt;p&gt;例如，可以像下面这样在你的Markdown文件里为Ruby代码添加语法高亮：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;```ruby
require &amp;#39;tabbit&amp;#39;
table = Tabbit.new(&amp;#39;Name&amp;#39;, &amp;#39;Email&amp;#39;)
table.add_row(&amp;#39;Tim Green&amp;#39;, &amp;#39;tiimgreen@gmail.com&amp;#39;)
puts table.to_s
```
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;效果像下面这样：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nb&#34;&gt;require&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;tabbit&amp;#39;&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;table&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;no&#34;&gt;Tabbit&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Name&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;Email&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;table&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;add_row&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Tim Green&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;tiimgreen@gmail.com&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;nb&#34;&gt;puts&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;table&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;to_s&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Github使用 &lt;a href=&#34;https://github.com/github/linguist&#34;&gt;Linguist&lt;/a&gt; 做语言识别和语法高亮。你可以仔细阅读 &lt;a href=&#34;https://github.com/github/linguist/blob/master/lib/linguist/languages.yml&#34;&gt;languages YAML file&lt;/a&gt;，了解有哪些可用的关键字。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://help.github.com/articles/github-flavored-markdown&#34;&gt;&lt;em&gt;进一步了解 GitHub Flavored Markdown.&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;_9&#34;&gt;表情符&lt;/h3&gt;
&lt;p&gt;可以在Pull Requests, Issues, 提交消息, Markdown文件里加入表情符。使用方法&lt;code&gt;:name_of_emoji:&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;:smile:
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;将输出一个笑脸：&lt;/p&gt;
&lt;p&gt;:smile:&lt;/p&gt;
&lt;p&gt;Github支持的完整表情符号列表详见&lt;a href=&#34;http://www.emoji-cheat-sheet.com/&#34;&gt;emoji-cheat-sheet.com&lt;/a&gt; 或 &lt;a href=&#34;https://github.com/scotch-io/All-Github-Emoji-Icons&#34;&gt;scotch-io/All-Github-Emoji-Icons&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;Github上使用最多的5个表情符号是：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;:shipit: - &lt;code&gt;:shipit:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;:sparkles: - &lt;code&gt;:sparkles:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;:-1: - &lt;code&gt;:-1:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;:+1: - &lt;code&gt;:+1:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;:clap: - &lt;code&gt;:clap:&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;_10&#34;&gt;静态与动态图片&lt;/h3&gt;
&lt;p&gt;注释和README等文件里也可以使用图片和GIF动画：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Alt&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;](&lt;/span&gt;&lt;span class=&#34;nl&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//www.sheawong.com/wp-content/uploads/2013/08/keephatin.gif)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;仓库中的原始图片可以被直接调用：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Alt&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;](&lt;/span&gt;&lt;span class=&#34;nl&#34;&gt;https&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//github.com/(user)/(repo)/raw/master/path/to/image.gif)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt=&#34;Peter don&#39;t care&#34; src=&#34;http://www.sheawong.com/wp-content/uploads/2013/08/keephatin.gif&#34; /&gt;&lt;/p&gt;
&lt;p&gt;所有图片都缓存在Github，不用担心你的站点不能访问时就看不到图片了。&lt;/p&gt;
&lt;h4 id=&#34;github-wiki&#34;&gt;在GitHub Wiki中嵌入图片&lt;/h4&gt;
&lt;p&gt;有多种方法可以在Wiki页面里嵌入图片。既可以像上一条里那样使用标准的Markdown语法，也可以像下面这样指定图片的高度或宽度：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;[[ http://www.sheawong.com/wp-content/uploads/2013/08/keephatin.gif | height = 100px ]]
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;结果：&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;Just a screenshot&#34; src=&#34;http://i.imgur.com/J5bMf7S.png&#34; /&gt;&lt;/p&gt;
&lt;h3 id=&#34;_11&#34;&gt;快速引用&lt;/h3&gt;
&lt;p&gt;在主题评论中引用之前某个人所说的，只需选中文本，然后按 &lt;code&gt;r&lt;/code&gt;键，想要的就会以引用的形式复制到你的输入框里。&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;Quick Quote&#34; src=&#34;https://f.cloud.github.com/assets/296432/124483/b0fa6204-6ef0-11e2-83c3-256c37fa7abc.gif&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/blog/1399-quick-quotes&#34;&gt;&lt;em&gt;进一步了解快速引用.&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;_12&#34;&gt;快速添加许可证&lt;/h3&gt;
&lt;p&gt;创建一个仓库时，Github会为你提供一个预置的软件许可列表：&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;License&#34; src=&#34;http://i.imgur.com/Chqj4Fg.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;对于已有的仓库，可以通过web界面创建文件来添加软件许可。输入&lt;code&gt;LICENSE&lt;/code&gt;作为文件名后，同样可以从预置的列表中选择一个作为模板。&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;License&#34; src=&#34;http://i.imgur.com/fTjQict.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;这个技巧也适用于 &lt;code&gt;.gitignore&lt;/code&gt; 文件。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://help.github.com/articles/open-source-licensing&#34;&gt;&lt;em&gt;进一步了解 open source licensing.&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;_13&#34;&gt;任务列表&lt;/h3&gt;
&lt;p&gt;Issues和Pull requests里可以添加复选框，语法如下（注意空白符）：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;- [ ] Be awesome
- [ ] Prepare dinner
  - [ ] Research recipe
  - [ ] Buy ingredients
  - [ ] Cook recipe
- [ ] Sleep
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt=&#34;Task List&#34; src=&#34;http://i.imgur.com/jJBXhsY.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;当项目被选中时，它对应的Markdown源码也被更新了：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;- [x] Be awesome
- [ ] Prepare dinner
  - [x] Research recipe
  - [x] Buy ingredients
  - [ ] Cook recipe
- [ ] Sleep
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href=&#34;https://help.github.com/articles/writing-on-github#task-lists&#34;&gt;&lt;em&gt;进一步了解任务列表.&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&#34;markdown_1&#34;&gt;Markdown文件中的任务列表&lt;/h4&gt;
&lt;p&gt;在完全适配Markdown语法的文件中可以使用以下语法加入一个&lt;strong&gt;只读&lt;/strong&gt;的任务列表&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;- [ ] Mercury
- [x] Venus
- [x] Earth
  - [x] Moon
- [x] Mars
  - [ ] Deimos
  - [ ] Phobos
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href=&#34;https://github.com/blog/1825-task-lists-in-all-markdown-documents&#34;&gt;&lt;em&gt;进一步了解Markdown文件中的任务列表&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;_14&#34;&gt;相对链接&lt;/h3&gt;
&lt;p&gt;Markdown文件里链接到内部内容时推荐使用相对链接。&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;[Link to a header](#awesome-section)
[Link to a file](docs/readme)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;绝对链接会在URL改变时（例如重命名仓库、用户名改变，建立分支项目）被更新。使用相对链接能够保证你的文档不受此影响。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://help.github.com/articles/relative-links-in-readmes&#34;&gt;&lt;em&gt;进一步了解相对链接.&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;github-pages&#34;&gt;GitHub Pages的元数据与插件支持&lt;/h3&gt;
&lt;p&gt;在Jekyll页面和文章里，仓库信息可在 &lt;code&gt;site.github&lt;/code&gt; 命名空间下找到，也可以显示出来，例如，使用 &lt;code&gt;{{ site.github.project_title }}&lt;/code&gt;显示项目标题。&lt;/p&gt;
&lt;p&gt;Jemoji和jekyll-mentions插件为你的Jekyll文章和页面增加了&lt;a href=&#34;#emojis&#34;&gt;emoji&lt;/a&gt;和&lt;a href=&#34;https://github.com/blog/821&#34;&gt;@mentions&lt;/a&gt;功能。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/blog/1797-repository-metadata-and-plugin-support-for-github-pages&#34;&gt;&lt;em&gt;了解更多 GitHub Pages的元数据和插件支持.&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;yaml&#34;&gt;查看YAML格式的元数据&lt;/h3&gt;
&lt;p&gt;许多博客站点，比如基于&lt;a href=&#34;http://jekyllrb.com/&#34;&gt;Jekyll&lt;/a&gt;的&lt;a href=&#34;http://pages.github.com/&#34;&gt;GitHub Pages&lt;/a&gt;，都依赖于一些文章头部的YAML格式的元数据。Github会将其渲染成一个水平表格，方便阅读。&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;YAML metadata&#34; src=&#34;https://camo.githubusercontent.com/47245aa16728e242f74a9a324ce0d24c0b916075/68747470733a2f2f662e636c6f75642e6769746875622e636f6d2f6173736574732f36343035302f313232383236372f65303439643063362d323761302d313165332d396464382d6131636432323539393334342e706e67&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/blog/1647-viewing-yaml-metadata-in-your-documents&#34;&gt;&lt;em&gt;进一步了解 在文档里查看YAML元数据.&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;_15&#34;&gt;渲染表格数据&lt;/h3&gt;
&lt;p&gt;GitHub支持将 &lt;code&gt;.csv&lt;/code&gt; (逗号分隔)和&lt;code&gt;.tsv&lt;/code&gt; (制表符分隔)格式的文件渲染成表格数据。&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;Tabular data&#34; src=&#34;https://camo.githubusercontent.com/1b6dd0157ffb45d9939abf14233a0cb13b3b4dfe/68747470733a2f2f662e636c6f75642e6769746875622e636f6d2f6173736574732f3238323735392f3937363436322f33323038336463652d303638642d313165332d393262322d3566323863313061353035392e706e67&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/blog/1601-see-your-csvs&#34;&gt;&lt;em&gt;进一步了解渲染表格数据.&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;pull-request&#34;&gt;撤销Pull Request&lt;/h3&gt;
&lt;p&gt;可以通过Pull Request中的Revert按钮来撤销一个已合并的Pull Request中的commit。按下按钮后会自动生成一个进行逆向操作的Pull Request。&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;Revert button&#34; src=&#34;https://camo.githubusercontent.com/0d3350caf2bb1cba53123ffeafc00ca702b1b164/68747470733a2f2f6769746875622d696d616765732e73332e616d617a6f6e6177732e636f6d2f68656c702f70756c6c5f72657175657374732f7265766572742d70756c6c2d726571756573742d6c696e6b2e706e67&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/blog/1857-introducing-the-revert-button&#34;&gt;*进一步了解“撤销”按钮&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;diffs&#34;&gt;Diffs&lt;/h3&gt;
&lt;h4 id=&#34;diffs_1&#34;&gt;可渲染文档的Diffs&lt;/h4&gt;
&lt;p&gt;提交和Pull Requests里包含有Github支持的可渲染文档（比如Markdown）会提供&lt;em&gt;source&lt;/em&gt; 和 &lt;em&gt;rendered&lt;/em&gt; 两个视图功能。&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;Source / Rendered view&#34; src=&#34;https://github-images.s3.amazonaws.com/help/repository/rendered_prose_diff.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;点击 &#34;rendered&#34; 按钮，看看改动在渲染后的显示效果。当你添加、删除或修改文本时，渲染纯文本视图非常方便。&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;Rendered Prose Diffs&#34; src=&#34;https://f.cloud.github.com/assets/17715/2003056/3997edb4-862b-11e3-90be-5e9586edecd7.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/blog/1784-rendered-prose-diffs&#34;&gt;&lt;em&gt;进一步了解渲染纯文本视图Diffs.&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&#34;_16&#34;&gt;可变化地图&lt;/h4&gt;
&lt;p&gt;当你在GitHub上查看一个包含地理数据的提交或pull request时，Github 将以可视化的方式对比版本之间的差异。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/benbalter/congressional-districts/commit/2233c76ca5bb059582d796f053775d8859198ec5&#34;&gt;&lt;img alt=&#34;Diffable Maps&#34; src=&#34;https://f.cloud.github.com/assets/282759/2090660/63f2e45a-8e97-11e3-9d8b-d4c8078b004e.gif&#34; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/blog/1772-diffable-more-customizable-maps&#34;&gt;&lt;em&gt;进一步了解可比较地图.&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&#34;diff&#34;&gt;在diff中折叠与扩展代码&lt;/h4&gt;
&lt;p&gt;你可以通过点击diff边栏里的 &lt;em&gt;unfold&lt;/em&gt; 按钮来多显示几行上下文。你可以一直点击 &lt;em&gt;unfold&lt;/em&gt; 按钮直到显示了文件的全部内容。这个功能在所有GitHub产生的diff界面都可以使用。&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;Expanding Context in Diffs&#34; src=&#34;https://f.cloud.github.com/assets/22635/1610539/863c1f64-5584-11e3-82bf-151b406a272f.gif&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/blog/1705-expanding-context-in-diffs&#34;&gt;&lt;em&gt;进一步了解扩展Diff上下文.&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&#34;pull-requestdiffpatch&#34;&gt;查看Pull Request的diff和patch&lt;/h4&gt;
&lt;p&gt;在Pull Request的URL后面加上 &lt;code&gt;.diff&lt;/code&gt; 或 &lt;code&gt;.patch&lt;/code&gt; 的扩展名就可以得到它的diff或patch文件，例如：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;https://github.com/tiimgreen/github-cheat-sheet/pull/15
https://github.com/tiimgreen/github-cheat-sheet/pull/15.diff
https://github.com/tiimgreen/github-cheat-sheet/pull/15.patch
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;.diff&lt;/code&gt; 扩展会使用普通文本格式显示如下内容：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;gh&#34;&gt;diff --git a/README.md b/README.md&lt;/span&gt;
&lt;span class=&#34;gh&#34;&gt;index 88fcf69..8614873 100644&lt;/span&gt;
&lt;span class=&#34;gd&#34;&gt;--- a/README.md&lt;/span&gt;
&lt;span class=&#34;gi&#34;&gt;+++ b/README.md&lt;/span&gt;
&lt;span class=&#34;gu&#34;&gt;@@ -28,6 +28,7 @@ All the hidden and not hidden features of Git and GitHub. This cheat sheet was i&lt;/span&gt;
 - [Merged Branches](#merged-branches)
 - [Quick Licensing](#quick-licensing)
 - [TODO Lists](#todo-lists)
&lt;span class=&#34;gi&#34;&gt;+- [Relative Links](#relative-links)&lt;/span&gt;
 - [.gitconfig Recommendations](#gitconfig-recommendations)
     - [Aliases](#aliases)
     - [Auto-correct](#auto-correct)
&lt;span class=&#34;gu&#34;&gt;@@ -381,6 +382,19 @@ When they are clicked, they will be updated in the pure Markdown:&lt;/span&gt;
 - [ ] Sleep

(...)
&lt;/pre&gt;&lt;/div&gt;


&lt;h4 id=&#34;_17&#34;&gt;渲染图像发生的变动&lt;/h4&gt;
&lt;p&gt;GitHub可以显示包括PNG、JPG、GIF、PSD在内的多种图片格式并提供了几种方式来比较这些格式的图片文件版本间的不同。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/blog/1845-psd-viewing-diffing&#34;&gt;&lt;img alt=&#34;Diffable PSD&#34; src=&#34;https://cloud.githubusercontent.com/assets/2546/3165594/55f2798a-eb56-11e3-92e7-b79ad791a697.gif&#34; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://help.github.com/articles/rendering-and-diffing-images&#34;&gt;&lt;em&gt;查看更多关于渲染图像变动的内容&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;hub&#34;&gt;Hub&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/github/hub&#34;&gt;Hub&lt;/a&gt;是一个对Git进行了封装的命令行工具，可以帮助你更方便的使用Github。&lt;/p&gt;
&lt;p&gt;这使得你可以像下面这样进行克隆：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;hub clone tiimgreen/toc
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href=&#34;https://github.com/github/hub#commands&#34;&gt;&lt;em&gt;查看更多Hub提供的超酷命令.&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;_18&#34;&gt;贡献者指南&lt;/h3&gt;
&lt;p&gt;在你的仓库的根目录添加一个名为 &lt;code&gt;CONTRIBUTING&lt;/code&gt; 的文件后，贡献者在新建Issue或Pull Request时会看到这个文件的链接。&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;Contributing Guidelines&#34; src=&#34;https://camo.githubusercontent.com/71995d6b0e620a9ef1ded00a04498241c69dd1bf/68747470733a2f2f6769746875622d696d616765732e73332e616d617a6f6e6177732e636f6d2f736b697463682f6973737565732d32303132303931332d3136323533392e6a7067&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/blog/1184-contributing-guidelines&#34;&gt;&lt;em&gt;进一步了解贡献者指南.&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;github_1&#34;&gt;GitHub资源&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Title&lt;/th&gt;
&lt;th&gt;Link&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;GitHub Explore&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/explore&#34;&gt;https://github.com/explore&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;GitHub Blog&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/blog&#34;&gt;https://github.com/blog&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;GitHub Help&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://help.github.com/&#34;&gt;https://help.github.com/&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;GitHub Training&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;http://training.github.com/&#34;&gt;http://training.github.com/&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;GitHub Developer&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://developer.github.com/&#34;&gt;https://developer.github.com/&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr /&gt;
&lt;h2 id=&#34;git&#34;&gt;Git&lt;/h2&gt;
&lt;h3 id=&#34;_19&#34;&gt;前一个分支&lt;/h3&gt;
&lt;p&gt;快速检出上一个分支：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;git checkout -
&lt;span class=&#34;c&#34;&gt;# Switched to branch &amp;#39;master&amp;#39;&lt;/span&gt;

&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;git checkout -
&lt;span class=&#34;c&#34;&gt;# Switched to branch &amp;#39;next&amp;#39;&lt;/span&gt;

&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;git checkout -
&lt;span class=&#34;c&#34;&gt;# Switched to branch &amp;#39;master&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href=&#34;http://git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging&#34;&gt;&lt;em&gt;进一步了解 Git 分支.&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;stripspace&#34;&gt;Stripspace命令&lt;/h3&gt;
&lt;p&gt;Git Stripspace命令可以:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;去掉行尾空白符&lt;/li&gt;
&lt;li&gt;多个空行压缩成一行&lt;/li&gt;
&lt;li&gt;必要时在文件末尾增加一个空行&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;使用此命令时必须传入一个文件，像这样：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;git stripspace &amp;lt; README.md
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href=&#34;http://git-scm.com/docs/git-stripspace&#34;&gt;&lt;em&gt;进一步了解 Git &lt;code&gt;stripspace&lt;/code&gt; 命令.&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;pull-requests&#34;&gt;检出Pull Requests&lt;/h3&gt;
&lt;p&gt;Pull Request是一种GitHub上可以通过以下多种方式在本地被检索的特别分支：&lt;/p&gt;
&lt;p&gt;检索某个分支并临时储存在本地的&lt;code&gt;FETCH_HEAD&lt;/code&gt;中以便快速查看更改(diff)以及合并(merge)：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;git fetch origin refs/pull/&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;PR-Number&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;/head
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;通过refspec获取所有的Pull Request为本地分支：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;git fetch origin &lt;span class=&#34;s1&#34;&gt;&amp;#39;+refs/pull/*/head:refs/remotes/origin/pr/*&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;或在仓库的&lt;code&gt;.git/config&lt;/code&gt;中加入下列设置来自动获取远程仓库中的Pull Request&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;k&#34;&gt;[remote &amp;quot;origin&amp;quot;]&lt;/span&gt;
    &lt;span class=&#34;na&#34;&gt;fetch&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;+refs/heads/*:refs/remotes/origin/*&lt;/span&gt;
&lt;span class=&#34;s&#34;&gt;    url = git@github.com:tiimgreen/github-cheat-sheet.git&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;k&#34;&gt;[remote &amp;quot;origin&amp;quot;]&lt;/span&gt;
    &lt;span class=&#34;na&#34;&gt;fetch&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;+refs/heads/*:refs/remotes/origin/*&lt;/span&gt;
&lt;span class=&#34;s&#34;&gt;    url = git@github.com:tiimgreen/github-cheat-sheet.git&lt;/span&gt;
&lt;span class=&#34;s&#34;&gt;    fetch = +refs/pull/*/head:refs/remotes/origin/pr/*&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;对基于派生库的Pull Request，可以通过先&lt;code&gt;checkout&lt;/code&gt;代表此Pull Request的远端分支再由此分支建立一个本地分支：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;git checkout pr/42 pr-42
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;操作多个仓库的时候，可以在Git中设置获取Pull Request的全局选项。&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt; git config --global --add remote.origin.fetch &amp;quot;+refs/pull/*/head:refs/remotes/origin/pr/*&amp;quot;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;此时可以在任意仓库中使用以下命令：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt; git fetch origin
&lt;/pre&gt;&lt;/div&gt;


&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;git checkout pr/42
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href=&#34;https://help.github.com/articles/checking-out-pull-requests-locally&#34;&gt;&lt;em&gt;进一步了解如何检出pull request到本地.&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;trollface&#34;&gt;提交空改动 :trollface:&lt;/h3&gt;
&lt;p&gt;可以使用&lt;code&gt;--allow-empty&lt;/code&gt;选项强制创建一个没有任何改动的提交：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;git commit -m &lt;span class=&#34;s2&#34;&gt;&amp;quot;Big-ass commit&amp;quot;&lt;/span&gt; --allow-empty
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;这样做在如下几种情况下是有意义的：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;标记新的工作或一个新功能的开始。&lt;/li&gt;
&lt;li&gt;记录对项目的跟代码无关的改动。&lt;/li&gt;
&lt;li&gt;跟使用你仓库的其他人交流。&lt;/li&gt;
&lt;li&gt;作为仓库的第一次提交，因为第一次提交后不能被rebase： &lt;code&gt;git commit -m &#34;init repo&#34; --allow-empty&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;git-status&#34;&gt;更直观的Git Status&lt;/h3&gt;
&lt;p&gt;在命令行输入如下命令:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;git status
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;可以看到:&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;git status&#34; src=&#34;http://i.imgur.com/o3PEHAA.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;加上&lt;code&gt;-sb&lt;/code&gt;选项:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;git status -sb
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;这会得到:&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;git status -sb&#34; src=&#34;http://i.imgur.com/xNI1bT0.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://git-scm.com/docs/git-status&#34;&gt;&lt;em&gt;进一步了解 Git &lt;code&gt;status&lt;/code&gt; 命令.&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;git-log&#34;&gt;更直观的Git Log&lt;/h3&gt;
&lt;p&gt;输入如下命令:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;git log --all --graph --pretty&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;format:&lt;span class=&#34;s1&#34;&gt;&amp;#39;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&amp;lt;%an&amp;gt;%Creset&amp;#39;&lt;/span&gt; --abbrev-commit --date&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;relative
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;可以看到:&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;git log --all --graph --pretty=format:&#39;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&amp;lt;%an&amp;gt;%Creset&#39; --abbrev-commit --date=relative&#34; src=&#34;http://i.imgur.com/R2z8l7c.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;这要归功于&lt;a href=&#34;http://stackoverflow.com/users/88355/palesz&#34;&gt;Palesz&lt;/a&gt;在stackoverflow的回答。&lt;/p&gt;
&lt;p&gt;&lt;em&gt;这个命令可以被用作别名，详细做法见&lt;a href=&#34;https://github.com/tiimgreen/github-cheat-sheet#aliases&#34;&gt;这里&lt;/a&gt;。&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://git-scm.com/docs/git-log&#34;&gt;&lt;em&gt;进一步了解 Git &lt;code&gt;log&lt;/code&gt; 命令.&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;git_1&#34;&gt;Git查询&lt;/h3&gt;
&lt;p&gt;Git查询运行你在之前的所有提交信息里进行搜索，找到其中和搜索条件相匹配的最近的一条。&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;git show :/query
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;这里 &lt;code&gt;query&lt;/code&gt; （区别大小写）是你想要搜索的词语， 这条命令会找到包含这个词语的最后那个提交并显示变动详情。&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;git show :/typo
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt=&#34;git show :/query&#34; src=&#34;http://i.imgur.com/icaGiNt.png&#34; /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;按 &lt;code&gt;q&lt;/code&gt; 键退出命令。*&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;_20&#34;&gt;合并分支&lt;/h3&gt;
&lt;p&gt;输入命令:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;git branch --merged
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;这会显示所有已经合并到你当前分支的分支列表。 &lt;/p&gt;
&lt;p&gt;相反地：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;git branch --no-merged
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;会显示所有还没有合并到你当前分支的分支列表。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://git-scm.com/docs/git-branch&#34;&gt;&lt;em&gt;进一步了解 Git &lt;code&gt;branch&lt;/code&gt; 命令.&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;_21&#34;&gt;使用网页查看本地仓库&lt;/h3&gt;
&lt;p&gt;使用Git的 &lt;code&gt;instaweb&lt;/code&gt; 可以立即在 &lt;code&gt;gitweb&lt;/code&gt;中浏览你的工作仓库。这个命令是个简单的脚本，配置了&lt;code&gt;gitweb&lt;/code&gt;和用来浏览本地仓库的Web服务器。&lt;em&gt;（译者注：默认需要lighttpd支持）&lt;/em&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;git instaweb
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;执行后打开：&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;Git instaweb&#34; src=&#34;http://i.imgur.com/Dxekmqc.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://git-scm.com/docs/git-instaweb&#34;&gt;&lt;em&gt;进一步了解 Git &lt;code&gt;instaweb&lt;/code&gt; 命令.&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;git_2&#34;&gt;Git配置&lt;/h3&gt;
&lt;p&gt;所有Git配置都保存在你的&lt;code&gt;.gitconfig&lt;/code&gt; 文件中。&lt;/p&gt;
&lt;h4 id=&#34;git_3&#34;&gt;Git命令自定义别名&lt;/h4&gt;
&lt;p&gt;别名用来帮助你定义自己的git命令。比如你可以定义 &lt;code&gt;git a&lt;/code&gt; 来运行 &lt;code&gt;git add --all&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;要添加一个别名， 一种方法是打开 &lt;code&gt;~/.gitconfig&lt;/code&gt; 文件并添加如下内容：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;k&#34;&gt;[alias]&lt;/span&gt;
  &lt;span class=&#34;na&#34;&gt;co&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;checkout&lt;/span&gt;
&lt;span class=&#34;s&#34;&gt;  cm = commit&lt;/span&gt;
&lt;span class=&#34;s&#34;&gt;  p = push&lt;/span&gt;
&lt;span class=&#34;s&#34;&gt;  # Show verbose output about tags, branches or remotes&lt;/span&gt;
&lt;span class=&#34;s&#34;&gt;  tags = tag -l&lt;/span&gt;
&lt;span class=&#34;s&#34;&gt;  branches = branch -a&lt;/span&gt;
&lt;span class=&#34;s&#34;&gt;  remotes = remote -v&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;...或者在命令行里键入：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;git config --global alias.new_alias git_function
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;例如：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;git config --global alias.cm commit
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;指向多个命令的别名可以用引号来定义：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;git config --global alias.ac &lt;span class=&#34;s1&#34;&gt;&amp;#39;add -A . &amp;amp;&amp;amp; commit&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;下面列出了一些有用的别名：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;别名 Alias&lt;/th&gt;
&lt;th&gt;命令 Command&lt;/th&gt;
&lt;th&gt;如何设置 What to Type&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;git cm&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;git commit&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;git config --global alias.cm commit&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;git co&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;git checkout&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;git config --global alias.co checkout&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;git ac&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;git add . -A&lt;/code&gt; &lt;code&gt;git commit&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;git config --global alias.ac &#39;!git add -A &amp;amp;&amp;amp; git commit&#39;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;git st&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;git status -sb&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;git config --global alias.st &#39;status -sb&#39;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;git tags&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;git tag -l&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;git config --global alias.tags &#39;tag -l&#39;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;git branches&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;git branch -a&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;git config --global alias.branches &#39;branch -a&#39;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;git remotes&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;git remote -v&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;git config --global alias.remotes &#39;remote -v&#39;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;git lg&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;git log --color --graph --pretty=format:&#39;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&amp;lt;%an&amp;gt;%Creset&#39; --abbrev-commit --&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;git config --global alias.lg &#34;log --color --graph --pretty=format:&#39;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&amp;lt;%an&amp;gt;%Creset&#39; --abbrev-commit --&#34;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id=&#34;_22&#34;&gt;自动更正&lt;/h4&gt;
&lt;p&gt;如果键入 &lt;code&gt;git comit&lt;/code&gt; 你会看到如下输出：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;git comit -m &lt;span class=&#34;s2&#34;&gt;&amp;quot;Message&amp;quot;&lt;/span&gt;
&lt;span class=&#34;c&#34;&gt;# git: &amp;#39;comit&amp;#39; is not a git command. See &amp;#39;git --help&amp;#39;.&lt;/span&gt;

&lt;span class=&#34;c&#34;&gt;# Did you mean this?&lt;/span&gt;
&lt;span class=&#34;c&#34;&gt;#   commit&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;为了在键入 &lt;code&gt;comit&lt;/code&gt; 调用 &lt;code&gt;commit&lt;/code&gt;命令，只需启用自动纠错功能：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;git config --global help.autocorrect 1
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;现在你就会看到：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;git comit -m &lt;span class=&#34;s2&#34;&gt;&amp;quot;Message&amp;quot;&lt;/span&gt;
&lt;span class=&#34;c&#34;&gt;# WARNING: You called a Git command named &amp;#39;comit&amp;#39;, which does not exist.&lt;/span&gt;
&lt;span class=&#34;c&#34;&gt;# Continuing under the assumption that you meant &amp;#39;commit&amp;#39;&lt;/span&gt;
&lt;span class=&#34;c&#34;&gt;# in 0.1 seconds automatically...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4 id=&#34;_23&#34;&gt;带颜色输出&lt;/h4&gt;
&lt;p&gt;要在你的Git命令输出里加上颜色的话，可以用如下命令：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;git config --global color.ui 1
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href=&#34;http://git-scm.com/docs/git-config&#34;&gt;&lt;em&gt;进一步了解 Git &lt;code&gt;config&lt;/code&gt; 命令.&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/tiimgreen/github-cheat-sheet/blob/master/README.zh-cn.md&#34;&gt;原文地址&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
    </content>
  </entry>
  <entry>
    <title>各种语言的比较</title>
    <link type="text/html" rel="alternate" href="/content/tools/各种语言的比较.html"/>
    <id>/content/tools/各种语言的比较.html</id>
    <published>2014-08-05 21:58</published>
    <updated>2014-08-05 21:58</updated>
    <content type="html">
      &lt;p&gt;今天分享一个非常适合编(吹)程(牛)入(逼)门的网站，请猛戳&lt;a href=&#34;http://hyperpolyglot.org/&#34;&gt;这里&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;这个网站比较了一些相似的编程语言或是工具，并且非常直观的输出在页面上。比如:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://hyperpolyglot.org/scripting&#34;&gt;各种交互式脚本语言的比较&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://hyperpolyglot.org/c&#34;&gt;C, GO, Swift的比较&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://hyperpolyglot.org/lisp&#34;&gt;Lisp方言的比较&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://hyperpolyglot.org/numerical-analysis&#34;&gt;数据分析及统计工具的比较&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://hyperpolyglot.org/unix-shells&#34;&gt;shell的比较&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://hyperpolyglot.org/db&#34;&gt;数据库的比较等等&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;其中我觉得写的比较好的是&lt;code&gt;JavaScript&lt;/code&gt;, &lt;code&gt;PHP&lt;/code&gt;, &lt;code&gt;Python&lt;/code&gt;, &lt;code&gt;Ruby&lt;/code&gt;之间的比较。
比较涵盖的点比较多，非常清晰。&lt;/p&gt;
&lt;p&gt;看完了再也不怕别人瞎BB了，再也不怕没有吹牛逼的东西了!&lt;/p&gt;
    </content>
  </entry>
  <entry>
    <title>飞翔在命令行中</title>
    <link type="text/html" rel="alternate" href="/content/tools/飞翔在命令行中.html"/>
    <id>/content/tools/飞翔在命令行中.html</id>
    <published>2014-07-10 16:24</published>
    <updated>2014-07-10 16:24</updated>
    <content type="html">
      &lt;ul&gt;
&lt;li&gt;
&lt;p&gt;查看目录结构&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;tree
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;mac默认是没有tree命令的，所以可以有2种办法:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;brew install tree&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;find . -print | sed -e &#39;s;[^/]*/;|____;g;s;____|; |;g&#39;&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;查看代码有多少行&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;find . -name &amp;quot;*.py&amp;quot; | xargs wc -l
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;删除所有的pyc文件&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;find . -name &amp;quot;*.pyc&amp;quot; -delete
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;返回到上一个目录&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;cd -
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;生成随机数&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;jot -r [number_of_numbers] [lower_limit] [upper_limit]
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;显示当前谁登陆到了你的系统&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;w
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;将一个字符串打印很多次&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;yes [string]
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;更好看的git log&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;git log --graph --abbrev-commit --decorate --date=relative --format=format:&amp;#39;%C(bold blue)%h%C(reset) - %C(bold green)(%ar)%C(reset) %C(white)%s%C(reset) %C(dim white)- %an%C(reset)%C(bold yellow)%d%C(reset)&amp;#39; --all
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;更好看的git log(带详细信息)&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;git log --graph --abbrev-commit --decorate --date=relative --format=format:&amp;#39;%C(bold blue)%h%C(reset) - %C(bold green)(%ar)%C(reset) %C(white)%s%C(reset) %C(dim white)- %an%C(reset)%C(bold yellow)%d%C(reset)&amp;#39; --all -p
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;curl相关命令&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;直接输出到命令行&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;curl http://www.centos.org
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;输出到指定文件&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;curl -o mygettext.html http://www.gnu.org/software/gettext/manual/gettext.html
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;or 直接用url里面的文件名&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;curl -O http://www.gnu.org/software/gettext/manual/gettext.html
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;允许redirects&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;curl -L http://www.google.com
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;断点续传&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;curl -C - -O http://www.gnu.org/software/gettext/manual/gettext.html
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;也可指定续传的位置&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;限定下载速度&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;curl --limit-rate 1000B -O http://www.gnu.org/software/gettext/manual/gettext.html
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;需要认证&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;curl -u username:password URL
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;使用代理&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;curl -x proxysever.test.com:3128 http://google.co.in
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;发邮件&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;curl --mail-from blah@test.com --mail-rcpt foo@test.com smtp://mailserver.com
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;输入后，就可以开始写邮件内容， .表示结束&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;n&#34;&gt;Subject&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Testing&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;This&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;test&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mail&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;HTTP Method&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;curl --request GET &amp;#39;http://www.somedomain.com/&amp;#39;
curl --request POST &amp;#39;http://www.somedomain.com/&amp;#39;
curl --request DELETE &amp;#39;http://www.somedomain.com/&amp;#39;
curl --request PUT &amp;#39;http://www.somedomain.com/&amp;#39;
* 传入参数

curl --request POST &amp;#39;http://www.somedomain.com/login/&amp;#39; --data &amp;#39;username=myusername&amp;amp;password=mypassword&amp;#39;
curl --data-urlencode &amp;quot;date=April 1&amp;quot; &amp;#39;http://example.com/form.cgi&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;上传文件:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nt&#34;&gt;curl&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;--request&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;POST&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;http://127.0.0.1:8008/api/trace_file&amp;#39;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;-F&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;trace_file=@journal.txt;type=text/plain&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;带上头部信息&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;curl --request GET &amp;#39;http://www.somedomain.com/user/info/&amp;#39; --header &amp;#39;sessionid:1234567890987654321&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;需要请求返回带上头信息:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;curl --request GET &amp;#39;http://somedomain.com/&amp;#39; --include
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;-I&lt;/code&gt; 则是只显示头信息&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;获取详细返回结果&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;curl -v &amp;#39;http://somedomain.com/&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;还不够详细？&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;curl --trace output.txt &amp;#39;http://somedomain.com/&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;or&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;curl --trace-ascii output.txt &amp;#39;http://somedomain.com/&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;提供referer信息&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;curl --referer &amp;#39;http://www.example.com http://www.example.com&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;UA&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;n&#34;&gt;curl&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;agent&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;quot;[User Agent]&amp;quot;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;URL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;cookie&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;curl --cookie &amp;quot;name=xxx&amp;quot; www.example.com
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;带host访问&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;curl -H &amp;#39;Host: project1.loc&amp;#39; &amp;#39;http://127.0.0.1/something&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;命令行打开任一程序(限OSX)&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;open /Applications/Safari.app/
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;or 打开一个目录&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;open .
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;粘贴复制(限OSX)&lt;/p&gt;
&lt;p&gt;将一个文件内容拷贝到clipboard:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;pbcopy &amp;lt; blogpost.txt
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;将clipboard的内容追加到文件:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;pbpaste &amp;gt;&amp;gt; tasklist.txt
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;截图(限OSX)&lt;/p&gt;
&lt;p&gt;屏幕截图保存到image.png并发送到Mail中&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;screencapture -C -M image.png
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;鼠标选择区域截图并保存到clipboard&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;screencapture -c -W
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;10秒之后截图并用Preview打开&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;screencapture -T 10 -P image.png
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;鼠标截取任意区域内容,保存为pdf&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;screencapture -s -t pdf image.pdf
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;说出任意内容(限OSX)&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;say &amp;#39;You love me.&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;OSX读写ntfs格式移动硬盘&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;mkdir -p /Volumes/1 &amp;amp;&amp;amp; sudo mount -t ntfs /dev/disk1s1 /Volumes/1
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;之后操作1文件夹就行了&lt;/p&gt;
&lt;p&gt;弹出:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;sudo umount /dev/disk1s1
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ul&gt;
    </content>
  </entry>
  <entry>
    <title>随意的git commit</title>
    <link type="text/html" rel="alternate" href="/content/tools/随意的git-commit.html"/>
    <id>/content/tools/随意的git-commit.html</id>
    <published>2014-10-27 14:40</published>
    <updated>2014-10-27 14:40</updated>
    <content type="html">
      &lt;p&gt;有一种比较好的commit信息的组织格式叫做 &lt;strong&gt;50/72 formatting&lt;/strong&gt;，总结起来也就是下面这几点:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;第一行简要的表明这次commit干了什么，就好像给别人下达某种命令，不超过50字符&lt;/li&gt;
&lt;li&gt;第二行是空行&lt;/li&gt;
&lt;li&gt;一些补充信息，不超过72字符，并控制好单行长度&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;原文如下:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;Short (50 chars or less) summary of changes

More detailed explanatory text, if necessary.  Wrap it to about 72 characters or so.
In some contexts, the first line is treated as the subject of an email and the rest of the text as the body.
The blank line separating the summary from the body is critical (unless you omit the body entirely);
tools like rebase can get confused if you run the two together.

Further paragraphs come after blank lines.

- Bullet points are okay, too

- Typically a hyphen or asterisk is used for the bullet, preceded by a
  single space, with blank lines in between, but conventions vary here
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;写好commit信息可以加速code review的速度，并且帮助其他人或者自己更好的维护代码，也便于代码回滚.&lt;/p&gt;
&lt;p&gt;本来我一直老老实实写commit的log的，后来发现大家都是写奇奇怪怪的log，也就染上了随意写commit log的习惯。&lt;/p&gt;
&lt;p&gt;那么问题来了，就算要随便写commit log，那怎么才能写得高贵冷艳让人一眼看不出来是瞎写的呢?&lt;/p&gt;
&lt;p&gt;偶然的机会看到了这么一个网站: &lt;a href=&#34;http://whatthecommit.com/index.txt&#34;&gt;http://whatthecommit.com/index.txt&lt;/a&gt;，它能随机生成commit log&lt;/p&gt;
&lt;p&gt;那么要想随便写commit log就只需要下面这行命令就行啦：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;git commit -m &amp;quot;`curl -s http://whatthecommit.com/index.txt`&amp;quot;
&lt;/pre&gt;&lt;/div&gt;
    </content>
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link type="text/html" rel="alternate" href="/content/notes/hello.html"/>
    <id>/content/notes/hello.html</id>
    <published>2014-06-12 00:00</published>
    <updated>2014-06-12 00:00</updated>
    <content type="html">
      &lt;h1 style=&#34;text-align: center;&#34;&gt;23岁的天空&lt;/h1&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;p style=&#34;text-align: center;&#34;&gt;所有美丽的&lt;/p&gt;

&lt;p style=&#34;text-align: center;&#34;&gt;和自认为美丽的东西&lt;/p&gt;

&lt;p style=&#34;text-align: center;&#34;&gt;都出来吧&lt;/p&gt;

&lt;p style=&#34;text-align: center;&#34;&gt;我们一起等着&lt;/p&gt;

&lt;p style=&#34;text-align: center;&#34;&gt;最恐惧也是最安详的&lt;/p&gt;

&lt;p style=&#34;text-align: center;&#34;&gt;时刻的到来&lt;/p&gt;
    </content>
  </entry>
  <entry>
    <title>why has cb</title>
    <link type="text/html" rel="alternate" href="/content/notes/why_has_cb.html"/>
    <id>/content/notes/why_has_cb.html</id>
    <published>2014-07-11 15:17</published>
    <updated>2014-07-11 15:17</updated>
    <content type="html">
      &lt;p&gt;之前我写博客的工具是&lt;a href=&#34;http://hexo.io/&#34;&gt;hexo&lt;/a&gt;, 是一个台湾人写的很强大的node工具.&lt;/p&gt;
&lt;p&gt;虽然它有丰富的命令和漂亮的主题以及还算不错的文档, 但是对于我来说, 它太重了.
本来平时能写博客的时间就很有限, 用hexo的时候每次想改什么东西都要去查文档, 或是去google, 太费事了.&lt;/p&gt;
&lt;p&gt;对我来说, 这件事情太不可控了.&lt;/p&gt;
&lt;p&gt;前段时间在&lt;a href=&#34;http://us4.campaign-archive2.com/?u=9735795484d2e4c204da82a29&amp;amp;id=cb904ae2f0&amp;amp;e=3656da6948&#34;&gt;Pycoder&#39;s weekly&lt;/a&gt;上面看到了一个叫&lt;a href=&#34;https://github.com/tankywoo/simiki&#34;&gt;simiki&lt;/a&gt;的项目, 简洁的风格让我眼前一亮, 去github上看了它的代码, 也不是很麻烦.
工作上正好也有个需要大量本地文件操作的项目.&lt;/p&gt;
&lt;p&gt;所以我在想, 为什么我不自己写一个生成静态页的工具用来搭建博客呢?&lt;/p&gt;
&lt;p&gt;于是cb就诞生了, 这是个非常小的项目, 非常轻量, 但是配上github page足以搭建一个完整的个人博客了. 以后会再做几个主题去丰富它.&lt;/p&gt;
&lt;p&gt;现在我在整理一些之前的笔记和书签, 之后会以博客的形式发表出来, 算是对之前工作的一次总结.
以后希望能够坚持去写博客, 将一些东西记录下来, 也会尝试去翻译一些非常不错的文章.&lt;/p&gt;
&lt;p&gt;以上.&lt;/p&gt;
    </content>
  </entry>
  
  <entry>
    <title>MIME种类</title>
    <link type="text/html" rel="alternate" href="/content/http/mime种类.html"/>
    <id>/content/http/mime种类.html</id>
    <published>2014-12-01 14:21</published>
    <updated>2014-12-01 14:21</updated>
    <content type="html">
      &lt;h2 id=&#34;_1&#34;&gt;简单说明&lt;/h2&gt;
&lt;p&gt;MIME(Multi-Purpose Internet Mail Extensions)是一种电子邮件原始协议的扩展，通过它可以传输各种各样的数据。它被广泛的运用在如今的互联网中，不仅仅是用来发邮件。&lt;/p&gt;
&lt;p&gt;通讯双方可以在头信息中指明MIME头信息，另一方就能够识别出传输的特定数据并作出相应的处理。
比如服务器在返回的数据中加入MIME头信息表明返回的数据是一张图片，那么浏览器就会展示图片，而不是提示下载，或是渲染HTML页面。&lt;/p&gt;
&lt;p&gt;MIME头信息中有2个是比较常见的：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Content-Type，这种表明了数据的种类，以及子种类，比如 &lt;code&gt;Content-Type: text/plain&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Content-Disposition，这个头信息在HTTP里面，一般是用来提示客户端把返回信息的body部分作为一个可下载的文件处理&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;_2&#34;&gt;支持类型&lt;/h2&gt;
&lt;table border=&#34;1&#34; class=&#34;table table-bordered table-striped table-condensed&#34; style=&#34;margin-right:auto; margin-left:auto;&#34;&gt;
    &lt;tr&gt;
        &lt;th&gt;&amp;#25991;&amp;#20214;&amp;#21518;&amp;#32512;&amp;#21517;&lt;/th&gt;
        &lt;th&gt;&amp;#23545;&amp;#24212;&amp;#30340;MIME&amp;#31867;&amp;#22411;&lt;/th&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.3dm       &lt;/td&gt;&lt;td&gt; x-world/x-3dmf&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.3dmf      &lt;/td&gt;&lt;td&gt; x-world/x-3dmf&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.a         &lt;/td&gt;&lt;td&gt; application/octet-stream&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.aab       &lt;/td&gt;&lt;td&gt; application/x-authorware-bin&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.aam       &lt;/td&gt;&lt;td&gt; application/x-authorware-map&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.aas       &lt;/td&gt;&lt;td&gt; application/x-authorware-seg&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.abc       &lt;/td&gt;&lt;td&gt; text/vnd.abc&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.acgi      &lt;/td&gt;&lt;td&gt; text/html&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.afl       &lt;/td&gt;&lt;td&gt; video/animaflex&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ai        &lt;/td&gt;&lt;td&gt; application/postscript&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.aif       &lt;/td&gt;&lt;td&gt; audio/aiff&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.aif       &lt;/td&gt;&lt;td&gt; audio/x-aiff&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.aifc      &lt;/td&gt;&lt;td&gt; audio/aiff&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.aifc      &lt;/td&gt;&lt;td&gt; audio/x-aiff&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.aiff      &lt;/td&gt;&lt;td&gt; audio/aiff&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.aiff      &lt;/td&gt;&lt;td&gt; audio/x-aiff&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.aim       &lt;/td&gt;&lt;td&gt; application/x-aim&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.aip       &lt;/td&gt;&lt;td&gt; text/x-audiosoft-intra&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ani       &lt;/td&gt;&lt;td&gt; application/x-navi-animation&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.aos       &lt;/td&gt;&lt;td&gt; application/x-nokia-9000-communicator-add-on-software&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.aps       &lt;/td&gt;&lt;td&gt; application/mime&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.arc       &lt;/td&gt;&lt;td&gt; application/octet-stream&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.arj       &lt;/td&gt;&lt;td&gt; application/arj&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.arj       &lt;/td&gt;&lt;td&gt; application/octet-stream&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.art       &lt;/td&gt;&lt;td&gt; image/x-jg&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.asf       &lt;/td&gt;&lt;td&gt; video/x-ms-asf&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.asm       &lt;/td&gt;&lt;td&gt; text/x-asm&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.asp       &lt;/td&gt;&lt;td&gt; text/asp&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.asx       &lt;/td&gt;&lt;td&gt; application/x-mplayer2&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.asx       &lt;/td&gt;&lt;td&gt; video/x-ms-asf&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.asx       &lt;/td&gt;&lt;td&gt; video/x-ms-asf-plugin&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.au        &lt;/td&gt;&lt;td&gt; audio/basic&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.au        &lt;/td&gt;&lt;td&gt; audio/x-au&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.avi       &lt;/td&gt;&lt;td&gt; application/x-troff-msvideo&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.avi       &lt;/td&gt;&lt;td&gt; video/avi&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.avi       &lt;/td&gt;&lt;td&gt; video/msvideo&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.avi       &lt;/td&gt;&lt;td&gt; video/x-msvideo&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.avs       &lt;/td&gt;&lt;td&gt; video/avs-video&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.bcpio     &lt;/td&gt;&lt;td&gt; application/x-bcpio&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.bin       &lt;/td&gt;&lt;td&gt; application/mac-binary&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.bin       &lt;/td&gt;&lt;td&gt; application/macbinary&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.bin       &lt;/td&gt;&lt;td&gt; application/octet-stream&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.bin       &lt;/td&gt;&lt;td&gt; application/x-binary&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.bin       &lt;/td&gt;&lt;td&gt; application/x-macbinary&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.bm        &lt;/td&gt;&lt;td&gt; image/bmp&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.bmp       &lt;/td&gt;&lt;td&gt; image/bmp&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.bmp       &lt;/td&gt;&lt;td&gt; image/x-windows-bmp&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.boo       &lt;/td&gt;&lt;td&gt; application/book&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.book      &lt;/td&gt;&lt;td&gt; application/book&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.boz       &lt;/td&gt;&lt;td&gt; application/x-bzip2&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.bsh       &lt;/td&gt;&lt;td&gt; application/x-bsh&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.bz        &lt;/td&gt;&lt;td&gt; application/x-bzip&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.bz2       &lt;/td&gt;&lt;td&gt; application/x-bzip2&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.c         &lt;/td&gt;&lt;td&gt; text/plain&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.c         &lt;/td&gt;&lt;td&gt; text/x-c&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.c++       &lt;/td&gt;&lt;td&gt; text/plain&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.cat       &lt;/td&gt;&lt;td&gt; application/vnd.ms-pki.seccat&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.cc        &lt;/td&gt;&lt;td&gt; text/plain&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.cc        &lt;/td&gt;&lt;td&gt; text/x-c&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ccad      &lt;/td&gt;&lt;td&gt; application/clariscad&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.cco       &lt;/td&gt;&lt;td&gt; application/x-cocoa&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.cdf       &lt;/td&gt;&lt;td&gt; application/cdf&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.cdf       &lt;/td&gt;&lt;td&gt; application/x-cdf&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.cdf       &lt;/td&gt;&lt;td&gt; application/x-netcdf&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.cer       &lt;/td&gt;&lt;td&gt; application/pkix-cert&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.cer       &lt;/td&gt;&lt;td&gt; application/x-x509-ca-cert&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.cha       &lt;/td&gt;&lt;td&gt; application/x-chat&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.chat      &lt;/td&gt;&lt;td&gt; application/x-chat&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.class     &lt;/td&gt;&lt;td&gt; application/java&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.class     &lt;/td&gt;&lt;td&gt; application/java-byte-code&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.class     &lt;/td&gt;&lt;td&gt; application/x-java-class&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.com       &lt;/td&gt;&lt;td&gt; application/octet-stream&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.com       &lt;/td&gt;&lt;td&gt; text/plain&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.conf      &lt;/td&gt;&lt;td&gt; text/plain&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.cpio      &lt;/td&gt;&lt;td&gt; application/x-cpio&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.cpp       &lt;/td&gt;&lt;td&gt; text/x-c&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.cpt       &lt;/td&gt;&lt;td&gt; application/mac-compactpro&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.cpt       &lt;/td&gt;&lt;td&gt; application/x-compactpro&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.cpt       &lt;/td&gt;&lt;td&gt; application/x-cpt&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.crl       &lt;/td&gt;&lt;td&gt; application/pkcs-crl&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.crl       &lt;/td&gt;&lt;td&gt; application/pkix-crl&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.crt       &lt;/td&gt;&lt;td&gt; application/pkix-cert&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.crt       &lt;/td&gt;&lt;td&gt; application/x-x509-ca-cert&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.crt       &lt;/td&gt;&lt;td&gt; application/x-x509-user-cert&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.csh       &lt;/td&gt;&lt;td&gt; application/x-csh&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.csh       &lt;/td&gt;&lt;td&gt; text/x-script.csh&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.css       &lt;/td&gt;&lt;td&gt; application/x-pointplus&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.css       &lt;/td&gt;&lt;td&gt; text/css&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.cxx       &lt;/td&gt;&lt;td&gt; text/plain&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.dcr       &lt;/td&gt;&lt;td&gt; application/x-director&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.deepv     &lt;/td&gt;&lt;td&gt; application/x-deepv&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.def       &lt;/td&gt;&lt;td&gt; text/plain&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.der       &lt;/td&gt;&lt;td&gt; application/x-x509-ca-cert&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.dif       &lt;/td&gt;&lt;td&gt; video/x-dv&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.dir       &lt;/td&gt;&lt;td&gt; application/x-director&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.dl        &lt;/td&gt;&lt;td&gt; video/dl&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.dl        &lt;/td&gt;&lt;td&gt; video/x-dl&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.doc       &lt;/td&gt;&lt;td&gt; application/msword&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.dot       &lt;/td&gt;&lt;td&gt; application/msword&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.dp        &lt;/td&gt;&lt;td&gt; application/commonground&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.drw       &lt;/td&gt;&lt;td&gt; application/drafting&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.dump      &lt;/td&gt;&lt;td&gt; application/octet-stream&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.dv        &lt;/td&gt;&lt;td&gt; video/x-dv&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.dvi       &lt;/td&gt;&lt;td&gt; application/x-dvi&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.dwf       &lt;/td&gt;&lt;td&gt; drawing/x-dwf (old)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.dwf       &lt;/td&gt;&lt;td&gt; model/vnd.dwf&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.dwg       &lt;/td&gt;&lt;td&gt; application/acad&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.dwg       &lt;/td&gt;&lt;td&gt; image/vnd.dwg&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.dwg       &lt;/td&gt;&lt;td&gt; image/x-dwg&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.dxf       &lt;/td&gt;&lt;td&gt; application/dxf&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.dxf       &lt;/td&gt;&lt;td&gt; image/vnd.dwg&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.dxf       &lt;/td&gt;&lt;td&gt; image/x-dwg&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.dxr       &lt;/td&gt;&lt;td&gt; application/x-director&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.el        &lt;/td&gt;&lt;td&gt; text/x-script.elisp&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.elc       &lt;/td&gt;&lt;td&gt; application/x-bytecode.elisp (compiled elisp)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.elc       &lt;/td&gt;&lt;td&gt; application/x-elc&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.env       &lt;/td&gt;&lt;td&gt; application/x-envoy&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.eps       &lt;/td&gt;&lt;td&gt; application/postscript&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.es        &lt;/td&gt;&lt;td&gt; application/x-esrehber&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.etx       &lt;/td&gt;&lt;td&gt; text/x-setext&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.evy       &lt;/td&gt;&lt;td&gt; application/envoy&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.evy       &lt;/td&gt;&lt;td&gt; application/x-envoy&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.exe       &lt;/td&gt;&lt;td&gt; application/octet-stream&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.f         &lt;/td&gt;&lt;td&gt; text/plain&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.f         &lt;/td&gt;&lt;td&gt; text/x-fortran&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.f77       &lt;/td&gt;&lt;td&gt; text/x-fortran&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.f90       &lt;/td&gt;&lt;td&gt; text/plain&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.f90       &lt;/td&gt;&lt;td&gt; text/x-fortran&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.fdf       &lt;/td&gt;&lt;td&gt; application/vnd.fdf&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.fif       &lt;/td&gt;&lt;td&gt; application/fractals&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.fif       &lt;/td&gt;&lt;td&gt; image/fif&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.fli       &lt;/td&gt;&lt;td&gt; video/fli&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.fli       &lt;/td&gt;&lt;td&gt; video/x-fli&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.flo       &lt;/td&gt;&lt;td&gt; image/florian&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.flx       &lt;/td&gt;&lt;td&gt; text/vnd.fmi.flexstor&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.fmf       &lt;/td&gt;&lt;td&gt; video/x-atomic3d-feature&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.for       &lt;/td&gt;&lt;td&gt; text/plain&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.for       &lt;/td&gt;&lt;td&gt; text/x-fortran&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.fpx       &lt;/td&gt;&lt;td&gt; image/vnd.fpx&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.fpx       &lt;/td&gt;&lt;td&gt; image/vnd.net-fpx&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.frl       &lt;/td&gt;&lt;td&gt; application/freeloader&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.funk      &lt;/td&gt;&lt;td&gt; audio/make&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.g         &lt;/td&gt;&lt;td&gt; text/plain&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.g3        &lt;/td&gt;&lt;td&gt; image/g3fax&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.gif       &lt;/td&gt;&lt;td&gt; image/gif&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.gl        &lt;/td&gt;&lt;td&gt; video/gl&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.gl        &lt;/td&gt;&lt;td&gt; video/x-gl&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.gsd       &lt;/td&gt;&lt;td&gt; audio/x-gsm&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.gsm       &lt;/td&gt;&lt;td&gt; audio/x-gsm&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.gsp       &lt;/td&gt;&lt;td&gt; application/x-gsp&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.gss       &lt;/td&gt;&lt;td&gt; application/x-gss&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.gtar      &lt;/td&gt;&lt;td&gt; application/x-gtar&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.gz        &lt;/td&gt;&lt;td&gt; application/x-compressed&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.gz        &lt;/td&gt;&lt;td&gt; application/x-gzip&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.gzip      &lt;/td&gt;&lt;td&gt; application/x-gzip&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.gzip      &lt;/td&gt;&lt;td&gt; multipart/x-gzip&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.h         &lt;/td&gt;&lt;td&gt; text/plain&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.h         &lt;/td&gt;&lt;td&gt; text/x-h&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.hdf       &lt;/td&gt;&lt;td&gt; application/x-hdf&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.help      &lt;/td&gt;&lt;td&gt; application/x-helpfile&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.hgl       &lt;/td&gt;&lt;td&gt; application/vnd.hp-hpgl&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.hh        &lt;/td&gt;&lt;td&gt; text/plain&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.hh        &lt;/td&gt;&lt;td&gt; text/x-h&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.hlb       &lt;/td&gt;&lt;td&gt; text/x-script&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.hlp       &lt;/td&gt;&lt;td&gt; application/hlp&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.hlp       &lt;/td&gt;&lt;td&gt; application/x-helpfile&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.hlp       &lt;/td&gt;&lt;td&gt; application/x-winhelp&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.hpg       &lt;/td&gt;&lt;td&gt; application/vnd.hp-hpgl&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.hpgl      &lt;/td&gt;&lt;td&gt; application/vnd.hp-hpgl&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.hqx       &lt;/td&gt;&lt;td&gt; application/binhex&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.hqx       &lt;/td&gt;&lt;td&gt; application/binhex4&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.hqx       &lt;/td&gt;&lt;td&gt; application/mac-binhex&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.hqx       &lt;/td&gt;&lt;td&gt; application/mac-binhex40&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.hqx       &lt;/td&gt;&lt;td&gt; application/x-binhex40&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.hqx       &lt;/td&gt;&lt;td&gt; application/x-mac-binhex40&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.hta       &lt;/td&gt;&lt;td&gt; application/hta&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.htc       &lt;/td&gt;&lt;td&gt; text/x-component&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.htm       &lt;/td&gt;&lt;td&gt; text/html&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.html      &lt;/td&gt;&lt;td&gt; text/html&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.htmls     &lt;/td&gt;&lt;td&gt; text/html&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.htt       &lt;/td&gt;&lt;td&gt; text/webviewhtml&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.htx       &lt;/td&gt;&lt;td&gt; text/html&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ice       &lt;/td&gt;&lt;td&gt; x-conference/x-cooltalk&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ico       &lt;/td&gt;&lt;td&gt; image/x-icon&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.idc       &lt;/td&gt;&lt;td&gt; text/plain&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ief       &lt;/td&gt;&lt;td&gt; image/ief&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.iefs      &lt;/td&gt;&lt;td&gt; image/ief&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.iges      &lt;/td&gt;&lt;td&gt; application/iges&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.iges      &lt;/td&gt;&lt;td&gt; model/iges&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.igs       &lt;/td&gt;&lt;td&gt; application/iges&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.igs       &lt;/td&gt;&lt;td&gt; model/iges&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ima       &lt;/td&gt;&lt;td&gt; application/x-ima&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.imap      &lt;/td&gt;&lt;td&gt; application/x-httpd-imap&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.inf       &lt;/td&gt;&lt;td&gt; application/inf&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ins       &lt;/td&gt;&lt;td&gt; application/x-internett-signup&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ip        &lt;/td&gt;&lt;td&gt; application/x-ip2&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.isu       &lt;/td&gt;&lt;td&gt; video/x-isvideo&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.it        &lt;/td&gt;&lt;td&gt; audio/it&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.iv        &lt;/td&gt;&lt;td&gt; application/x-inventor&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ivr       &lt;/td&gt;&lt;td&gt; i-world/i-vrml&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ivy       &lt;/td&gt;&lt;td&gt; application/x-livescreen&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.jam       &lt;/td&gt;&lt;td&gt; audio/x-jam&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.jav       &lt;/td&gt;&lt;td&gt; text/plain&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.jav       &lt;/td&gt;&lt;td&gt; text/x-java-source&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.java      &lt;/td&gt;&lt;td&gt; text/plain&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.java      &lt;/td&gt;&lt;td&gt; text/x-java-source&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.jcm       &lt;/td&gt;&lt;td&gt; application/x-java-commerce&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.jfif      &lt;/td&gt;&lt;td&gt; image/jpeg&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.jfif      &lt;/td&gt;&lt;td&gt; image/pjpeg&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.jpe       &lt;/td&gt;&lt;td&gt; image/jpeg&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.jpe       &lt;/td&gt;&lt;td&gt; image/pjpeg&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.jpeg      &lt;/td&gt;&lt;td&gt; image/jpeg&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.jpeg      &lt;/td&gt;&lt;td&gt; image/pjpeg&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.jpg       &lt;/td&gt;&lt;td&gt; image/jpeg&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.jpg       &lt;/td&gt;&lt;td&gt; image/pjpeg&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.jps       &lt;/td&gt;&lt;td&gt; image/x-jps&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.js        &lt;/td&gt;&lt;td&gt; application/x-javascript&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.js        &lt;/td&gt;&lt;td&gt; application/javascript&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.js        &lt;/td&gt;&lt;td&gt; application/ecmascript&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.js        &lt;/td&gt;&lt;td&gt; text/javascript&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.js        &lt;/td&gt;&lt;td&gt; text/ecmascript&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.jut       &lt;/td&gt;&lt;td&gt; image/jutvision&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.kar       &lt;/td&gt;&lt;td&gt; audio/midi&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.kar       &lt;/td&gt;&lt;td&gt; music/x-karaoke&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ksh       &lt;/td&gt;&lt;td&gt; application/x-ksh&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ksh       &lt;/td&gt;&lt;td&gt; text/x-script.ksh&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.la        &lt;/td&gt;&lt;td&gt; audio/nspaudio&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.la        &lt;/td&gt;&lt;td&gt; audio/x-nspaudio&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.lam       &lt;/td&gt;&lt;td&gt; audio/x-liveaudio&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.latex     &lt;/td&gt;&lt;td&gt; application/x-latex&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.lha       &lt;/td&gt;&lt;td&gt; application/lha&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.lha       &lt;/td&gt;&lt;td&gt; application/octet-stream&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.lha       &lt;/td&gt;&lt;td&gt; application/x-lha&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.lhx       &lt;/td&gt;&lt;td&gt; application/octet-stream&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.list      &lt;/td&gt;&lt;td&gt; text/plain&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.lma       &lt;/td&gt;&lt;td&gt; audio/nspaudio&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.lma       &lt;/td&gt;&lt;td&gt; audio/x-nspaudio&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.log       &lt;/td&gt;&lt;td&gt; text/plain&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.lsp       &lt;/td&gt;&lt;td&gt; application/x-lisp&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.lsp       &lt;/td&gt;&lt;td&gt; text/x-script.lisp&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.lst       &lt;/td&gt;&lt;td&gt; text/plain&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.lsx       &lt;/td&gt;&lt;td&gt; text/x-la-asf&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ltx       &lt;/td&gt;&lt;td&gt; application/x-latex&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.lzh       &lt;/td&gt;&lt;td&gt; application/octet-stream&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.lzh       &lt;/td&gt;&lt;td&gt; application/x-lzh&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.lzx       &lt;/td&gt;&lt;td&gt; application/lzx&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.lzx       &lt;/td&gt;&lt;td&gt; application/octet-stream&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.lzx       &lt;/td&gt;&lt;td&gt; application/x-lzx&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.m         &lt;/td&gt;&lt;td&gt; text/plain&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.m         &lt;/td&gt;&lt;td&gt; text/x-m&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.m1v       &lt;/td&gt;&lt;td&gt; video/mpeg&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.m2a       &lt;/td&gt;&lt;td&gt; audio/mpeg&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.m2v       &lt;/td&gt;&lt;td&gt; video/mpeg&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.m3u       &lt;/td&gt;&lt;td&gt; audio/x-mpequrl&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.man       &lt;/td&gt;&lt;td&gt; application/x-troff-man&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.map       &lt;/td&gt;&lt;td&gt; application/x-navimap&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mar       &lt;/td&gt;&lt;td&gt; text/plain&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mbd       &lt;/td&gt;&lt;td&gt; application/mbedlet&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mc$       &lt;/td&gt;&lt;td&gt; application/x-magic-cap-package-1.0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mcd       &lt;/td&gt;&lt;td&gt; application/mcad&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mcd       &lt;/td&gt;&lt;td&gt; application/x-mathcad&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mcf       &lt;/td&gt;&lt;td&gt; image/vasa&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mcf       &lt;/td&gt;&lt;td&gt; text/mcf&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mcp       &lt;/td&gt;&lt;td&gt; application/netmc&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.me        &lt;/td&gt;&lt;td&gt; application/x-troff-me&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mht       &lt;/td&gt;&lt;td&gt; message/rfc822&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mhtml     &lt;/td&gt;&lt;td&gt; message/rfc822&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mid       &lt;/td&gt;&lt;td&gt; application/x-midi&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mid       &lt;/td&gt;&lt;td&gt; audio/midi&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mid       &lt;/td&gt;&lt;td&gt; audio/x-mid&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mid       &lt;/td&gt;&lt;td&gt; audio/x-midi&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mid       &lt;/td&gt;&lt;td&gt; music/crescendo&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mid       &lt;/td&gt;&lt;td&gt; x-music/x-midi&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.midi      &lt;/td&gt;&lt;td&gt; application/x-midi&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.midi      &lt;/td&gt;&lt;td&gt; audio/midi&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.midi      &lt;/td&gt;&lt;td&gt; audio/x-mid&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.midi      &lt;/td&gt;&lt;td&gt; audio/x-midi&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.midi      &lt;/td&gt;&lt;td&gt; music/crescendo&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.midi      &lt;/td&gt;&lt;td&gt; x-music/x-midi&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mif       &lt;/td&gt;&lt;td&gt; application/x-frame&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mif       &lt;/td&gt;&lt;td&gt; application/x-mif&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mime      &lt;/td&gt;&lt;td&gt; message/rfc822&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mime      &lt;/td&gt;&lt;td&gt; www/mime&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mjf       &lt;/td&gt;&lt;td&gt; audio/x-vnd.audioexplosion.mjuicemediafile&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mjpg      &lt;/td&gt;&lt;td&gt; video/x-motion-jpeg&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mm        &lt;/td&gt;&lt;td&gt; application/base64&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mm        &lt;/td&gt;&lt;td&gt; application/x-meme&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mme       &lt;/td&gt;&lt;td&gt; application/base64&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mod       &lt;/td&gt;&lt;td&gt; audio/mod&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mod       &lt;/td&gt;&lt;td&gt; audio/x-mod&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.moov      &lt;/td&gt;&lt;td&gt; video/quicktime&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mov       &lt;/td&gt;&lt;td&gt; video/quicktime&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.movie     &lt;/td&gt;&lt;td&gt; video/x-sgi-movie&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mp2       &lt;/td&gt;&lt;td&gt; audio/mpeg&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mp2       &lt;/td&gt;&lt;td&gt; audio/x-mpeg&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mp2       &lt;/td&gt;&lt;td&gt; video/mpeg&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mp2       &lt;/td&gt;&lt;td&gt; video/x-mpeg&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mp2       &lt;/td&gt;&lt;td&gt; video/x-mpeq2a&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mp3       &lt;/td&gt;&lt;td&gt; audio/mpeg3&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mp3       &lt;/td&gt;&lt;td&gt; audio/x-mpeg-3&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mp3       &lt;/td&gt;&lt;td&gt; video/mpeg&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mp3       &lt;/td&gt;&lt;td&gt; video/x-mpeg&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mpa       &lt;/td&gt;&lt;td&gt; audio/mpeg&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mpa       &lt;/td&gt;&lt;td&gt; video/mpeg&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mpc       &lt;/td&gt;&lt;td&gt; application/x-project&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mpe       &lt;/td&gt;&lt;td&gt; video/mpeg&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mpeg      &lt;/td&gt;&lt;td&gt; video/mpeg&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mpg       &lt;/td&gt;&lt;td&gt; audio/mpeg&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mpg       &lt;/td&gt;&lt;td&gt; video/mpeg&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mpga      &lt;/td&gt;&lt;td&gt; audio/mpeg&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mpp       &lt;/td&gt;&lt;td&gt; application/vnd.ms-project&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mpt       &lt;/td&gt;&lt;td&gt; application/x-project&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mpv       &lt;/td&gt;&lt;td&gt; application/x-project&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mpx       &lt;/td&gt;&lt;td&gt; application/x-project&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mrc       &lt;/td&gt;&lt;td&gt; application/marc&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ms        &lt;/td&gt;&lt;td&gt; application/x-troff-ms&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mv        &lt;/td&gt;&lt;td&gt; video/x-sgi-movie&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.my        &lt;/td&gt;&lt;td&gt; audio/make&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.mzz       &lt;/td&gt;&lt;td&gt; application/x-vnd.audioexplosion.mzz&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.nap       &lt;/td&gt;&lt;td&gt; image/naplps&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.naplps    &lt;/td&gt;&lt;td&gt; image/naplps&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.nc        &lt;/td&gt;&lt;td&gt; application/x-netcdf&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ncm       &lt;/td&gt;&lt;td&gt; application/vnd.nokia.configuration-message&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.nif       &lt;/td&gt;&lt;td&gt; image/x-niff&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.niff      &lt;/td&gt;&lt;td&gt; image/x-niff&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.nix       &lt;/td&gt;&lt;td&gt; application/x-mix-transfer&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.nsc       &lt;/td&gt;&lt;td&gt; application/x-conference&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.nvd       &lt;/td&gt;&lt;td&gt; application/x-navidoc&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.o         &lt;/td&gt;&lt;td&gt; application/octet-stream&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.oda       &lt;/td&gt;&lt;td&gt; application/oda&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.omc       &lt;/td&gt;&lt;td&gt; application/x-omc&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.omcd      &lt;/td&gt;&lt;td&gt; application/x-omcdatamaker&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.omcr      &lt;/td&gt;&lt;td&gt; application/x-omcregerator&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.p         &lt;/td&gt;&lt;td&gt; text/x-pascal&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.p10       &lt;/td&gt;&lt;td&gt; application/pkcs10&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.p10       &lt;/td&gt;&lt;td&gt; application/x-pkcs10&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.p12       &lt;/td&gt;&lt;td&gt; application/pkcs-12&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.p12       &lt;/td&gt;&lt;td&gt; application/x-pkcs12&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.p7a       &lt;/td&gt;&lt;td&gt; application/x-pkcs7-signature&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.p7c       &lt;/td&gt;&lt;td&gt; application/pkcs7-mime&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.p7c       &lt;/td&gt;&lt;td&gt; application/x-pkcs7-mime&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.p7m       &lt;/td&gt;&lt;td&gt; application/pkcs7-mime&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.p7m       &lt;/td&gt;&lt;td&gt; application/x-pkcs7-mime&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.p7r       &lt;/td&gt;&lt;td&gt; application/x-pkcs7-certreqresp&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.p7s       &lt;/td&gt;&lt;td&gt; application/pkcs7-signature&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.part      &lt;/td&gt;&lt;td&gt; application/pro_eng&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.pas       &lt;/td&gt;&lt;td&gt; text/pascal&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.pbm       &lt;/td&gt;&lt;td&gt; image/x-portable-bitmap&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.pcl       &lt;/td&gt;&lt;td&gt; application/vnd.hp-pcl&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.pcl       &lt;/td&gt;&lt;td&gt; application/x-pcl&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.pct       &lt;/td&gt;&lt;td&gt; image/x-pict&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.pcx       &lt;/td&gt;&lt;td&gt; image/x-pcx&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.pdb       &lt;/td&gt;&lt;td&gt; chemical/x-pdb&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.pdf       &lt;/td&gt;&lt;td&gt; application/pdf&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.pfunk     &lt;/td&gt;&lt;td&gt; audio/make&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.pfunk     &lt;/td&gt;&lt;td&gt; audio/make.my.funk&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.pgm       &lt;/td&gt;&lt;td&gt; image/x-portable-graymap&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.pgm       &lt;/td&gt;&lt;td&gt; image/x-portable-greymap&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.pic       &lt;/td&gt;&lt;td&gt; image/pict&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.pict      &lt;/td&gt;&lt;td&gt; image/pict&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.pkg       &lt;/td&gt;&lt;td&gt; application/x-newton-compatible-pkg&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.pko       &lt;/td&gt;&lt;td&gt; application/vnd.ms-pki.pko&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.pl        &lt;/td&gt;&lt;td&gt; text/plain&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.pl        &lt;/td&gt;&lt;td&gt; text/x-script.perl&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.plx       &lt;/td&gt;&lt;td&gt; application/x-pixclscript&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.pm        &lt;/td&gt;&lt;td&gt; image/x-xpixmap&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.pm        &lt;/td&gt;&lt;td&gt; text/x-script.perl-module&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.pm4       &lt;/td&gt;&lt;td&gt; application/x-pagemaker&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.pm5       &lt;/td&gt;&lt;td&gt; application/x-pagemaker&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.png       &lt;/td&gt;&lt;td&gt; image/png&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.pnm       &lt;/td&gt;&lt;td&gt; application/x-portable-anymap&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.pnm       &lt;/td&gt;&lt;td&gt; image/x-portable-anymap&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.pot       &lt;/td&gt;&lt;td&gt; application/mspowerpoint&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.pot       &lt;/td&gt;&lt;td&gt; application/vnd.ms-powerpoint&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.pov       &lt;/td&gt;&lt;td&gt; model/x-pov&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ppa       &lt;/td&gt;&lt;td&gt; application/vnd.ms-powerpoint&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ppm       &lt;/td&gt;&lt;td&gt; image/x-portable-pixmap&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.pps       &lt;/td&gt;&lt;td&gt; application/mspowerpoint&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.pps       &lt;/td&gt;&lt;td&gt; application/vnd.ms-powerpoint&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ppt       &lt;/td&gt;&lt;td&gt; application/mspowerpoint&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ppt       &lt;/td&gt;&lt;td&gt; application/powerpoint&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ppt       &lt;/td&gt;&lt;td&gt; application/vnd.ms-powerpoint&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ppt       &lt;/td&gt;&lt;td&gt; application/x-mspowerpoint&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ppz       &lt;/td&gt;&lt;td&gt; application/mspowerpoint&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.pre       &lt;/td&gt;&lt;td&gt; application/x-freelance&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.prt       &lt;/td&gt;&lt;td&gt; application/pro_eng&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ps        &lt;/td&gt;&lt;td&gt; application/postscript&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.psd       &lt;/td&gt;&lt;td&gt; application/octet-stream&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.pvu       &lt;/td&gt;&lt;td&gt; paleovu/x-pv&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.pwz       &lt;/td&gt;&lt;td&gt; application/vnd.ms-powerpoint&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.py        &lt;/td&gt;&lt;td&gt; text/x-script.phyton&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.pyc       &lt;/td&gt;&lt;td&gt; application/x-bytecode.python&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.qcp       &lt;/td&gt;&lt;td&gt; audio/vnd.qcelp&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.qd3       &lt;/td&gt;&lt;td&gt; x-world/x-3dmf&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.qd3d      &lt;/td&gt;&lt;td&gt; x-world/x-3dmf&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.qif       &lt;/td&gt;&lt;td&gt; image/x-quicktime&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.qt        &lt;/td&gt;&lt;td&gt; video/quicktime&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.qtc       &lt;/td&gt;&lt;td&gt; video/x-qtc&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.qti       &lt;/td&gt;&lt;td&gt; image/x-quicktime&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.qtif      &lt;/td&gt;&lt;td&gt; image/x-quicktime&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ra        &lt;/td&gt;&lt;td&gt; audio/x-pn-realaudio&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ra        &lt;/td&gt;&lt;td&gt; audio/x-pn-realaudio-plugin&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ra        &lt;/td&gt;&lt;td&gt; audio/x-realaudio&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ram       &lt;/td&gt;&lt;td&gt; audio/x-pn-realaudio&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ras       &lt;/td&gt;&lt;td&gt; application/x-cmu-raster&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ras       &lt;/td&gt;&lt;td&gt; image/cmu-raster&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ras       &lt;/td&gt;&lt;td&gt; image/x-cmu-raster&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.rast      &lt;/td&gt;&lt;td&gt; image/cmu-raster&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.rexx      &lt;/td&gt;&lt;td&gt; text/x-script.rexx&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.rf        &lt;/td&gt;&lt;td&gt; image/vnd.rn-realflash&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.rgb       &lt;/td&gt;&lt;td&gt; image/x-rgb&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.rm        &lt;/td&gt;&lt;td&gt; application/vnd.rn-realmedia&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.rm        &lt;/td&gt;&lt;td&gt; audio/x-pn-realaudio&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.rmi       &lt;/td&gt;&lt;td&gt; audio/mid&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.rmm       &lt;/td&gt;&lt;td&gt; audio/x-pn-realaudio&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.rmp       &lt;/td&gt;&lt;td&gt; audio/x-pn-realaudio&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.rmp       &lt;/td&gt;&lt;td&gt; audio/x-pn-realaudio-plugin&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.rng       &lt;/td&gt;&lt;td&gt; application/ringing-tones&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.rng       &lt;/td&gt;&lt;td&gt; application/vnd.nokia.ringing-tone&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.rnx       &lt;/td&gt;&lt;td&gt; application/vnd.rn-realplayer&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.roff      &lt;/td&gt;&lt;td&gt; application/x-troff&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.rp        &lt;/td&gt;&lt;td&gt; image/vnd.rn-realpix&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.rpm       &lt;/td&gt;&lt;td&gt; audio/x-pn-realaudio-plugin&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.rt        &lt;/td&gt;&lt;td&gt; text/richtext&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.rt        &lt;/td&gt;&lt;td&gt; text/vnd.rn-realtext&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.rtf       &lt;/td&gt;&lt;td&gt; application/rtf&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.rtf       &lt;/td&gt;&lt;td&gt; application/x-rtf&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.rtf       &lt;/td&gt;&lt;td&gt; text/richtext&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.rtx       &lt;/td&gt;&lt;td&gt; application/rtf&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.rtx       &lt;/td&gt;&lt;td&gt; text/richtext&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.rv        &lt;/td&gt;&lt;td&gt; video/vnd.rn-realvideo&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.s         &lt;/td&gt;&lt;td&gt; text/x-asm&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.s3m       &lt;/td&gt;&lt;td&gt; audio/s3m&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.saveme    &lt;/td&gt;&lt;td&gt; application/octet-stream&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.sbk       &lt;/td&gt;&lt;td&gt; application/x-tbook&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.scm       &lt;/td&gt;&lt;td&gt; application/x-lotusscreencam&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.scm       &lt;/td&gt;&lt;td&gt; text/x-script.guile&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.scm       &lt;/td&gt;&lt;td&gt; text/x-script.scheme&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.scm       &lt;/td&gt;&lt;td&gt; video/x-scm&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.sdml      &lt;/td&gt;&lt;td&gt; text/plain&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.sdp       &lt;/td&gt;&lt;td&gt; application/sdp&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.sdp       &lt;/td&gt;&lt;td&gt; application/x-sdp&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.sdr       &lt;/td&gt;&lt;td&gt; application/sounder&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.sea       &lt;/td&gt;&lt;td&gt; application/sea&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.sea       &lt;/td&gt;&lt;td&gt; application/x-sea&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.set       &lt;/td&gt;&lt;td&gt; application/set&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.sgm       &lt;/td&gt;&lt;td&gt; text/sgml&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.sgm       &lt;/td&gt;&lt;td&gt; text/x-sgml&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.sgml      &lt;/td&gt;&lt;td&gt; text/sgml&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.sgml      &lt;/td&gt;&lt;td&gt; text/x-sgml&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.sh        &lt;/td&gt;&lt;td&gt; application/x-bsh&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.sh        &lt;/td&gt;&lt;td&gt; application/x-sh&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.sh        &lt;/td&gt;&lt;td&gt; application/x-shar&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.sh        &lt;/td&gt;&lt;td&gt; text/x-script.sh&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.shar      &lt;/td&gt;&lt;td&gt; application/x-bsh&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.shar      &lt;/td&gt;&lt;td&gt; application/x-shar&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.shtml     &lt;/td&gt;&lt;td&gt; text/html&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.shtml     &lt;/td&gt;&lt;td&gt; text/x-server-parsed-html&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.sid       &lt;/td&gt;&lt;td&gt; audio/x-psid&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.sit       &lt;/td&gt;&lt;td&gt; application/x-sit&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.sit       &lt;/td&gt;&lt;td&gt; application/x-stuffit&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.skd       &lt;/td&gt;&lt;td&gt; application/x-koan&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.skm       &lt;/td&gt;&lt;td&gt; application/x-koan&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.skp       &lt;/td&gt;&lt;td&gt; application/x-koan&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.skt       &lt;/td&gt;&lt;td&gt; application/x-koan&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.sl        &lt;/td&gt;&lt;td&gt; application/x-seelogo&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.smi       &lt;/td&gt;&lt;td&gt; application/smil&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.smil      &lt;/td&gt;&lt;td&gt; application/smil&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.snd       &lt;/td&gt;&lt;td&gt; audio/basic&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.snd       &lt;/td&gt;&lt;td&gt; audio/x-adpcm&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.sol       &lt;/td&gt;&lt;td&gt; application/solids&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.spc       &lt;/td&gt;&lt;td&gt; application/x-pkcs7-certificates&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.spc       &lt;/td&gt;&lt;td&gt; text/x-speech&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.spl       &lt;/td&gt;&lt;td&gt; application/futuresplash&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.spr       &lt;/td&gt;&lt;td&gt; application/x-sprite&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.sprite    &lt;/td&gt;&lt;td&gt; application/x-sprite&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.src       &lt;/td&gt;&lt;td&gt; application/x-wais-source&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ssi       &lt;/td&gt;&lt;td&gt; text/x-server-parsed-html&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ssm       &lt;/td&gt;&lt;td&gt; application/streamingmedia&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.sst       &lt;/td&gt;&lt;td&gt; application/vnd.ms-pki.certstore&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.step      &lt;/td&gt;&lt;td&gt; application/step&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.stl       &lt;/td&gt;&lt;td&gt; application/sla&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.stl       &lt;/td&gt;&lt;td&gt; application/vnd.ms-pki.stl&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.stl       &lt;/td&gt;&lt;td&gt; application/x-navistyle&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.stp       &lt;/td&gt;&lt;td&gt; application/step&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.sv4cpio   &lt;/td&gt;&lt;td&gt; application/x-sv4cpio&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.sv4crc    &lt;/td&gt;&lt;td&gt; application/x-sv4crc&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.svf       &lt;/td&gt;&lt;td&gt; image/vnd.dwg&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.svf       &lt;/td&gt;&lt;td&gt; image/x-dwg&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.svr       &lt;/td&gt;&lt;td&gt; application/x-world&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.svr       &lt;/td&gt;&lt;td&gt; x-world/x-svr&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.swf       &lt;/td&gt;&lt;td&gt; application/x-shockwave-flash&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.t         &lt;/td&gt;&lt;td&gt; application/x-troff&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.talk      &lt;/td&gt;&lt;td&gt; text/x-speech&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.tar       &lt;/td&gt;&lt;td&gt; application/x-tar&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.tbk       &lt;/td&gt;&lt;td&gt; application/toolbook&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.tbk       &lt;/td&gt;&lt;td&gt; application/x-tbook&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.tcl       &lt;/td&gt;&lt;td&gt; application/x-tcl&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.tcl       &lt;/td&gt;&lt;td&gt; text/x-script.tcl&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.tcsh      &lt;/td&gt;&lt;td&gt; text/x-script.tcsh&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.tex       &lt;/td&gt;&lt;td&gt; application/x-tex&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.texi      &lt;/td&gt;&lt;td&gt; application/x-texinfo&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.texinfo   &lt;/td&gt;&lt;td&gt; application/x-texinfo&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.text      &lt;/td&gt;&lt;td&gt; application/plain&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.text      &lt;/td&gt;&lt;td&gt; text/plain&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.tgz       &lt;/td&gt;&lt;td&gt; application/gnutar&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.tgz       &lt;/td&gt;&lt;td&gt; application/x-compressed&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.tif       &lt;/td&gt;&lt;td&gt; image/tiff&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.tif       &lt;/td&gt;&lt;td&gt; image/x-tiff&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.tiff      &lt;/td&gt;&lt;td&gt; image/tiff&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.tiff      &lt;/td&gt;&lt;td&gt; image/x-tiff&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.tr        &lt;/td&gt;&lt;td&gt; application/x-troff&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.tsi       &lt;/td&gt;&lt;td&gt; audio/tsp-audio&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.tsp       &lt;/td&gt;&lt;td&gt; application/dsptype&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.tsp       &lt;/td&gt;&lt;td&gt; audio/tsplayer&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.tsv       &lt;/td&gt;&lt;td&gt; text/tab-separated-values&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.turbot    &lt;/td&gt;&lt;td&gt; image/florian&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.txt       &lt;/td&gt;&lt;td&gt; text/plain&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.uil       &lt;/td&gt;&lt;td&gt; text/x-uil&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.uni       &lt;/td&gt;&lt;td&gt; text/uri-list&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.unis      &lt;/td&gt;&lt;td&gt; text/uri-list&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.unv       &lt;/td&gt;&lt;td&gt; application/i-deas&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.uri       &lt;/td&gt;&lt;td&gt; text/uri-list&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.uris      &lt;/td&gt;&lt;td&gt; text/uri-list&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ustar     &lt;/td&gt;&lt;td&gt; application/x-ustar&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.ustar     &lt;/td&gt;&lt;td&gt; multipart/x-ustar&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.uu        &lt;/td&gt;&lt;td&gt; application/octet-stream&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.uu        &lt;/td&gt;&lt;td&gt; text/x-uuencode&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.uue       &lt;/td&gt;&lt;td&gt; text/x-uuencode&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.vcd       &lt;/td&gt;&lt;td&gt; application/x-cdlink&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.vcs       &lt;/td&gt;&lt;td&gt; text/x-vcalendar&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.vda       &lt;/td&gt;&lt;td&gt; application/vda&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.vdo       &lt;/td&gt;&lt;td&gt; video/vdo&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.vew       &lt;/td&gt;&lt;td&gt; application/groupwise&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.viv       &lt;/td&gt;&lt;td&gt; video/vivo&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.viv       &lt;/td&gt;&lt;td&gt; video/vnd.vivo&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.vivo      &lt;/td&gt;&lt;td&gt; video/vivo&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.vivo      &lt;/td&gt;&lt;td&gt; video/vnd.vivo&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.vmd       &lt;/td&gt;&lt;td&gt; application/vocaltec-media-desc&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.vmf       &lt;/td&gt;&lt;td&gt; application/vocaltec-media-file&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.voc       &lt;/td&gt;&lt;td&gt; audio/voc&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.voc       &lt;/td&gt;&lt;td&gt; audio/x-voc&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.vos       &lt;/td&gt;&lt;td&gt; video/vosaic&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.vox       &lt;/td&gt;&lt;td&gt; audio/voxware&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.vqe       &lt;/td&gt;&lt;td&gt; audio/x-twinvq-plugin&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.vqf       &lt;/td&gt;&lt;td&gt; audio/x-twinvq&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.vql       &lt;/td&gt;&lt;td&gt; audio/x-twinvq-plugin&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.vrml      &lt;/td&gt;&lt;td&gt; application/x-vrml&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.vrml      &lt;/td&gt;&lt;td&gt; model/vrml&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.vrml      &lt;/td&gt;&lt;td&gt; x-world/x-vrml&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.vrt       &lt;/td&gt;&lt;td&gt; x-world/x-vrt&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.vsd       &lt;/td&gt;&lt;td&gt; application/x-visio&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.vst       &lt;/td&gt;&lt;td&gt; application/x-visio&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.vsw       &lt;/td&gt;&lt;td&gt; application/x-visio&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.w60       &lt;/td&gt;&lt;td&gt; application/wordperfect6.0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.w61       &lt;/td&gt;&lt;td&gt; application/wordperfect6.1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.w6w       &lt;/td&gt;&lt;td&gt; application/msword&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.wav       &lt;/td&gt;&lt;td&gt; audio/wav&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.wav       &lt;/td&gt;&lt;td&gt; audio/x-wav&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.wb1       &lt;/td&gt;&lt;td&gt; application/x-qpro&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.wbmp      &lt;/td&gt;&lt;td&gt; image/vnd.wap.wbmp&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.web       &lt;/td&gt;&lt;td&gt; application/vnd.xara&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.wiz       &lt;/td&gt;&lt;td&gt; application/msword&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.wk1       &lt;/td&gt;&lt;td&gt; application/x-123&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.wmf       &lt;/td&gt;&lt;td&gt; windows/metafile&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.wml       &lt;/td&gt;&lt;td&gt; text/vnd.wap.wml&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.wmlc      &lt;/td&gt;&lt;td&gt; application/vnd.wap.wmlc&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.wmls      &lt;/td&gt;&lt;td&gt; text/vnd.wap.wmlscript&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.wmlsc     &lt;/td&gt;&lt;td&gt; application/vnd.wap.wmlscriptc&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.word      &lt;/td&gt;&lt;td&gt; application/msword&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.wp        &lt;/td&gt;&lt;td&gt; application/wordperfect&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.wp5       &lt;/td&gt;&lt;td&gt; application/wordperfect&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.wp5       &lt;/td&gt;&lt;td&gt; application/wordperfect6.0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.wp6       &lt;/td&gt;&lt;td&gt; application/wordperfect&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.wpd       &lt;/td&gt;&lt;td&gt; application/wordperfect&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.wpd       &lt;/td&gt;&lt;td&gt; application/x-wpwin&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.wq1       &lt;/td&gt;&lt;td&gt; application/x-lotus&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.wri       &lt;/td&gt;&lt;td&gt; application/mswrite&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.wri       &lt;/td&gt;&lt;td&gt; application/x-wri&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.wrl       &lt;/td&gt;&lt;td&gt; application/x-world&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.wrl       &lt;/td&gt;&lt;td&gt; model/vrml&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.wrl       &lt;/td&gt;&lt;td&gt; x-world/x-vrml&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.wrz       &lt;/td&gt;&lt;td&gt; model/vrml&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.wrz       &lt;/td&gt;&lt;td&gt; x-world/x-vrml&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.wsc       &lt;/td&gt;&lt;td&gt; text/scriplet&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.wsrc      &lt;/td&gt;&lt;td&gt; application/x-wais-source&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.wtk       &lt;/td&gt;&lt;td&gt; application/x-wintalk&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xbm       &lt;/td&gt;&lt;td&gt; image/x-xbitmap&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xbm       &lt;/td&gt;&lt;td&gt; image/x-xbm&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xbm       &lt;/td&gt;&lt;td&gt; image/xbm&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xdr       &lt;/td&gt;&lt;td&gt; video/x-amt-demorun&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xgz       &lt;/td&gt;&lt;td&gt; xgl/drawing&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xif       &lt;/td&gt;&lt;td&gt; image/vnd.xiff&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xl        &lt;/td&gt;&lt;td&gt; application/excel&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xla       &lt;/td&gt;&lt;td&gt; application/excel&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xla       &lt;/td&gt;&lt;td&gt; application/x-excel&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xla       &lt;/td&gt;&lt;td&gt; application/x-msexcel&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xlb       &lt;/td&gt;&lt;td&gt; application/excel&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xlb       &lt;/td&gt;&lt;td&gt; application/vnd.ms-excel&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xlb       &lt;/td&gt;&lt;td&gt; application/x-excel&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xlc       &lt;/td&gt;&lt;td&gt; application/excel&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xlc       &lt;/td&gt;&lt;td&gt; application/vnd.ms-excel&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xlc       &lt;/td&gt;&lt;td&gt; application/x-excel&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xld       &lt;/td&gt;&lt;td&gt; application/excel&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xld       &lt;/td&gt;&lt;td&gt; application/x-excel&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xlk       &lt;/td&gt;&lt;td&gt; application/excel&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xlk       &lt;/td&gt;&lt;td&gt; application/x-excel&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xll       &lt;/td&gt;&lt;td&gt; application/excel&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xll       &lt;/td&gt;&lt;td&gt; application/vnd.ms-excel&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xll       &lt;/td&gt;&lt;td&gt; application/x-excel&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xlm       &lt;/td&gt;&lt;td&gt; application/excel&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xlm       &lt;/td&gt;&lt;td&gt; application/vnd.ms-excel&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xlm       &lt;/td&gt;&lt;td&gt; application/x-excel&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xls       &lt;/td&gt;&lt;td&gt; application/excel&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xls       &lt;/td&gt;&lt;td&gt; application/vnd.ms-excel&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xls       &lt;/td&gt;&lt;td&gt; application/x-excel&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xls       &lt;/td&gt;&lt;td&gt; application/x-msexcel&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xlt       &lt;/td&gt;&lt;td&gt; application/excel&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xlt       &lt;/td&gt;&lt;td&gt; application/x-excel&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xlv       &lt;/td&gt;&lt;td&gt; application/excel&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xlv       &lt;/td&gt;&lt;td&gt; application/x-excel&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xlw       &lt;/td&gt;&lt;td&gt; application/excel&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xlw       &lt;/td&gt;&lt;td&gt; application/vnd.ms-excel&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xlw       &lt;/td&gt;&lt;td&gt; application/x-excel&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xlw       &lt;/td&gt;&lt;td&gt; application/x-msexcel&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xm        &lt;/td&gt;&lt;td&gt; audio/xm&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xml       &lt;/td&gt;&lt;td&gt; application/xml&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xml       &lt;/td&gt;&lt;td&gt; text/xml&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xmz       &lt;/td&gt;&lt;td&gt; xgl/movie&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xpix      &lt;/td&gt;&lt;td&gt; application/x-vnd.ls-xpix&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xpm       &lt;/td&gt;&lt;td&gt; image/x-xpixmap&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xpm       &lt;/td&gt;&lt;td&gt; image/xpm&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.x-png     &lt;/td&gt;&lt;td&gt; image/png&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xsr       &lt;/td&gt;&lt;td&gt; video/x-amt-showrun&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xwd       &lt;/td&gt;&lt;td&gt; image/x-xwd&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xwd       &lt;/td&gt;&lt;td&gt; image/x-xwindowdump&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.xyz       &lt;/td&gt;&lt;td&gt; chemical/x-pdb&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.z         &lt;/td&gt;&lt;td&gt; application/x-compress&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.z         &lt;/td&gt;&lt;td&gt; application/x-compressed&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.zip       &lt;/td&gt;&lt;td&gt; application/x-compressed&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.zip       &lt;/td&gt;&lt;td&gt; application/x-zip-compressed&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.zip       &lt;/td&gt;&lt;td&gt; application/zip&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.zip       &lt;/td&gt;&lt;td&gt; multipart/x-zip&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.zoo       &lt;/td&gt;&lt;td&gt; application/octet-stream&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;.zsh       &lt;/td&gt;&lt;td&gt; text/x-script.zsh&lt;/td&gt;
    &lt;/tr&gt;
&lt;/table&gt;
    </content>
  </entry>
  <entry>
    <title>http header for dummies</title>
    <link type="text/html" rel="alternate" href="/content/http/http_header_for_dummies.html"/>
    <id>/content/http/http_header_for_dummies.html</id>
    <published>2014-07-16 23:31</published>
    <updated>2014-07-16 23:31</updated>
    <content type="html">
      &lt;p&gt;由于最近工作有个功能是要到处excel给用户下载, 所以要用到&lt;code&gt;Content-Disposition&lt;/code&gt;, 所以想顺便把http header里面常用的几个总结一下.&lt;/p&gt;
&lt;p&gt;HTTP的headers是HTTP requests和responses的核心部分, 它携带了包括客户端浏览器的信息和请求的页面内容以及server部分信息的内容.能够通过HTTP的HEAD方法直接拿到.&lt;/p&gt;
&lt;p&gt;对于HTTP Request而言, 它的结构第一行称为request line, 它包括HTTP方法, 请求路径以及协议三个部分.&lt;/p&gt;
&lt;p&gt;对于HTTP Response而言, 它的结构第一行称为status line, 它包括协议和返回码两部分.&lt;/p&gt;
&lt;p&gt;状态码大致可分为:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;200&#39;s are used for successful requests.&lt;/li&gt;
&lt;li&gt;300&#39;s are for redirections.&lt;/li&gt;
&lt;li&gt;400&#39;s are used if there was a problem with the request.&lt;/li&gt;
&lt;li&gt;500&#39;s are used if there was a problem with the server.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;具体的内容可以点击&lt;a href=&#34;http://en.wikipedia.org/wiki/List_of_HTTP_status_codes&#34;&gt;这里&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;其他的部分以键值对的形式存在每一行中.&lt;/p&gt;
&lt;h2 id=&#34;http-request&#34;&gt;HTTP Request&lt;/h2&gt;
&lt;h3 id=&#34;host&#34;&gt;Host&lt;/h3&gt;
&lt;p&gt;HTTP请求必须发送给一个确定的IP地址, 但是由于大多数的服务器是可以host多个服务用同一个IP的, 所以HTTP请求必须清楚指明具体的域名.&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;n&#34;&gt;Host&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;wlwang41&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;github&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;io&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id=&#34;user-agent&#34;&gt;User-Agent&lt;/h3&gt;
&lt;p&gt;这个头可以包括以下信息:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;浏览器的名称以及版本&lt;/li&gt;
&lt;li&gt;操作系统的名称以及版本&lt;/li&gt;
&lt;li&gt;默认的语言环境&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这个可以用来判断用户使用的环境是手机还是PC, 然后呈现不同的页面.&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nt&#34;&gt;User-Agent&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Mozilla&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;Windows&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;U&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Windows&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;NT&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;en-US&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;rv&lt;/span&gt;&lt;span class=&#34;nd&#34;&gt;:1&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.9.1.5&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Gecko&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;20091102&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Firefox&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.5.5&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.NET&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;CLR&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.5.30729&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id=&#34;accept-language&#34;&gt;Accept-Language&lt;/h3&gt;
&lt;p&gt;这个头信息表明了用户的语言环境.&lt;/p&gt;
&lt;p&gt;可以是多个语言环境, 用逗号隔开. 第一个语言为主要的偏好语言, &lt;code&gt;q&lt;/code&gt;则表明了用户使用该语言的偏好(0, 1之间)&lt;/p&gt;
&lt;h3 id=&#34;accept-encoding&#34;&gt;Accept-Encoding&lt;/h3&gt;
&lt;p&gt;这个头信息表示浏览器能接受的压缩格式.&lt;/p&gt;
&lt;p&gt;大多数的现代浏览器都支持gzip压缩, 所以一般这个字段都会有gzip. 这样webserver就能返回一个压缩后的数据, 节省带宽和请求时间.&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;Accept-Encoding: gzip,deflate
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id=&#34;if-modified-since&#34;&gt;If-Modified-Since&lt;/h3&gt;
&lt;p&gt;浏览器可以通过这个字段来判断已经被cache的文档是否被修改过, 如果没有被修改过, 那么服务器将会返回&#34;&lt;code&gt;304 Not Modified&lt;/code&gt;&#34;, 并且没有内容, 浏览器就会读入缓存的数据. 但是这个还是会有一次HTTP请求.&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;If-Modified-Since: Sat, 28 Nov 2009 06:38:19 GMT
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id=&#34;cookie&#34;&gt;Cookie&lt;/h3&gt;
&lt;p&gt;以键值对的形式被服务器种在浏览器上.&lt;/p&gt;
&lt;h3 id=&#34;referer&#34;&gt;Referer&lt;/h3&gt;
&lt;p&gt;表明这个文档的来源, 比如在wlwang41.github.io里面点击了一个a标签, 跳到了另一个页面, 那么新打开的页面中的header中的Referer字段就应该为wlwang41.github.io.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;referer&lt;/strong&gt;实际上是拼错了, 正确的应该是&lt;strong&gt;referrer&lt;/strong&gt;.&lt;/p&gt;
&lt;h3 id=&#34;authorization&#34;&gt;Authorization&lt;/h3&gt;
&lt;p&gt;当一个页面需要认证的时候, 浏览器将会打开一个窗口让用户输入用户名密码, 然后浏览器将会再发一个HTTP请求, 这一次将会带上这个头部信息.&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;n&#34;&gt;Authorization&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Basic&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bXl1c2VyOm15cGFzcw&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;这个数据是被base64编码过的.&lt;/p&gt;
&lt;h2 id=&#34;http-response&#34;&gt;HTTP Response&lt;/h2&gt;
&lt;h3 id=&#34;cache-control&#34;&gt;Cache-Control&lt;/h3&gt;
&lt;p&gt;浏览器的cache策略. 如:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;Cache-Control: max-age=3600, public
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&#34;&lt;code&gt;public&lt;/code&gt;&#34;指的是任何人都可以缓存这个数据, &#34;&lt;code&gt;max-age&lt;/code&gt;&#34;表明具体缓存的过期时间.&lt;/p&gt;
&lt;p&gt;如果不希望有缓存则可以使用&#34;&lt;code&gt;no-cache&lt;/code&gt;&#34;字段. 如:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;Cache-Control: no-cache
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id=&#34;content-type&#34;&gt;Content-Type&lt;/h3&gt;
&lt;p&gt;这个字段表明返回文档的&#34;&lt;code&gt;mime-type&lt;/code&gt;&#34;, 浏览器将会根据这个类型来决定如何展示这个文档.比如:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nt&#34;&gt;Content-Type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;html&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;charset&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;UTF-8&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;其他的&lt;code&gt;mime-type&lt;/code&gt;可以点击&lt;a href=&#34;http://webdesign.about.com/od/multimedia/a/mime-types-by-content-type.htm&#34;&gt;这里&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&#34;content-disposition&#34;&gt;Content-Disposition&lt;/h3&gt;
&lt;p&gt;这个字段就表明浏览器不应该解析数据还是应该弹出下载框. 比如(合适的数据类型也应该告诉浏览器):&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nt&#34;&gt;Content-Type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;application&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;zip&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;Content-Disposition&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;attachment&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;filename&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;download.zip&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id=&#34;content-length&#34;&gt;Content-Length&lt;/h3&gt;
&lt;p&gt;文档的大小. 比如:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;Content-Length: 89123
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;下载的时候很好用, 可以用来指定进度条的进度.&lt;/p&gt;
&lt;h3 id=&#34;etag&#34;&gt;Etag&lt;/h3&gt;
&lt;p&gt;Etag也是与缓存策略相关的. 比如:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nt&#34;&gt;Etag&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;quot;pub1259380237;gz&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;web server可以每次返回都会带上这个头信息. 它的值可以使基于最近修改时间, 文件大小或者文件的校验码的值. 浏览器将会保存这个值, 当下一次请求这个文件时, 它将被作为头的一部分发送过去:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nt&#34;&gt;If-None-Match&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;quot;pub1259380237;gz&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;如果Etag的值匹配, 那么服务器将返回304并且没有具体的内容, 这样浏览器就能用缓存的值.&lt;/p&gt;
&lt;h3 id=&#34;last-modified&#34;&gt;Last-Modified&lt;/h3&gt;
&lt;p&gt;这个字段表明服务器最近的修改时间, 如:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;Last-Modified: Sat, 28 Nov 2009 03:50:37 GMT
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;浏览器通过发送&lt;code&gt;If-Modified-Since: Sat, 28 Nov 2009 06:38:19 GMT&lt;/code&gt;来判断缓存是否过期.&lt;/p&gt;
&lt;h3 id=&#34;location&#34;&gt;Location&lt;/h3&gt;
&lt;p&gt;需要跳转的地址. 如:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;HTTP/1.x 301 Moved Permanently
...
Location: http://wlwang41.github.io/
...
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id=&#34;content-encoding&#34;&gt;Content-Encoding&lt;/h3&gt;
&lt;p&gt;表明返回的数据的压缩格式, 如:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;Content-Encoding: gzip
&lt;/pre&gt;&lt;/div&gt;


&lt;hr /&gt;
&lt;p&gt;参考文章: &lt;a href=&#34;http://code.tutsplus.com/tutorials/http-headers-for-dummies--net-8039&#34;&gt;HTTP Headers for Dummies&lt;/a&gt;&lt;/p&gt;
    </content>
  </entry>
  <entry>
    <title>POST发送数据方式</title>
    <link type="text/html" rel="alternate" href="/content/http/post发送数据方式.html"/>
    <id>/content/http/post发送数据方式.html</id>
    <published>2014-11-26 17:47</published>
    <updated>2014-11-26 17:47</updated>
    <content type="html">
      &lt;p&gt;POST方法发送数据的方式有2种，一种是 &lt;code&gt;application/x-www-form-urlencoded&lt;/code&gt;, 另外一种就是 &lt;code&gt;multipart/form-data&lt;/code&gt; .&lt;/p&gt;
&lt;h2 id=&#34;applicationx-www-form-urlencoded&#34;&gt;application/x-www-form-urlencoded&lt;/h2&gt;
&lt;p&gt;对于这种方式，传输给服务端的HTTP的body的信息是一个巨大的字符串，就像：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;err&#34;&gt;☁&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;~&lt;/span&gt;  &lt;span class=&#34;nt&#34;&gt;curl&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;-v&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;-X&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;POST&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;-d&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;quot;fizz=buzz&amp;amp;buzz=fizz&amp;quot;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;://&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;requestb&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.in&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;1e8sq8a1&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Hostname&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;was&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;NOT&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;found&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;DNS&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;cache&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;   &lt;span class=&#34;nt&#34;&gt;Trying&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;50&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.16.239.160&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Connected&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;requestb&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.in&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;127&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.0.0.1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;80&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;#0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;POST&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;1e8sq8a1&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;HTTP&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.1&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;User-Agent&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;curl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;7&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.37.1&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Host&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;requestb&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.in&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Accept&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*/*&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Content-Length&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;19&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Content-Type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;application&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;x-www-form-urlencoded&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;upload&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;completely&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;sent&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;off&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;19&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;out&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;19&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;bytes&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;HTTP&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.1&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;200&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;OK&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Connection&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;keep-alive&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Server&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;gunicorn&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;18&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.0&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;blacklisted&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Server&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;gunicorn&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;18&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.0&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Date&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Wed&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;26&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Nov&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;2014&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;14&lt;/span&gt;&lt;span class=&#34;nd&#34;&gt;:15:14&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;GMT&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Content-Type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;html&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;charset&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;utf-8&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Content-Length&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;2&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Sponsored-By&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;https&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;://&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;www&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.runscope.com&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Via&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.1&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;vegur&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Connection&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;#0&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;host&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;requestb&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.in&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;left&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;intact&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;ok&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;这里request的 &lt;code&gt;Content-Type&lt;/code&gt; 就是 &lt;code&gt;application/x-www-form-urlencoded&lt;/code&gt; .
这种方式对于要传输的巨大的字符串中是有键值对构成，键和值之间由 &lt;code&gt;=&lt;/code&gt; 隔开，每组键值对之间由 &lt;code&gt;&amp;amp;&lt;/code&gt; 隔开.
但是这种这方式对于数据有一定的要求：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;空格将会被替换成 &lt;code&gt;+&lt;/code&gt; &lt;/li&gt;
&lt;li&gt;所有非字母数字的字符将会被替换成 &lt;code&gt;%HH&lt;/code&gt; ，也就是一个百分号和2个16进制的值来代表该字符的ASCII码&lt;/li&gt;
&lt;li&gt;折行将会被替换成 &lt;code&gt;CR LF&lt;/code&gt; ( &lt;code&gt;%0D%0A&lt;/code&gt; )&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;由于有这样的规则，每一个非字母数字的字节将会被替换成3个字节，对于大的二级制文件，3倍的数据负载显得非常没有效率.&lt;/p&gt;
&lt;p&gt;所以对于传输文件，非ASCII的数据，以及二级制的数据，就得用 &lt;code&gt;multipart/form-data&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&#34;multipartform-data&#34;&gt;multipart/form-data&lt;/h2&gt;
&lt;p&gt;下面的例子可以看到，请求的 &lt;code&gt;Content-Type&lt;/code&gt; 就是 &lt;code&gt;multipart/form-data&lt;/code&gt; ，里面的每组数据由 &lt;code&gt;boundary&lt;/code&gt; 隔开.&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;err&#34;&gt;☁&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;~&lt;/span&gt;  &lt;span class=&#34;nt&#34;&gt;curl&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;-v&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;-X&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;POST&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;-F&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;quot;fizz=buzz&amp;amp;buzz=fizz&amp;quot;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;://&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;requestb&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.in&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;1e8sq8a1&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Hostname&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;was&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;NOT&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;found&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;DNS&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;cache&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;   &lt;span class=&#34;nt&#34;&gt;Trying&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;50&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.16.239.160&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Connected&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;requestb&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.in&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;127&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.0.0.1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;80&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;#0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;POST&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;1e8sq8a1&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;HTTP&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.1&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;User-Agent&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;curl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;7&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.37.1&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Host&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;requestb&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.in&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Accept&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*/*&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Content-Length&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;153&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Expect&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;100-continue&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Content-Type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;multipart&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;form-data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;boundary&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;------------------------f5926011c527fb7e&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;HTTP&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.1&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;100&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Continue&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;HTTP&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.1&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;200&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;OK&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Connection&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;keep-alive&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Server&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;gunicorn&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;18&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.0&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;blacklisted&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Server&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;gunicorn&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;18&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.0&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Date&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Wed&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;26&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Nov&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;2014&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;14&lt;/span&gt;&lt;span class=&#34;nd&#34;&gt;:26:07&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;GMT&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Content-Type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;html&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;charset&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;utf-8&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Content-Length&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;2&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Sponsored-By&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;https&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;://&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;www&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.runscope.com&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Via&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.1&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;vegur&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;Connection&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;#0&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;host&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;requestb&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.in&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;left&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;intact&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;ok&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;这种方式传输的数据，每一部分都是MIME的信息，没一部分由 &lt;code&gt;boundary&lt;/code&gt; 字符串隔开，每一部分都可以有自己的MIME头信息，比如 &lt;code&gt;Content-Type&lt;/code&gt; ，&lt;code&gt;Content-Disposition&lt;/code&gt; 。
特别是 &lt;code&gt;Content-Disposition&lt;/code&gt; ，这个头信息可以指定键值对中的键名，而键值对中的值就是MIME的信息主体。
通过w3c上的例子可以很清楚的理解这种协议：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nt&#34;&gt;&amp;lt;form&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;action=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;http://server.com/cgi/handle&amp;quot;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;enctype=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;multipart/form-data&amp;quot;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;method=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;post&amp;quot;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;lt;P&amp;gt;&lt;/span&gt;
        What is your name? &lt;span class=&#34;nt&#34;&gt;&amp;lt;INPUT&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;type=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;text&amp;quot;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;name=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;submit-name&amp;quot;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;gt;&amp;lt;BR&amp;gt;&lt;/span&gt;
        What files are you sending? &lt;span class=&#34;nt&#34;&gt;&amp;lt;INPUT&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;type=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;file&amp;quot;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;name=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;files&amp;quot;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;gt;&amp;lt;BR&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;lt;INPUT&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;type=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;submit&amp;quot;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;value=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;Send&amp;quot;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;&amp;lt;INPUT&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;type=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;reset&amp;quot;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;&amp;lt;/form&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;这里是一段表单提交的html代码，当用户在text的input标签中输入了Larry，在file的input标签中选择了file1.txt的时候，user agent将会回传这样的数据:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nt&#34;&gt;Content-Type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;multipart&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;form-data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;boundary&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;AaB03x&lt;/span&gt;

&lt;span class=&#34;nt&#34;&gt;--AaB03x&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;Content-Disposition&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;form-data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;submit-name&amp;quot;&lt;/span&gt;

&lt;span class=&#34;nt&#34;&gt;Larry&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;--AaB03x&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;Content-Disposition&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;form-data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;files&amp;quot;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;filename&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;file1.txt&amp;quot;&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;Content-Type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;plain&lt;/span&gt;

&lt;span class=&#34;o&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;contents&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;file1&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.txt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;--AaB03x--&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;在 &lt;code&gt;Content-Type&lt;/code&gt; 中指明数据传输的类型是 &lt;code&gt;multipart/form-data&lt;/code&gt; ，并且boundary字符串为AaB03x。
每一部分MIME信息都有上面指定的边界字符串隔开，并且每一部分MIME信息都可以有自己的头，如 &lt;code&gt;Content-Disposition: form-data; name=&#34;submit-name&#34;&lt;/code&gt; ，表明submit-name字段的值为Larry。
如果传输的是文件，文件名可以通过 &lt;code&gt;Content-Disposition&lt;/code&gt; 中的 &lt;code&gt;filename&lt;/code&gt; 字段来指明。&lt;/p&gt;
&lt;p&gt;如果在file的input标签里面又传了一张图片，那么user agent将会返回这样的数据：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nt&#34;&gt;Content-Type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;multipart&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;form-data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;boundary&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;AaB03x&lt;/span&gt;

&lt;span class=&#34;nt&#34;&gt;--AaB03x&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;Content-Disposition&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;form-data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;submit-name&amp;quot;&lt;/span&gt;

&lt;span class=&#34;nt&#34;&gt;Larry&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;--AaB03x&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;Content-Disposition&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;form-data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;files&amp;quot;&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;Content-Type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;multipart&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;mixed&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;boundary&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;BbC04y&lt;/span&gt;

&lt;span class=&#34;nt&#34;&gt;--BbC04y&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;Content-Disposition&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;filename&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;file1.txt&amp;quot;&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;Content-Type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;plain&lt;/span&gt;

&lt;span class=&#34;o&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;contents&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;file1&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.txt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;--BbC04y&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;Content-Disposition&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;filename&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;file2.gif&amp;quot;&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;Content-Type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;gif&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;Content-Transfer-Encoding&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;binary&lt;/span&gt;

&lt;span class=&#34;o&#34;&gt;..&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.contents&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;file2&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;.gif&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;--BbC04y--&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;--AaB03x--&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;多文件的情况，外层的 &lt;code&gt;Content-Type&lt;/code&gt; 将会是 &lt;code&gt;multipart/mixed&lt;/code&gt; 并且指定了不同文件之间的boundary字符串。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;multipart/form-data&lt;/code&gt; 可以解决非字母数字组成的大字符串的传输带来的3倍的负载，但是也不是说所有数据传输都应该用它。
因为对于一般的数据而言，大量的boundary字符也是一种性能浪费。
所以，如果你需要传输包含非字母数字字符的数据(二进制数据)，就用 &lt;code&gt;multipart/form-data&lt;/code&gt; ，否则就用 &lt;code&gt;application/x-www-form-urlencoded&lt;/code&gt; 。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;更多请参考&lt;a href=&#34;http://www.ietf.org/rfc/rfc2388.txt&#34;&gt;RFC2388&lt;/a&gt;，以及&lt;a href=&#34;http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4&#34;&gt;w3c上的解释&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
    </content>
  </entry>
  
  <entry>
    <title>DRBD配置</title>
    <link type="text/html" rel="alternate" href="/content/ops/drbd配置.html"/>
    <id>/content/ops/drbd配置.html</id>
    <published>2015-01-04 17:02</published>
    <updated>2015-01-04 17:02</updated>
    <content type="html">
      &lt;p&gt;这段时间正在考虑如何激励大家去做code review的事情，我想到的是在gitlab上做二次开发，加入打分的功能。&lt;/p&gt;
&lt;p&gt;首先master分支作为线上分支，任何想要上线的feature都要提merge request。每一个merge request要想被接受，必须得到至少5分。
一般开发者最多只能打2分，master身份的人可以打5分，所有人如果觉得代码写得不太好，可以打负分。希望通过这个打分机制，让大家都能去review别人的代码。&lt;/p&gt;
&lt;p&gt;开发完了之后问了问公司的gitlab的HA方案，得到的结果比较让人吃惊，于是我们决定研究一下如何做gitlab的高可用。&lt;/p&gt;
&lt;p&gt;简单的来说，gitlab这个项目分为ruby on rails和git2个部分，rails那边主要就是web端展示和一些网页上的操作，git端就是git的各种操作。
rails在这部分和git这部分的通讯走的是用sidekiq(redis)作的消息队列，数据库用的postgres。gitlab官方推荐了一些HA的&lt;a href=&#34;https://about.gitlab.com/high-availability/&#34;&gt;方案&lt;/a&gt;，我们选择的是它推荐的双机HA方案。&lt;/p&gt;
&lt;p&gt;这个方案就是用&lt;a href=&#34;http://www.drbd.org/&#34;&gt;DRBD&lt;/a&gt;这个中间件做了磁盘的网络备份。它允许用户在远程机器上建立一个本地块设备的实时镜像。它在linux内核2.6.33版本以及以上都是内置的一个模块。
它的同步策略有3种，我们采用的Protocol C，也就是备机同步完成才算写操作完成，这也是官方推荐的配置。&lt;/p&gt;
&lt;h2 id=&#34;_1&#34;&gt;服务器配置&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;系统: Red Hat Enterprise Linux Server release 6.5 (Santiago) ( &lt;code&gt;cat /etc/issue&lt;/code&gt; )&lt;/li&gt;
&lt;li&gt;内核版本: 2.6.32-431.5.1.el6.x86_64 ( &lt;code&gt;uname -r&lt;/code&gt; )&lt;/li&gt;
&lt;li&gt;DRBD版本: drbd-8.4.0.tar.gz&lt;/li&gt;
&lt;li&gt;机器ip: 10.31.84.109和10.31.84.206&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;_2&#34;&gt;依赖安装&lt;/h2&gt;
&lt;p&gt;运行下面命令，安装编译所需依赖：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;yum install gcc libxslt kernel-headers kernel-devel-`uname -r` make wget rpm-build flex
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id=&#34;_3&#34;&gt;下载安装源码包&lt;/h2&gt;
&lt;p&gt;在指定路径下如 &lt;code&gt;/opt/resource&lt;/code&gt; 下运行：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;wget http://oss.linbit.com/drbd/8.4/drbd-8.4.0.tar.gz &amp;amp;&amp;amp; tar xzvf drbd-8.4.0.tar.gz
cd drbd-8.4.0
./configure --prefix=/opt/drbd --localstatedir=/var --sysconfdir=/etc --with-km
make &amp;amp;&amp;amp; make install
cp /opt/drbd/etc/rc.d/init.d/drbd /etc/rc.d/init.d
chkconfig --add drbd
chkconfig drbd on
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id=&#34;_4&#34;&gt;编译模块&lt;/h2&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;cd drbd
make clean all
make KDIR=/lib/modules/`uname -r`
cp drbd.ko /lib/modules/`uname -r`/kernel/lib/
depmod
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id=&#34;_5&#34;&gt;准备分区&lt;/h2&gt;
&lt;p&gt;运行 &lt;code&gt;fdisk -l&lt;/code&gt; 得到机器的硬盘信息，比如有一块没有分区的盘/dev/xvdb。现在就对这块盘分区作为同步的磁盘。&lt;/p&gt;
&lt;p&gt;运行 &lt;code&gt;fdisk /dev/xvdb&lt;/code&gt; ，输入m会得到帮助信息，这里我们需要新建分区，所以需要选择n。
接着选择是主分区还是拓展分区，这里选主分区，也就是p。
然后选择分区号，由于这是块裸盘，所以选1.
紧接着选择开始和结束的柱面，我们只分一个区，所以都用默认值就好了。
最后输入w，完成分区。&lt;/p&gt;
&lt;p&gt;运行 &lt;code&gt;partx /dev/xvdb&lt;/code&gt; ，让内核重新读取分区，这个时候再运行 &lt;code&gt;fdisk -l&lt;/code&gt; 或者 &lt;code&gt;cat /proc/partitions&lt;/code&gt; 就能看到刚分的区了。&lt;/p&gt;
&lt;p&gt;这个步骤需要在2个机器上都去执行。&lt;/p&gt;
&lt;h2 id=&#34;drbd&#34;&gt;DRBD配置&lt;/h2&gt;
&lt;p&gt;打开/opt/drbd/etc/drbd.d/global_common.conf文件，确保在global中usage-count yes配置，以及common中的net里面有protocal C。&lt;/p&gt;
&lt;p&gt;然后在/opt/drbd/etc/drbd.d/中创建一个r0.res的文件，输入如下信息:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nt&#34;&gt;resource&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;r0&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;on&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;host_84_109&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;device&lt;/span&gt;    &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dev&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;drbd1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;disk&lt;/span&gt;      &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dev&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xvdb1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;address&lt;/span&gt;   &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;31&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;84&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;109&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;7789&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;meta&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;disk&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;on&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;host_84_206&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;device&lt;/span&gt;    &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dev&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;drbd1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;disk&lt;/span&gt;      &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dev&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xvdb1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;address&lt;/span&gt;   &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;31&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;84&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;206&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;7789&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;meta&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;disk&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;要注意主机名和服务器的主机名一致。&lt;/p&gt;
&lt;h2 id=&#34;_6&#34;&gt;建立资源&lt;/h2&gt;
&lt;p&gt;首先载入drbd模块&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;modprobe drbd
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;确认drbd模块载入&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;lsmod | grep drbd
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;清空分区数据，如果下面配文件系统失败，很有可能是这里需要清一下&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;dd if=/dev/zero of=/dev/sda3 bs=1M count=100
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;建立资源r0&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;drbdadm create-md r0
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id=&#34;drbd_1&#34;&gt;启动drbd服务&lt;/h2&gt;
&lt;p&gt;在2台机器上运行下面命令启动服务：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;service drbd start
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;可以通过 &lt;code&gt;/opt/drbd/sbin/drbd-overview&lt;/code&gt; 命令查看集群状态。&lt;/p&gt;
&lt;p&gt;在一台上运行 &lt;code&gt;drbdadm -- --overwrite-data-of-peer primary r0&lt;/code&gt; 来进行初始化的同步。&lt;/p&gt;
&lt;h2 id=&#34;_7&#34;&gt;创建文件系统比挂载&lt;/h2&gt;
&lt;p&gt;运行：&lt;code&gt;mkfs.ext4 /dev/drbd1&lt;/code&gt; 创建文件系统，然后选择要挂载到的地址： &lt;code&gt;mount /dev/drbd1 /opt/gitlab&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&#34;_8&#34;&gt;切换角色&lt;/h2&gt;
&lt;p&gt;可以通过命令 &lt;code&gt;drbdadm secondary r0&lt;/code&gt; 和 &lt;code&gt;drbdadm primary r0&lt;/code&gt; 来做角色的切换，要确保没有2个角色同时为主。&lt;/p&gt;
&lt;h2 id=&#34;_9&#34;&gt;测试&lt;/h2&gt;
&lt;p&gt;在当前的主节点上挂载点上创建一些文件，如 &lt;code&gt;touch test.txt&lt;/code&gt;，然后要确保切换角色之前要讲主节点的资源不在被使用。
运行 &lt;code&gt;umount /opt/gitlab&lt;/code&gt; .&lt;/p&gt;
&lt;p&gt;通过命令将主节点降为此节点 &lt;code&gt;drbdadm secondary r0&lt;/code&gt; .&lt;/p&gt;
&lt;p&gt;在次节点上运行命令升为主节点 &lt;code&gt;drbdadm primary r0&lt;/code&gt; ，
在次节点上挂载资源 &lt;code&gt;mount /dev/drbd1 /opt/gitlab&lt;/code&gt; ，此时cd进去就能看到在另一台机器创建的文件了。&lt;/p&gt;
    </content>
  </entry>
  <entry>
    <title>mac下gcc的坑</title>
    <link type="text/html" rel="alternate" href="/content/ops/mac下gcc的坑.html"/>
    <id>/content/ops/mac下gcc的坑.html</id>
    <published>2014-07-11 17:17</published>
    <updated>2014-07-11 17:17</updated>
    <content type="html">
      &lt;p&gt;某一天我更新了OSX和xcode之后，突然发现装PIL的时候出错了.&lt;/p&gt;
&lt;p&gt;查了半天在苹果官网上找到下面这样的说明:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;As of Apple LLVM compiler version 5.1 (clang-502) and later, the optimization level -O4 no longer implies link time optimization (LTO). In order to build with LTO explicitly use the-flto option in addition to the optimization level flag. (15633276)&lt;/p&gt;
&lt;p&gt;The Apple LLVM compiler in Xcode 5.1 treats unrecognized command-line options as errors. This issue has been seen when building both Python native extensions and Ruby Gems, where some invalid compiler options are currently specified.
Projects using invalid compiler options will need to be changed to remove those options. To help ease that transition, the compiler will temporarily accept an option to downgrade the error to a warning:
-Wno-error=unused-command-line-argument-hard-error-in-future&lt;/p&gt;
&lt;p&gt;Note: This option will not be supported in the future.&lt;/p&gt;
&lt;p&gt;To workaround this issue, set the ARCHFLAGS environment variable to downgrade the error to a warning. For example, you can install a Python native extension with:
$ ARCHFLAGS=-Wno-error=unused-command-line-argument-hard-error-in-future easy_install ExtensionName
Similarly, you can install a Ruby Gem with:
$ ARCHFLAGS=-Wno-error=unused-command-line-argument-hard-error-in-future gem install GemName&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这就意味着, 以后装的库只要带gcc make的都需要加上&lt;code&gt;ARCHFLAGS=-Wno-error=unused-command-line-argument-hard-error-in-future&lt;/code&gt;&lt;/p&gt;
    </content>
  </entry>
  <entry>
    <title>前端页面性能优化</title>
    <link type="text/html" rel="alternate" href="/content/ops/前端页面性能优化.html"/>
    <id>/content/ops/前端页面性能优化.html</id>
    <published>2014-07-16 19:47</published>
    <updated>2014-07-16 19:47</updated>
    <content type="html">
      &lt;p&gt;趁着周末会武汉参加同学会的机会, 在火车上终于把《高性能建站指南》看完了.哎, 收藏了那么多优质的电子书, 要么没时间看, 有时间的时候又不记得看, 现在唯一看书的机会就是火车上了.(上次回武汉考驾照在火车上把蝴蝶书给看了, 对js一些奇奇怪怪的感觉瞬间就明了了)&lt;/p&gt;
&lt;p&gt;这篇文章就作为一个总结吧(好吧, 其实就是书的目录).&lt;/p&gt;
&lt;h2 id=&#34;http&#34;&gt;减少HTTP的请求&lt;/h2&gt;
&lt;p&gt;这个很好理解, 本身http就是很耗时的, 最简单直接的做法当然就是尽可能少的发出HTTP的请求.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Image Maps&lt;/p&gt;
&lt;p&gt;将多个图片合并到一张, 通过&lt;code&gt;map&lt;/code&gt;标签声明各个图片的位置, 然后用&lt;code&gt;img&lt;/code&gt;的&lt;code&gt;usemap&lt;/code&gt;属性指明图片所以来的map标签&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;CSS Sprites&lt;/p&gt;
&lt;p&gt;雪碧图也是把多个icon放到一张图片中, 然后通过css的&lt;code&gt;background&lt;/code&gt;属性引入进来, 并且通过&lt;code&gt;background-position&lt;/code&gt;来指明图片在大图中的位置.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Inline Images&lt;/p&gt;
&lt;p&gt;通过data: URL的模式在web页面中包含图片而且不需要http请求.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Combined Scripts and Stylesheets&lt;/p&gt;
&lt;p&gt;合并js和css这个不必多少, 特别是用&lt;a href=&#34;http://requirejs.org/&#34;&gt;require.js&lt;/a&gt;, 既能保证模块化的思想也能压缩js.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;_1&#34;&gt;使用内容发布网络&lt;/h2&gt;
&lt;p&gt;用CDN托管静态资源, 大家都是这么干的.&lt;/p&gt;
&lt;h2 id=&#34;expires&#34;&gt;添加Expires头&lt;/h2&gt;
&lt;p&gt;通过设置&lt;code&gt;Expires&lt;/code&gt;, &lt;code&gt;Cache-Control: max-age=xxx&lt;/code&gt;来让浏览器做一些必要的缓存, 从而减少HTTP请求&lt;/p&gt;
&lt;h2 id=&#34;_2&#34;&gt;压缩组件&lt;/h2&gt;
&lt;p&gt;通过设置头&lt;code&gt;Accept-Encoding: gzip, deflate&lt;/code&gt;表示浏览器支持的压缩格式, 服务器返回的头中通过&lt;code&gt;Content-Encoding: gzip&lt;/code&gt;来表示服务器返回的数据压缩格式&lt;/p&gt;
&lt;h2 id=&#34;_3&#34;&gt;将样式表放在顶部&lt;/h2&gt;
&lt;p&gt;如果不放在顶部会有白屏或是无样式内容的闪烁现象, 这是因为如果样式不先加载进来, 那么浏览器先渲染好dom元素之后又要有结构样式上的改变, 就会造成白屏或是闪烁现象.&lt;/p&gt;
&lt;p&gt;实际上在HTML的规范中, &lt;code&gt;link&lt;/code&gt;只能出现在&lt;code&gt;head&lt;/code&gt;之中, 而之所以浏览器支持把&lt;code&gt;link&lt;/code&gt;放到&lt;code&gt;head&lt;/code&gt;外面纯粹是为了解决历史遗留问题.所以遵守规范总是好的.&lt;/p&gt;
&lt;h2 id=&#34;_4&#34;&gt;将脚本放到底部&lt;/h2&gt;
&lt;p&gt;脚本不影响页面渲染的情况下把他放到最下面, 先让用户看到页面.&lt;/p&gt;
&lt;p&gt;在HTTP 1.1规范中建议浏览器从每个主机名并行的下载2个组件(也可以自己配置), 但是如果有脚本在下载, 那么就不能并行下载其他的组件.因为脚本可能会使用类似&lt;code&gt;document.write&lt;/code&gt;等方式对页面渲染产生影响, 所以浏览器会等待脚本的下载来确保正确的布局, 并且不让并行下载可以保证脚本的执行顺序.&lt;/p&gt;
&lt;h2 id=&#34;css&#34;&gt;避免css表达式&lt;/h2&gt;
&lt;p&gt;这东西不太熟, 说是有些时候会影响页面的加载速度, 比较危险, 所以建议不要使用(非常了解除外).&lt;/p&gt;
&lt;h2 id=&#34;cssjs&#34;&gt;使用外部的css和js&lt;/h2&gt;
&lt;p&gt;内联的js和css会使文档过大, 并且不利于代码重用,  影响页面加载速度, 但是却会减少HTTP请求.但实际上, 由于CDN和浏览器缓存的存在, 使得内联js和css让文档过大的缺点变得非常明显, 所以要尽量使用外部的css和js.&lt;/p&gt;
&lt;h2 id=&#34;dns&#34;&gt;减少DNS查找&lt;/h2&gt;
&lt;p&gt;通过使用Keep-Alive和较少的域名来减少DNS查找&lt;/p&gt;
&lt;h2 id=&#34;js&#34;&gt;精简js&lt;/h2&gt;
&lt;p&gt;压缩和精简js代码能够减少网络传输的时间开销&lt;/p&gt;
&lt;h2 id=&#34;_5&#34;&gt;避免重定向&lt;/h2&gt;
&lt;p&gt;使用了重定向, 当最终的html请求到之前, 不会有任何的组件的下载和页面渲染.虽然使用重定向能很方便自然的解决问题, 但是性能上带来的损害是无法弥补的.所以尽量使用一些替代方案&lt;/p&gt;
&lt;h2 id=&#34;_6&#34;&gt;移除重复脚本&lt;/h2&gt;
&lt;p&gt;自己注点意&lt;/p&gt;
&lt;h2 id=&#34;etag&#34;&gt;配置Etag&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;ETag&lt;/code&gt;是&lt;code&gt;If-Modified-Since&lt;/code&gt;的增强(&lt;code&gt;If-Modified-Since&lt;/code&gt;只能精确到秒), 会在http头中增加&lt;code&gt;If-None-Match&lt;/code&gt;信息. 但是, 当在集群环境下ETag会导致缓存失效, 因此需要根据实际情况开始或关闭ETag.&lt;/p&gt;
&lt;h2 id=&#34;ajax&#34;&gt;使Ajax可缓存&lt;/h2&gt;
&lt;p&gt;确保Ajax请求遵循性能指导, 尤其应具有长久的&lt;code&gt;Expires&lt;/code&gt;头.&lt;/p&gt;
    </content>
  </entry>
  <entry>
    <title>fastdfs调研</title>
    <link type="text/html" rel="alternate" href="/content/ops/fastdfs调研.html"/>
    <id>/content/ops/fastdfs调研.html</id>
    <published>2014-08-12 14:33</published>
    <updated>2014-08-12 14:33</updated>
    <content type="html">
      &lt;p&gt;架构组第一件事情就是搭建一个文件系统来代替搜狐的云存储。
我们考虑过重写&lt;a href=&#34;https://github.com/douban/beansdb&#34;&gt;Beansdb&lt;/a&gt;，但是由于工期问题和使用量最后没有考虑使用这个方案，
&lt;a href=&#34;http://jinyong.me/&#34;&gt;金庸&lt;/a&gt;同学调研了一圈，最终决定使用&lt;a href=&#34;https://code.google.com/p/fastdfs/&#34;&gt;FastDFS&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;其实我对它还是有点不放心，虽然有很多公司都在用这个FS，
但是介绍它的文档都是分散的，没有人去维护一个官方的文档，给我的感觉很不正式，万一哪天作者不去维护了怎么办呢？
由于我没能提出另一个可靠的方案，所以也就决定使用它了。希望不要成为和以前选用cassandra作为主数据库一样的黑历史。
这篇文章主要整理一些碎片的文档，希望能够慢慢完善最终成为我们组内使用FastDFS的一个wiki。&lt;/p&gt;
&lt;h2 id=&#34;fastdfs&#34;&gt;FastDFS安装&lt;/h2&gt;
&lt;p&gt;安装请参考&lt;a href=&#34;http://www.zrwm.com/?cat=131&#34;&gt;这里&lt;/a&gt;。&lt;/p&gt;
&lt;h2 id=&#34;fastdfs_1&#34;&gt;FastDFS概述&lt;/h2&gt;
&lt;p&gt;通过&lt;a href=&#34;http://search.aol.com/aol/search?q=fastdfs&amp;amp;s_it=opensearch&#34;&gt;Google&lt;/a&gt;来搜FastDFS，
会看到前四个结果分别是&lt;a href=&#34;http://code.google.com/p/fastdfs/&#34;&gt;google code&lt;/a&gt;和&lt;a href=&#34;http://sourceforge.net/projects/fastdfs/&#34;&gt;sourceforge&lt;/a&gt;上托管的源码。
很奇怪为什么作者不在Github上托管一份，这2个更新和管理代码太不方便，更不谈googlecode被墙了。&lt;/p&gt;
&lt;p&gt;第五个结果是它的&lt;a href=&#34;http://bbs.chinaunix.net/forum-240-1.html&#34;&gt;论坛&lt;/a&gt;，很多资料和使用经验应该都会出自这里。哎，写个官方使用文档是他妈有多难？&lt;/p&gt;
&lt;p&gt;后面2篇文章是&lt;a href=&#34;http://tech.uc.cn/?p=221&#34;&gt;uc博客&lt;/a&gt;上面别人分享的，写得很好，讲清楚了FastDFS的原理，概述这一小节将会是对这2篇文章的整理。&lt;/p&gt;
&lt;h3 id=&#34;fastdfs_2&#34;&gt;什么是FastDFS&lt;/h3&gt;
&lt;p&gt;FastDFS是一个开源的轻量级分布式文件系统，它解决了大数据量存储和负载均衡等问题。
特别适合以中小文件（建议范围： &lt;strong&gt;4KB&lt;/strong&gt; 到 &lt;strong&gt;500MB&lt;/strong&gt; ）为载体的在线服务，如相册网站、视频网站等等。&lt;/p&gt;
&lt;h3 id=&#34;fastdfs_3&#34;&gt;FastDFS架构&lt;/h3&gt;
&lt;p&gt;FastDFS服务端有三个角色：跟踪服务器（tracker server）、存储服务器（storage server）和客户端（client）。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;tracker server: 跟踪服务器，主要做调度工作，起负载均衡的作用。
在内存中记录集群中所有存储组和存储服务器的状态信息，是客户端和数据服务器交互的枢纽。
相比GFS中的master更为精简，不记录文件索引信息，占用的内存量很少。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;storage server: 存储服务器（又称：存储节点或数据服务器），文件和文件属性（meta data）都保存到存储服务器上。
Storage server直接利用OS的文件系统调用管理文件。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;client server: 客户端，作为业务请求的发起方，通过专有接口，使用TCP/IP协议与跟踪器服务器或存储节点进行数据交互。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;http://tech.uc.cn/wp-content/uploads/2012/08/FastDFS%E6%9E%B6%E6%9E%84%E5%9B%BE1.png&#34; style=&#34;width: 500px;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;FastDFS这样的架构十分轻量，没有Master角色，使用对等结构，组间数据是户备，很方便的加入新的组来实现平行扩展，各个节点之前的通讯协议都是TCP/IP的。&lt;/p&gt;
&lt;h3 id=&#34;_1&#34;&gt;上传机制&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;http://tech.uc.cn/wp-content/uploads/2012/08/FastDFS%E4%B8%8A%E4%BC%A0%E6%B5%81%E7%A8%8B.png&#34; style=&#34;width: 500px;&#34; /&gt;&lt;/p&gt;
&lt;h3 id=&#34;_2&#34;&gt;组件同步时间管理&lt;/h3&gt;
&lt;p&gt;当一个文件上传成功后，客户端马上发起对该文件下载请求（或删除请求）时，tracker是如何选定一个适用的存储服务器呢？&lt;/p&gt;
&lt;p&gt;其实每个存储服务器都需要定时将自身的信息上报给tracker，这些信息就包括了本地同步时间（即同步到的最新文件的时间戳）。
而tracker根据各个存储服务器的上报情况，就能够知道刚刚上传的文件，在该存储组中是否已完成了同步。同步信息上报如下图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://tech.uc.cn/wp-content/uploads/2012/08/%E7%AE%A1%E7%90%86%E5%90%8C%E6%AD%A5%E6%97%B6%E9%97%B4.png&#34; style=&#34;width: 500px;&#34; /&gt;&lt;/p&gt;
&lt;h3 id=&#34;_3&#34;&gt;下载机制&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;http://tech.uc.cn/wp-content/uploads/2012/08/FastDFS%E4%B8%8B%E8%BD%BD%E6%B5%81%E7%A8%8B.png&#34; style=&#34;width: 500px;&#34; /&gt;&lt;/p&gt;
&lt;h3 id=&#34;fid&#34;&gt;FID&lt;/h3&gt;
&lt;p&gt;文件索引结构为：&lt;code&gt;g1/M00/00/00/CgoYr1PoeaaAQhnkAAzrjmXcV8I399.jpg&lt;/code&gt;
它是客户端上传文件后存储服务器返回给客户端，用于以后访问该文件的索引信息。
文件索引信息包括：组名，虚拟磁盘路径，数据两级目录，文件名。&lt;/p&gt;
&lt;p&gt;其中：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;组名: 文件上传后所在的存储组名称，在文件上传成功后有存储服务器返回，需要客户端自行保存。&lt;/li&gt;
&lt;li&gt;虚拟磁盘路径: 存储服务器配置的虚拟路径，与磁盘选项store_path* 对应。&lt;/li&gt;
&lt;li&gt;数据两级目录: 存储服务器在每个虚拟磁盘路径下创建的两级目录，用于存储数据文件。&lt;/li&gt;
&lt;li&gt;文件名: 与文件上传时不同。是由存储服务器根据特定信息生成，文件名包含：源存储服务器IP地址、文件创建时间戳、文件大小、随机数和文件拓展名等信息。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;具体的使用场景为：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;通过组名tracker能够很快的定位到客户端需要访问的存储服务器组，并将选择合适的存储服务器提供客户端访问；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;存储服务器根据“文件存储虚拟磁盘路径”和“数据文件两级目录”可以很快定位到文件所在目录，并根据文件名找到客户端需要访问的文件。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://tech.uc.cn/wp-content/uploads/2012/08/%E6%96%87%E4%BB%B6%E6%99%BA%E8%83%BD%E5%AE%9A%E4%BD%8D1.png&#34; style=&#34;width: 500px;&#34; /&gt;&lt;/p&gt;
&lt;h3 id=&#34;_4&#34;&gt;总结&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;FastDFS只有三个角色；且跟踪服务器和存储服务器均不存在单点。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;跟踪服务器被动的接收存储服务器汇报，对存储服务器进行分组管理；并为客户端选定适用的存储服务器。同一存储服务器可以同时向多台跟踪服务器汇报状态信息。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;存储服务器组内所有存储服务器是对等关系，存储的数据一一对应且相同；所有的存储服务器均是同时在线服务，极大的提高的服务器的使用率，分担了数据访问压力。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;fastdfs_4&#34;&gt;FastDFS使用技巧&lt;/h2&gt;
&lt;h3 id=&#34;_5&#34;&gt;下载时返回可读文件名&lt;/h3&gt;
&lt;p&gt;文件被上传到FastDFS后Storage服务端将返回的文件索引（FID），
其中文件名是根据FastDFS自定义规则重新生成的，而不是原始文件名，例如： group2/M00/00/89/eQ6h3FKJf_PRl8p4AUz4wO8tqaA688.apk&lt;/p&gt;
&lt;p&gt;使用http下载时如不加处理，显示给用户的文件名会是这样的eQ6h3FKJf_PRl8p4AUz4wO8tqaA688.apk，这样的用户体验很不好。
由于FastDFS不会存储原始文件名，也没有提供恢复原始文件名的方法，所以需要应用系统自己想办法恢复原始文件名。&lt;/p&gt;
&lt;p&gt;解决方法:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;应用系统在上传文件到FastDFS成功时将原始文件名和“文件索引（FID）”保存下来（例如：保存到数据库）。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;用户点击下载的时用Nginx的域名和FID拼出url，然后在url后面增加一个参数，指定原始文件名。
例如： http://121.14.161.48:9030/group2/M00/00/89/eQ6h3FKJf_PRl8p4AUz4wO8tqaA688.apk?attname=filename.apk&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;在Nginx上进行如下配置，这样Nginx就会截获url中的参数attname，在Http响应头里面加上字段 &lt;code&gt;Content-Disposition &#34;attachment;filename=$arg_attname&#34;&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;x&#34;&gt;location /group2/M00 &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;x&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;    root /data/store/data;&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;    if (&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;arg_attname&lt;/span&gt;&lt;span class=&#34;x&#34;&gt; ~ &amp;quot;^(.*).apk&amp;quot;) &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;x&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;            add_header Content-Disposition &amp;quot;attachment;filename=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;arg_attname&lt;/span&gt;&lt;span class=&#34;x&#34;&gt;&amp;quot;;&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;    }&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;    ngx_fastdfs_module;&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;浏览器发现响应头里面有 &lt;code&gt;Content-Disposition &#34;attachment;filename=$arg_attname&#34;&lt;/code&gt; 时，就会把文件名显示成filename指定的名称。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;在使用fdfs_nginx_module 1.15时可以直接在http 请求中加入 &lt;code&gt;filename=real_file_name&lt;/code&gt; 即可以返回文件的原始名称 &lt;code&gt;real_file_name&lt;/code&gt; ，不需要添加nginx添加相应头的配置。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;_6&#34;&gt;自带命令&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;fdfs_delete_file: 删除文件，&lt;code&gt;/opt/apps/fdfs/bin/fdfs_delete_file &amp;lt;config_file&amp;gt; &amp;lt;file_id&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;fdfs_download_file: 下载文件，&lt;code&gt;/opt/apps/fdfs/bin/fdfs_download_file &amp;lt;config_file&amp;gt; &amp;lt;file_id&amp;gt; &amp;lt;local_filename&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;fdfs_file_info: 获取某个文件信息，&lt;code&gt;/opt/apps/fdfs/bin/fdfs_file_info &amp;lt;config_file&amp;gt; &amp;lt;file_id&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;fdfs_monitor: 监控，查看storage server的状态&lt;code&gt;/opt/apps/fdfs/bin/fdfs_monitor &amp;lt;config_file&amp;gt;&lt;/code&gt;
也可以用这个命令来摘除无效的storage节点，&lt;code&gt;/opt/apps/fdfs/bin/fdfs_monitor &amp;lt;config_file&amp;gt; delete &amp;lt;group_name&amp;gt; &amp;lt;storage_ip&amp;gt;&lt;/code&gt;
注意：如果被删除的storage server的状态是ACTIVE，也就是该storage server还在线上服务的情况下，是无法删除掉的。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;fdfs_storaged: 用来启动或是重启或是关闭server，&lt;code&gt;/opt/apps/fdfs/bin/fdfs_storaged &amp;lt;config_file&amp;gt; [start | stop | restart]&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;fdfs_trackerd: 用来启动或是重启或是关闭server，&lt;code&gt;/opt/apps/fdfs/bin/fdfs_trackerd &amp;lt;config_file&amp;gt; [start | stop | restart]&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;fdfs_upload_file: 上传文件，&lt;code&gt;/opt/apps/fdfs/bin/fdfs_upload_file &amp;lt;config_file&amp;gt; &amp;lt;local_filename&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;_7&#34;&gt;配置详解&lt;/h3&gt;
&lt;h4 id=&#34;trackerconf&#34;&gt;tracker.conf&lt;/h4&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;disabled=false  # 这个配置文件是否不生效

bind_addr=  # 是否绑定IP，后面为绑定的IP地址

port=22122  # 提供服务的端口

connect_timeout=30  # 连接超时时间，针对socket套接字函数connect

network_timeout=60  # tracker server的网络超时，单位为秒。发送或接收数据时，如果在超时时间后还不能发送或接收数据，则本次网络通信失败。

base_path=/home/yuqing/fastdfs  # base_path 目录地址(根目录必须存在,子目录会自动创建)
# 附目录说明:
    tracker server目录及文件结构：
    &lt;span class=&#34;cp&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;base_path&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;}&lt;/span&gt;
      |__data
      |     |__storage_groups.dat：存储分组信息
      |     |__storage_servers.dat：存储服务器列表
      |__logs
            |__trackerd.log：tracker server日志文件

        数据文件storage_groups.dat和storage_servers.dat中的记录之间以换行符（\n）分隔，字段之间以西文逗号（,）分隔。
        storage_groups.dat中的字段依次为：
            1. group_name：组名
            2. storage_port：storage server端口号

    storage_servers.dat中记录storage server相关信息，字段依次为：
        1. group_name：所属组名
        2. ip_addr：ip地址
        3. status：状态
        4. sync_src_ip_addr：向该storage server同步已有数据文件的源服务器
        5. sync_until_timestamp：同步已有数据文件的截至时间（UNIX时间戳）
        6. stat.total_upload_count：上传文件次数
        7. stat.success_upload_count：成功上传文件次数
        8. stat.total_set_meta_count：更改meta data次数
        9. stat.success_set_meta_count：成功更改meta data次数
        10. stat.total_delete_count：删除文件次数
        11. stat.success_delete_count：成功删除文件次数
        12. stat.total_download_count：下载文件次数
        13. stat.success_download_count：成功下载文件次数
        14. stat.total_get_meta_count：获取meta data次数
        15. stat.success_get_meta_count：成功获取meta data次数
        16. stat.last_source_update：最近一次源头更新时间（更新操作来自客户端）
        17. stat.last_sync_update：最近一次同步更新时间（更新操作来自其他storage server的同步）

max_connections=256  # 系统提供服务时的最大连接数

accept_threads=1  # 允许的线程数

work_threads=4  # V2.0引入的这个参数，工作线程数，通常设置为CPU数，要&lt;span class=&#34;err&#34;&gt;&amp;lt;&lt;/span&gt;= max_connections

# 上传组(卷) 的方式 0:轮询方式 1: 指定组 2: 平衡负载(选择最大剩余空间的组(卷)上传)
# 这里如果在应用层指定了上传到一个固定组,那么这个参数被绕过
store_lookup=2

store_group=group2  # 当上一个参数设定为1 时 (store_lookup=1，即指定组名时)，必须设置本参数为系统中存在的一个组名。如果选择其他的上传方式，这个参数就没有效了。

# 选择哪个storage server 进行上传操作(一个文件被上传后，这个storage server就相当于这个文件的storage server源，会对同组的storage server推送这个文件达到同步效果)
# 0: 轮询方式
# 1: 根据ip 地址进行排序选择第一个服务器（IP地址最小者）
# 2: 根据优先级进行排序（上传优先级由storage server来设置，参数名为upload_priority）
store_server=0

# 选择storage server 中的哪个目录进行上传。storage server可以有多个存放文件的base path（可以理解为多个磁盘）。
# 0: 轮流方式，多个目录依次存放文件
# 2: 选择剩余空间最大的目录存放文件（注意：剩余磁盘空间是动态的，因此存储到的目录或磁盘可能也是变化的）
store_path=0

# 选择哪个 storage server 作为下载服务器
# 0: 轮询方式，可以下载当前文件的任一storage server
# 1: 哪个为源storage server 就用哪一个 (前面说过了这个storage server源 是怎样产生的) 就是之前上传到哪个storage server服务器就是哪个了
download_server=0

# storage server 上保留的空间，保证系统或其他应用需求空间。可以用绝对值或者百分比（V4开始支持百分比方式）。
#(指出 如果同组的服务器的硬盘大小一样,以最小的为准,也就是只要同组中有一台服务器达到这个标准了,这个标准就生效,原因就是因为他们进行备份)
reserved_storage_space = 10%

log_level=info  # 选择日志级别

run_by_group=  # 操作系统运行FastDFS的用户组 (不填 就是当前用户组,哪个启动进程就是哪个)

run_by_user=  # 操作系统运行FastDFS的用户 (不填 就是当前用户,哪个启动进程就是哪个)

allow_hosts=*  # 可以连接到此 tracker server 的ip范围（对所有类型的连接都有影响，包括客户端，storage server）

# 同步或刷新日志信息到硬盘的时间间隔，单位为秒
# 注意：tracker server 的日志不是时时写硬盘的，而是先写内存。
sync_log_buff_interval = 10

# 检测 storage server 存活的时间隔，单位为秒。
# storage server定期向tracker server 发心跳，
# 如果tracker server在一个check_active_interval内还没有收到storage server的一次心跳，那边将认为该storage server已经下线。
# 所以本参数值必须大于storage server配置的心跳时间间隔。通常配置为storage server心跳时间间隔的2倍或3倍。
check_active_interval = 120

# 线程栈的大小。FastDFS server端采用了线程方式。更正一下，tracker server线程栈不应小于64KB，不是512KB。
# 线程栈越大，一个线程占用的系统资源就越多。如果要启动更多的线程（V1.x对应的参数为max_connections， V2.0为work_threads），可以适当降低本参数值。
thread_stack_size=1MB

storage_ip_changed_auto_adjust=true  # 这个参数控制当storage server IP地址改变时，集群是否自动调整。注：只有在storage server进程重启时才完成自动调整。

# V2.0引入的参数。存储服务器之间同步文件的最大延迟时间，缺省为1天。根据实际情况进行调整
# 注：本参数并不影响文件同步过程。本参数仅在下载文件时，判断文件是否已经被同步完成的一个阀值（经验值）
storage_sync_file_max_delay = 86400

# V2.0引入的参数。存储服务器同步一个文件需要消耗的最大时间，缺省为300s，即5分钟。
# 注：本参数并不影响文件同步过程。本参数仅在下载文件时，作为判断当前文件是否被同步完成的一个阀值（经验值）
storage_sync_file_max_time = 300

use_trunk_file = false  # V3.0引入的参数。是否使用小文件合并存储特性，缺省是关闭的。

# V3.0引入的参数。
# trunk file分配的最小字节数。比如文件只有16个字节，系统也会分配slot_min_size个字节。
slot_min_size = 256

# V3.0引入的参数。
# 只有文件大小&lt;span class=&#34;err&#34;&gt;&amp;lt;&lt;/span&gt;=这个参数值的文件，才会合并存储。如果一个文件的大小大于这个参数值，将直接保存到一个文件中（即不采用合并存储方式）。
slot_max_size = 16MB

# V3.0引入的参数。
# 合并存储的trunk file大小，至少4MB，缺省值是64MB。不建议设置得过大。
trunk_file_size = 64MB

trunk_create_file_advance = false  # 是否提前创建trunk file。只有当这个参数为true，下面3个以trunk_create_file_打头的参数才有效。

trunk_create_file_time_base = 02:00  # 提前创建trunk file的起始时间点（基准时间），02:00表示第一次创建的时间点是凌晨2点。

trunk_create_file_interval = 86400  # 创建trunk file的时间间隔，单位为秒。如果每天只提前创建一次，则设置为86400

# 提前创建trunk file时，需要达到的空闲trunk大小
# 比如本参数为20G，而当前空闲trunk为4GB，那么只需要创建16GB的trunk file即可。
trunk_create_file_space_threshold = 20G

trunk_init_check_occupying = false  #trunk初始化时，是否检查可用空间是否被占用

# 是否无条件从trunk binlog中加载trunk可用空间信息
# FastDFS缺省是从快照文件storage_trunk.dat中加载trunk可用空间，
# 该文件的第一行记录的是trunk binlog的offset，然后从binlog的offset开始加载
trunk_init_reload_from_binlog = false

use_storage_id = false  # 是否使用server ID作为storage server标识

# use_storage_id 设置为true，才需要设置本参数
# 在文件中设置组名、server ID和对应的IP地址，参见源码目录下的配置示例：conf/storage_ids.conf
storage_ids_filename = storage_ids.conf

# 存储从文件是否采用symbol link（符号链接）方式
# 如果设置为true，一个从文件将占用两个文件：原始文件及指向它的符号链接。
store_slave_file_use_link = false

rotate_error_log = false  # 是否定期轮转error log，目前仅支持一天轮转一次

error_log_rotate_time=00:00   # error log定期轮转的时间点，只有当rotate_error_log设置为true时有效

# error log按大小轮转
# 设置为0表示不按文件大小轮转，否则当error log达到该大小，就会轮转到新文件中
rotate_error_log_size = 0

# 以下是关于http的设置了 默认编译是不生效的 要求更改 #WITH_HTTPD=1 将 注释#去掉 再编译
# 关于http的应用 说实话 不是很了解 没有见到 相关说明 ,望 版主可以完善一下 以下是字面解释了
http.disabled=false  # HTTP服务是否不生效
http.server_port=8080  # HTTP服务端口


#use &amp;quot;#include&amp;quot; directive to include http other settiongs
##include http.conf  # 如果加载http.conf的配置文件 去掉第一个
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id=&#34;storageconf&#34;&gt;storage.conf&lt;/h3&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;disabled=false  # 同上

group_name=group1  # 指定此storage server所在组(卷)

bind_addr=  # 同上

# bind_addr通常是针对server的。当指定bind_addr时，本参数才有效。
# 本storage server作为client连接其他服务器（如tracker server、其他storage server），是否绑定bind_addr。
client_bind=true

port=23000  # storage server服务端口

connect_timeout=30  # 同上

network_timeout=60  # 同上

heart_beat_interval=30  # 心跳间隔时间，单位为秒 (这里是指主动向tracker server 发送心跳)

stat_report_interval=60  # storage server向tracker server报告磁盘剩余空间的时间间隔，单位为秒。

base_path=/home/yuqing/fastdfs  # 同上

max_connections=256  # 同上

work_threads=4  # 同上

# V2.0引入本参数。设置队列结点的buffer大小。工作队列消耗的内存大小 = buff_size * max_connections
# 设置得大一些，系统整体性能会有所提升。
# 消耗的内存请不要超过系统物理内存大小。另外，对于32位系统，请注意使用到的内存不要超过3GB
buff_size = 256KB

# V2.09引入本参数。设置为true，表示不使用操作系统的文件内容缓冲特性。
# 如果文件数量很多，且访问很分散，可以考虑将本参数设置为true
disk_rw_direct = false

disk_rw_separated = true  # V2.0引入本参数。磁盘IO读写是否分离，缺省是分离的。

# V2.0引入本参数。针对单个存储路径的读线程数，缺省值为1。
# 读写分离时，系统中的读线程数 = disk_reader_threads * store_path_count
# 读写混合时，系统中的读写线程数 = (disk_reader_threads + disk_writer_threads) * store_path_count
disk_reader_threads = 1

# V2.0引入本参数。针对单个存储路径的写线程数，缺省值为1。
# 读写分离时，系统中的写线程数 = disk_writer_threads * store_path_count
# 读写混合时，系统中的读写线程数 = (disk_reader_threads + disk_writer_threads) * store_path_count
disk_writer_threads = 1

# 同步文件时，如果从binlog中没有读到要同步的文件，休眠N毫秒后重新读取。0表示不休眠，立即再次尝试读取。
# 出于CPU消耗考虑，不建议设置为0。如何希望同步尽可能快一些，可以将本参数设置得小一些，比如设置为10ms
sync_wait_msec=200

sync_interval=0  # 同步上一个文件后，再同步下一个文件的时间间隔，单位为毫秒，0表示不休眠，直接同步下一个文件。

sync_start_time=00:00

sync_end_time=23:59  # 上面二个一起解释。允许系统同步的时间段 (默认是全天) 。一般用于避免高峰同步产生一些问题而设定

# 同步完N个文件后，把storage的mark文件同步到磁盘
# 注：如果mark文件内容没有变化，则不会同步
write_mark_file_freq=500

store_path_count=1  # 存放文件时storage server支持多个路径（例如磁盘）。这里配置存放文件的基路径数目，通常只配一个目录。

#store_path1=/home/yuqing/fastdfs2
# 逐一配置store_path个路径，索引号基于0。注意配置方法后面有0,1,2 ......，需要配置0到store_path - 1。
# 如果不配置base_path0，那边它就和base_path对应的路径一样。
store_path0=/home/yuqing/fastdfs

# FastDFS存储文件时，采用了两级目录。这里配置存放文件的目录个数 (系统的存储机制,大家看看文件存储的目录就知道了)
# 如果本参数只为N（如：256），那么storage server在初次运行时，会自动创建 N * N 个存放文件的子目录。
subdir_count_per_path=256

# tracker_server 的列表 要写端口的哦 (再次提醒是主动连接tracker_server )
# 有多个tracker server时，每个tracker server写一行
tracker_server=10.62.164.84:22122
tracker_server=10.62.245.170:22122

log_level=info  # 同上

run_by_group=  # 同上

run_by_user=  # 同上

# 允许连接本storage server的IP地址列表 （不包括自带HTTP服务的所有连接）
# 可以配置多行，每行都会起作用
allow_hosts=*

#  文件在data目录下分散存储策略。
# 0: 轮流存放，在一个目录下存储设置的文件数后（参数file_distribute_rotate_count中设置文件数），使用下一个目录进行存储。
# 1: 随机存储，根据文件名对应的hash code来分散存储。
file_distribute_path_mode=0

# 当上面的参数file_distribute_path_mode配置为0（轮流存放方式）时，本参数有效。
# 当一个目录下的文件存放的文件数达到本参数值时，后续上传的文件存储到下一个目录中。
file_distribute_rotate_count=100

fsync_after_written_bytes=0  # 当写入大文件时，每写入N个字节，调用一次系统函数fsync将内容强行同步到硬盘。0表示从不调用fsync

# 同步或刷新日志信息到硬盘的时间间隔，单位为秒
# 注意：storage server 的日志信息不是时时写硬盘的，而是先写内存。
sync_log_buff_interval=10

# 同步binglog（更新操作日志）到硬盘的时间间隔，单位为秒
# 本参数会影响新上传文件同步延迟时间
sync_binlog_buff_interval=60

# 把storage的stat文件同步到磁盘的时间间隔，单位为秒。
# 注：如果stat文件内容没有变化，不会进行同步
sync_stat_file_interval=300

# 线程栈的大小。FastDFS server端采用了线程方式。
# 对于V1.x，storage server线程栈不应小于512KB；对于V2.0，线程栈大于等于128KB即可。
# 线程栈越大，一个线程占用的系统资源就越多。
# 对于V1.x，如果要启动更多的线程（max_connections），可以适当降低本参数值。
thread_stack_size=512KB

upload_priority=10  # 本storage server作为源服务器，上传文件的优先级，可以为负数。值越小，优先级越高。这里就和 tracker.conf 中store_server= 2时的配置相对应了

# 是否检测上传文件已经存在。如果已经存在，则不存在文件内容，建立一个符号链接以节省磁盘空间。
# 这个应用要配合FastDHT 使用，所以打开前要先安装FastDHT
# 1或yes 是检测，0或no 是不检测
check_file_duplicate=0

# 文件去重时，文件内容的签名方式：
## hash： 4个hash code
## md5：MD5
file_signature_method=hash

key_namespace=FastDFS  # 当上个参数设定为1 或 yes时 (true/on也是可以的) ， 在FastDHT中的命名空间。

keep_alive=0  # 与FastDHT servers 的连接方式 (是否为持久连接) ，默认是0（短连接方式）。可以考虑使用长连接，这要看FastDHT server的连接数是否够用。

use_access_log = false  # 是否将文件操作记录到access log

rotate_access_log = false  # 是否定期轮转access log，目前仅支持一天轮转一次

access_log_rotate_time=00:00  # access log定期轮转的时间点，只有当rotate_access_log设置为true时有效

rotate_error_log = false  # 是否定期轮转error log，目前仅支持一天轮转一次

error_log_rotate_time=00:00  # error log定期轮转的时间点，只有当rotate_error_log设置为true时有效

# access log按文件大小轮转
# 设置为0表示不按文件大小轮转，否则当access log达到该大小，就会轮转到新文件中
rotate_access_log_size = 0

# error log按文件大小轮转
# 设置为0表示不按文件大小轮转，否则当error log达到该大小，就会轮转到新文件中
rotate_error_log_size = 0

file_sync_skip_invalid_record=false  # 文件同步的时候，是否忽略无效的binlog记录

http.disabled=false

http.server_port=8888

http.trunk_size=256KB  # http.trunk_size表示读取文件内容的buffer大小（一次读取的文件内容大小），也就是回复给HTTP client的块大小。

# storage server上web server域名，通常仅针对单独部署的web server。这样URL中就可以通过域名方式来访问storage server上的文件了，
# 这个参数为空就是IP地址的方式。
http.domain_name=

#use &amp;quot;#include&amp;quot; directive to include HTTP other settiongs
##include http.conf
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id=&#34;_8&#34;&gt;缓存&lt;/h3&gt;
&lt;p&gt;缓存的方案选取的是在tracker的机器上安装 &lt;code&gt;ngx_cache_purge&lt;/code&gt; 模块来提供缓存。&lt;/p&gt;
&lt;p&gt;修改nginx配置如下:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nt&#34;&gt;worker_processes&lt;/span&gt;  &lt;span class=&#34;nt&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;                  &lt;span class=&#34;err&#34;&gt;#根据&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;CPU&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;核心数而定&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;events&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;worker_connections&lt;/span&gt;  &lt;span class=&#34;m&#34;&gt;65535&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;        &lt;span class=&#34;err&#34;&gt;#最大链接数&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;use&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;epoll&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;                        &lt;span class=&#34;err&#34;&gt;#新版本的&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Linux&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;可使用&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;epoll&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;加快处理性能&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;http&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;#设置缓存参数&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;server_names_hash_bucket_size&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;128&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;client_header_buffer_size&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;large_client_header_buffers&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;4&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;client_max_body_size&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;300&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;sendfile&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;on&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;tcp_nopush&lt;/span&gt;      &lt;span class=&#34;n&#34;&gt;on&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;proxy_redirect&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;off&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;proxy_set_header&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Host&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;http_host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;proxy_set_header&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Real&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;IP&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;remote_addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;proxy_set_header&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Forwarded&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;For&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;proxy_add_x_forwarded_for&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;proxy_connect_timeout&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;90&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;proxy_send_timeout&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;90&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;proxy_read_timeout&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;90&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;proxy_buffer_size&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;proxy_buffers&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;4&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;64&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;proxy_busy_buffers_size&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;128&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;proxy_temp_file_write_size&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;128&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;#设置缓存存储路径、存储方式、分配内存大小、磁盘最大空间、缓存期限&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;proxy_cache_path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;var&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cache&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nginx&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;proxy_cache&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;levels&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;keys_zone&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cache&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;500&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;max_size&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;g&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;inactive&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;30&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;proxy_temp_path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;var&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cache&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nginx&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;proxy_cache&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tmp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

    &lt;span class=&#34;err&#34;&gt;#设置&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;group1&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;的服务器&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;upstream&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fdfs_group1&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;172&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;16&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;203&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;weight&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;max_fails&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fail_timeout&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;30s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;172&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;16&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;204&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;weight&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;max_fails&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fail_timeout&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;30s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;err&#34;&gt;#设置服务器端口&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;listen&lt;/span&gt;       &lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;err&#34;&gt;#设置&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;group1&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;的负载均衡参数&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;location&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;group1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;M00&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;proxy_next_upstream&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;http_502&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;http_504&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;timeout&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;invalid_header&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;proxy_cache&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cache&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;proxy_cache_valid&lt;/span&gt;  &lt;span class=&#34;m&#34;&gt;200&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;304&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;12&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;proxy_cache_key&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;uri&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;is_args&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;proxy_pass&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;://&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fdfs_group1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;expires&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;30&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;location&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;~&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;purge&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(/.*)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;allow&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;127&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;allow&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;172&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;16&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;24&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;deny&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;all&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;proxy_cache_purge&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cache&lt;/span&gt;  &lt;span class=&#34;err&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;is_args&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;重启nginx，上传一张图片，然后去nginx的cache目录查看是否有缓存文件，要清除缓存只需在url中group之前加上&lt;code&gt;purge&lt;/code&gt;。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;但是，都要读文件，只是换一个路径这样的缓存意义何在?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;fastdfs-zycservice&#34;&gt;Fastdfs-zyc所实现的service&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;BaseService  基类，仅包含Session&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;FileDataService&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;根据组名获取文件列表&lt;/li&gt;
&lt;li&gt;根据ip和fileId去数据库查找DownloadFileRecord&lt;/li&gt;
&lt;li&gt;保存DownloadFileRecord&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;JobService   重点，所有其他service的数据都是由这个服务从服务端读取数据保存在数据库上&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;按分钟更新组数据&lt;/li&gt;
&lt;li&gt;按小时更新组数据&lt;/li&gt;
&lt;li&gt;按天更新组数据&lt;/li&gt;
&lt;li&gt;从日志中读取数据保存到数据库&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;MonitorService&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;列出组信息&lt;/li&gt;
&lt;li&gt;列出所有组&lt;/li&gt;
&lt;li&gt;根据组名列出storage&lt;/li&gt;
&lt;li&gt;…&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;StructureService&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;listStorageTopLine&lt;/li&gt;
&lt;li&gt;listStorageAboutFile&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;UserService 监控系统的用户控制相关&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;WarningService&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;添加删除被通知用户&lt;/li&gt;
&lt;li&gt;添加删除预警warning&lt;/li&gt;
&lt;li&gt;更新warning数据&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;fastdfs_5&#34;&gt;FastDFS 同步机制&lt;/h2&gt;
&lt;p&gt;&lt;em&gt;参考自作者博客&lt;a href=&#34;http://blog.chinaunix.net/uid-20315669-id-1967081.html&#34;&gt;FastDFS How to -- 同步机制&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;在FastDFS的服务器端配置文件中，bind_addr这个参数用于需要绑定本机IP地址的场合。只有这个参数和主机特征相关，其余参数都是可以统一配置的。在不需要绑定本机的情况下，为了便于管理和维护，建议所有tracker server的配置文件相同，同组内的所有storage server的配置文件相同。&lt;/p&gt;
&lt;p&gt;tracker server的配置文件中没有出现storage server，而storage server的配置文件中会列举出所有的tracker server。这就决定了storage server和tracker server之间的连接由storage server主动发起，storage server为每个tracker server启动一个线程进行连接和通讯，这部分的通信协议请参阅《FastDFS HOWTO -- Protocol》中的“2. storage server to tracker server command”部分。&lt;/p&gt;
&lt;p&gt;tracker server会在内存中保存storage分组及各个组下的storage server，并将连接过自己的storage server及其分组保存到文件中，以便下次重启服务时能直接从本地磁盘中获得storage相关信息。storage server会在内存中记录本组的所有服务器，并将服务器信息记录到文件中。tracker server和storage server之间相互同步storage server列表：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;如果一个组内增加了新的storage server或者storage server的状态发生了改变，tracker server都会将storage server列表同步给该组内的所有storage server。以新增storage server为例，因为新加入的storage server主动连接tracker server，tracker server发现有新的storage server加入，就会将该组内所有的storage server返回给新加入的storage server，并重新将该组的storage server列表返回给该组内的其他storage server；&lt;/li&gt;
&lt;li&gt;如果新增加一台tracker server，storage server连接该tracker server，发现该tracker server返回的本组storage server列表比本机记录的要少，就会将该tracker server上没有的storage server同步给该tracker server。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;同一组内的storage server之间是对等的，文件上传、删除等操作可以在任意一台storage server上进行。文件同步只在同组内的storage server之间进行，采用push方式，即源服务器同步给目标服务器。以文件上传为例，假设一个组内有3台storage server A、B和C，文件F上传到服务器B，由B将文件F同步到其余的两台服务器A和C。我们不妨把文件F上传到服务器B的操作为源头操作，在服务器B上的F文件为源头数据；文件F被同步到服务器A和C的操作为备份操作，在A和C上的F文件为备份数据。同步规则总结如下：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;只在本组内的storage server之间进行同步；&lt;/li&gt;
&lt;li&gt;源头数据才需要同步，备份数据不需要再次同步，否则就构成环路了；&lt;/li&gt;
&lt;li&gt;上述第二条规则有个例外，就是新增加一台storage server时，由已有的一台storage server将已有的所有数据（包括源头数据和备份数据）同步给该新增服务器。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;关于storage server的7个状态&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;storage server有7个状态&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;FDFS_STORAGE_STATUS_INIT      :初始化，尚未得到同步已有数据的源服务器&lt;/li&gt;
&lt;li&gt;FDFS_STORAGE_STATUS_WAIT_SYNC :等待同步，已得到同步已有数据的源服务器&lt;/li&gt;
&lt;li&gt;FDFS_STORAGE_STATUS_SYNCING   :同步中&lt;/li&gt;
&lt;li&gt;FDFS_STORAGE_STATUS_DELETED   :已删除，该服务器从本组中摘除（注：本状态的功能尚未实现）&lt;/li&gt;
&lt;li&gt;FDFS_STORAGE_STATUS_OFFLINE   :离线&lt;/li&gt;
&lt;li&gt;FDFS_STORAGE_STATUS_ONLINE    :在线，尚不能提供服务&lt;/li&gt;
&lt;li&gt;FDFS_STORAGE_STATUS_ACTIVE    :在线，可以提供服务&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;当storage server的状态为FDFS_STORAGE_STATUS_ONLINE时，当该storage server向tracker server发起一次heart beat时，tracker server将其状态更改为FDFS_STORAGE_STATUS_ACTIVE。&lt;/p&gt;
&lt;p&gt;组内新增加一台storage server A时，由系统自动完成已有数据同步，处理逻辑如下：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;storage server A连接tracker server，tracker server将storage server A的状态设置为FDFS_STORAGE_STATUS_INIT。storage server A询问追加同步的源服务器和追加同步截至时间点，如果该组内只有storage server A或该组内已成功上传的文件数为0，则没有数据需要同步，storage server A就可以提供在线服务，此时tracker将其状态设置为FDFS_STORAGE_STATUS_ONLINE，否则tracker server将其状态设置为FDFS_STORAGE_STATUS_WAIT_SYNC，进入第二步的处理；&lt;/li&gt;
&lt;li&gt;假设tracker server分配向storage server A同步已有数据的源storage server为B。同组的storage server和tracker server通讯得知新增了storage server A，将启动同步线程，并向tracker server询问向storage server A追加同步的源服务器和截至时间点。storage server B将把截至时间点之前的所有数据同步给storage server A；而其余的storage server从截至时间点之后进行正常同步，只把源头数据同步给storage server A。到了截至时间点之后，storage server B对storage server A的同步将由追加同步切换为正常同步，只同步源头数据；&lt;/li&gt;
&lt;li&gt;storage server B向storage server A同步完所有数据，暂时没有数据要同步时，storage server B请求tracker server将storage server A的状态设置为FDFS_STORAGE_STATUS_ONLINE；&lt;/li&gt;
&lt;li&gt;当storage server A向tracker server发起heart beat时，tracker server将其状态更改为FDFS_STORAGE_STATUS_ACTIVE。&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;fastdfs_6&#34;&gt;FastDFS使用的通信协议&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;参考自作者博客&lt;a href=&#34;http://blog.chinaunix.net/uid-20315669-id-1967079.html&#34;&gt;FastDFS HOWTO -- Protocol&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;FastDFS采用TCP/IP协议，package包含header和body, header和body都可能为空&lt;/p&gt;
&lt;p&gt;header格式：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;@ TRACKER_PROTO_PKG_LEN_SIZE bytes package length
@ 1 byte command
@ 1 byte status
note:
TRACKER_PROTO_PKG_LEN_SIZE (8) bytes number buff is Big-Endian bytes
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;body格式:&lt;/p&gt;
&lt;p&gt;按照发送方和接收方角色不同可以分为5大类：&lt;/p&gt;
&lt;h3 id=&#34;1-common-command&#34;&gt;1. Common Command 通用命令&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;FDFS_PROTO_CMD_QUIT&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;notify&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;connection&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;will&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;be&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;closed&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;通知服务器连接将会中断&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;none&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;no&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;part&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;none&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;no&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;header&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;and&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;no&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;FDFS_PROTO_CMD_ACTIVE_TEST&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;active&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;test&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;测试是否active&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;none&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;none&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id=&#34;2-storage-server-tracker-server&#34;&gt;2. storage server 发送给tracker server的命令&lt;/h3&gt;
&lt;p&gt;这些commond的response 是 TRACKER_PROTO_CMD_STORAGE_RESP&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;TRACKER_PROTO_CMD_STORAGE_JOIN&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;join&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;tracker&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;将storage加入到tracker的track列表&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;FDFS_GROUP_NAME_MAX_LEN&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;group&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;name&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;port&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;port&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;path&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;subdir&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;per&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;path&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;upload&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;priority&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;join&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;join&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;timestamp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;up&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;start&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;timestamp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;FDFS_VERSION_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;version&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;FDFS_DOMAIN_NAME_MAX_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;domain&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;name&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;web&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;on&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;init&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;flag&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;init&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;done&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;status&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;tracker&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;excluding&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;current&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;tracker&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;FDFS_IPADDR_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sync&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;source&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ip&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;address&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;memo&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;all&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;servers&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;group&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;only&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;when&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;servers&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;changed&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;or&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;none&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;仅当storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server生效才返回所有的storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;否则返回空&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;TRACKER_PROTO_CMD_STORAGE_BEAT&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;heart&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;beat&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;心跳&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;none&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;or&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;stat&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;info&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;返回空或者storage状态信息&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）&lt;/span&gt;
   &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;total&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;upload&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;
   &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;success&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;upload&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;
   &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;total&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;set&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;metadata&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;
   &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;success&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;set&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;metadata&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;
   &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;total&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;delete&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;
   &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;success&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;delete&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;
   &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;total&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;download&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;
   &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;success&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;download&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;
   &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;total&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;get&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;metadata&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;
   &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;success&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;get&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;metadata&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;
   &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;total&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;create&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;link&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;
   &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;success&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;create&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;link&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;
   &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;total&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;delete&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;link&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;
   &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;success&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;delete&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;link&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;
   &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;last&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;source&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;update&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;timestamp&lt;/span&gt;
   &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;last&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sync&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;update&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;timestamp&lt;/span&gt;
   &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;  &lt;span class=&#34;nx&#34;&gt;last&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;synced&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;timestamp&lt;/span&gt;
   &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;  &lt;span class=&#34;nx&#34;&gt;last&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;heart&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;beat&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;timestamp&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;same&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;command&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_CMD_STORAGE_JOIN&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;memo&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sync&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;it&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;stat&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;info&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;tracker&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;only&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;when&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;stat&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;info&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;changed&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;仅当storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server的状态信息改变时才将其同步到tracker&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;TRACKER_PROTO_CMD_STORAGE_REPORT&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;report&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;disk&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;usage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;报告硬盘使用情况&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;total&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;space&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;MB&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;硬盘总体积&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;free&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;space&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;MB&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;空闲大小&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;same&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;command&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_CMD_STORAGE_JOIN&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;TRACKER_PROTO_CMD_STORAGE_REPLICA_CHG&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;replica&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;servers&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;which&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;maybe&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;exist&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;tracker&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;（？？？）&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;FDFS_IPADDR_SIZE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;One&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;entry&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;format&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;status&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;FDFS_IPADDR_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ip&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;address&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;none&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;TRACKER_PROTO_CMD_STORAGE_SYNC_SRC_REQ&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;source&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;require&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sync&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;when&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;add&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;existed&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;servers&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;same&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;group&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;will&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ask&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;tracker&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;tell&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;source&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;which&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;will&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sync&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;old&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;it&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;当新添加一个storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server时&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;，&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;同组的其他storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server会向tracker请求告诉新的storage有数据要同步给他&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;FDFS_IPADDR_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dest&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ip&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;address&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;新加入的storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server的ip地址&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;none&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;or&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;FDFS_IPADDR_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;source&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ip&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;address&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;源storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server的ip地址&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sync&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;until&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;timestamp&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;memo&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dest&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;do&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;need&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sync&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;one&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;servers&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;group&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;emtpy&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;若新storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server不需要源storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server的同步&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;，&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;返回空&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;TRACKER_PROTO_CMD_STORAGE_SYNC_DEST_REQ&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dest&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;require&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sync&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;新加入的storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;向tracker请求同步&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;none&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;none&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;or&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;FDFS_IPADDR_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;source&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ip&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;address&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sync&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;until&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;timestamp&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;memo&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dest&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;do&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;need&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sync&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;one&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;servers&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;group&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;emtpy&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;若新storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server不需要源storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server的同步&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;，&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;返回空&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;TRACKER_PROTO_CMD_STORAGE_SYNC_NOTIFY&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sync&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;notify&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;新storage同步通告&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;FDFS_IPADDR_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;source&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ip&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;address&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sync&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;until&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;timestamp&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;same&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;command&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_CMD_STORAGE_JOIN&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id=&#34;3clienttracker-server&#34;&gt;3.client发送给tracker server的命令&lt;/h3&gt;
&lt;p&gt;以下两个命令的response是TRACKER_PROTO_CMD_SERVER_RESP&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;TRACKER_PROTO_CMD_SERVER_LIST_GROUP&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;list&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;all&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;groups&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;列出所有的group&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;none&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;group&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;entries&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;format&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;each&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;entry&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
 &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;FDFS_GROUP_NAME_MAX_LEN&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;group&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;name&lt;/span&gt;
 &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;free&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;disk&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;MB&lt;/span&gt;
 &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;
 &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;port&lt;/span&gt;
 &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;port&lt;/span&gt;
 &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;active&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;
 &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;current&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;write&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;index&lt;/span&gt;
 &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;path&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;on&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt;
 &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;subdir&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;per&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;path&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;on&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;TRACKER_PROTO_CMD_SERVER_LIST_STORAGE&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;list&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;servers&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;group&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;列出某个组的所有storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;FDFS_GROUP_NAME_MAX_LEN&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;group&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;name&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;要列的组名&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;entries&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;format&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;each&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;entry&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
   &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;status&lt;/span&gt;
   &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;FDFS_IPADDR_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ip&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;address&lt;/span&gt;
   &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;FDFS_DOMAIN_NAME_MAX_SIZE&lt;/span&gt;  &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;domain&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;name&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;web&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt;
   &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;source&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ip&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;address&lt;/span&gt;
   &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;FDFS_VERSION_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;version&lt;/span&gt;
   &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;join&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;join&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;timestamp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
   &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;up&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;start&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;timestamp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
   &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;total&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;space&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;MB&lt;/span&gt;
   &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;free&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;space&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;MB&lt;/span&gt;
   &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;upload&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;priority&lt;/span&gt;
   &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;path&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;
   &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;subdir&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;per&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;path&lt;/span&gt;
   &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;current&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;write&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;[&lt;/span&gt;
   &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;port&lt;/span&gt;
   &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;port&lt;/span&gt;
   &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;total&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;upload&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;
   &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;success&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;upload&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;
   &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;total&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;set&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;metadata&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;
   &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;success&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;set&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;metadata&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;
   &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;total&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;delete&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;
   &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;success&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;delete&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;
   &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;total&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;download&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;
   &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;success&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;download&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;
   &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;total&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;get&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;metadata&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;
   &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;success&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;get&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;metadata&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;
   &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;total&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;create&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;link&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;
   &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;success&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;create&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;link&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;
   &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;total&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;delete&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;link&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;
   &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;success&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;delete&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;link&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;
   &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;last&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;source&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;update&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;timestamp&lt;/span&gt;
   &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;last&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sync&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;update&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;timestamp&lt;/span&gt;
   &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;  &lt;span class=&#34;nx&#34;&gt;last&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;synced&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;timestamp&lt;/span&gt;
   &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;  &lt;span class=&#34;nx&#34;&gt;last&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;heart&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;beat&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;timestamp&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;以下命令response是 TRACKER_PROTO_CMD_SERVICE_RESP&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;TRACKER_PROTO_CMD_SERVICE_QUERY_STORE_WITHOUT_GROUP_ONE&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;cp&#34;&gt;# function: query which storage server to store file(查询向哪一个storage server保存文件)&lt;/span&gt;
&lt;span class=&#34;cp&#34;&gt;# request body: none&lt;/span&gt;
&lt;span class=&#34;cp&#34;&gt;# response body:&lt;/span&gt;
 &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FDFS_GROUP_NAME_MAX_LEN&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;group&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;
 &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FDFS_IPADDR_SIZE&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ip&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;address&lt;/span&gt;
 &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;port&lt;/span&gt;
 &lt;span class=&#34;mi&#34;&gt;@1&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;store&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;path&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;index&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;on&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;server&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;TRACKER_PROTO_CMD_SERVICE_QUERY_STORE_WITHOUT_GROUP_ALL&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;cp&#34;&gt;# function: query which storage server to store file&lt;/span&gt;
&lt;span class=&#34;cp&#34;&gt;# request body: none&lt;/span&gt;
&lt;span class=&#34;cp&#34;&gt;# response body:&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FDFS_GROUP_NAME_MAX_LEN&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;group&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FDFS_IPADDR_SIZE&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ip&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;address&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;multi&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;port&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;multi&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;mi&#34;&gt;@1&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;store&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;path&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;index&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;on&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;server&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;TRACKER_PROTO_CMD_SERVICE_QUERY_STORE_WITH_GROUP_ONE&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;cp&#34;&gt;# function: query which storage server to store file&lt;/span&gt;
&lt;span class=&#34;cp&#34;&gt;# request body:&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FDFS_GROUP_NAME_MAX_LEN&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;group&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;
&lt;span class=&#34;cp&#34;&gt;# response body:&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FDFS_GROUP_NAME_MAX_LEN&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;group&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FDFS_IPADDR_SIZE&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ip&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;address&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;port&lt;/span&gt;
    &lt;span class=&#34;mi&#34;&gt;@1&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;store&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;path&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;index&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;on&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;server&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;TRACKER_PROTO_CMD_SERVICE_QUERY_STORE_WITH_GROUP_ALL&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;cp&#34;&gt;# function: query which storage server to store file&lt;/span&gt;
&lt;span class=&#34;cp&#34;&gt;# request body:&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FDFS_GROUP_NAME_MAX_LEN&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;group&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;
&lt;span class=&#34;cp&#34;&gt;# response body:&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FDFS_GROUP_NAME_MAX_LEN&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;group&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FDFS_IPADDR_SIZE&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ip&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;address&lt;/span&gt;  &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;multi&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;port&lt;/span&gt;   &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;multi&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;mi&#34;&gt;@1&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;store&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;path&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;index&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;on&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;server&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;TRACKER_PROTO_CMD_SERVICE_QUERY_FETCH&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;query&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;which&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;download&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;查询向哪个storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;请求下载文件&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;FDFS_GROUP_NAME_MAX_LEN&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;group&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;name&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;filename&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;filename&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;FDFS_GROUP_NAME_MAX_LEN&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;group&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;name&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;FDFS_IPADDR_SIZE&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ip&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;address&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;port&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;TRACKER_PROTO_CMD_SERVICE_QUERY_FETCH_ALL&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;query&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;all&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;servers&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;download&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;FDFS_GROUP_NAME_MAX_LEN&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;group&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;name&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;filename&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;filename&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;FDFS_GROUP_NAME_MAX_LEN&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;group&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;name&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;FDFS_IPADDR_SIZE&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ip&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;address&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;port&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;FDFS_IPADDR_SIZE&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;  &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ip&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;addresses&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;can&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;be&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id=&#34;4-storage-serverstorage-server&#34;&gt;4. Storage server向Storage Server发送的命令&lt;/h3&gt;
&lt;p&gt;该类命令的response 是STORAGE_PROTO_CMD_RESP&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;STORAGE_PROTO_CMD_SYNC_CREATE_FILE&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sync&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;created&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;同步新创建的文件&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;filename&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;FDFS_GROUP_NAME_MAX_LEN&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;group&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;name&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;filename&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;filename&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;size&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;content&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;none&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;STORAGE_PROTO_CMD_SYNC_DELETE_FILE&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sync&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;deleted&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;同步删除的文件&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;FDFS_GROUP_NAME_MAX_LEN&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;group&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;name&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;filename&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;filename&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;none&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;STORAGE_PROTO_CMD_SYNC_UPDATE_FILE&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sync&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;updated&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;同步更新的文件&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;same&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;command&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;STORAGE_PROTO_CMD_SYNC_CREATE_FILE&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;respose&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;none&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id=&#34;clientstorage-server&#34;&gt;client向storage server 发送的命令&lt;/h3&gt;
&lt;p&gt;该类命令的response是 STORAGE_PROTO_CMD_RESP&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;STORAGE_PROTO_CMD_UPLOAD_FILE&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;upload&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;上传文件到storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;meta&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;size&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;meta&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;each&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;meta&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;seperated&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;by&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x01&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                        &lt;span class=&#34;nx&#34;&gt;name&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;and&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;seperated&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;by&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x02&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;size&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;content&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;FDFS_GROUP_NAME_MAX_LEN&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;group&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;name&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;filename&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;filename&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;STORAGE_PROTO_CMD_UPLOAD_SLAVE_FILE&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;upload&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;slave&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;master&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;filename&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;length&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;size&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;FDFS_FILE_PREFIX_MAX_LEN&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;filename&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;prefix&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;FDFS_FILE_EXT_NAME_MAX_LEN&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ext&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;do&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;include&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dot&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(.)&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;master&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;filename&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;master&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;filename&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;size&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;content&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;FDFS_GROUP_NAME_MAX_LEN&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;group&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;name&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;filename&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;filename&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;STORAGE_PROTO_CMD_DELETE_FILE&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;delete&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;从storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server中删除文件&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;FDFS_GROUP_NAME_MAX_LEN&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;group&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;name&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;filename&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;filename&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;none&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;STORAGE_PROTO_CMD_SET_METADATA&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;delete&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;从storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server中删除文件&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;filename&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;length&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;meta&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;size&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;operation&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;flag&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s1&#34;&gt;&amp;#39;O&amp;#39;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;overwrite&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;all&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;old&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;O&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;覆盖所有metadata&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）&lt;/span&gt;
        &lt;span class=&#34;s1&#34;&gt;&amp;#39;M&amp;#39;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;merge&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;insert&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;when&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;meta&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;item&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;exist&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;otherwise&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;update&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;it&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;M&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;插入或更新metadata&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;FDFS_GROUP_NAME_MAX_LEN&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;group&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;name&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;filename&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;filename&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;meta&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;each&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;meta&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;seperated&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;by&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x01&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                        &lt;span class=&#34;nx&#34;&gt;name&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;and&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;seperated&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;by&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x02&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;none&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;STORAGE_PROTO_CMD_DOWNLOAD_FILE&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;download&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;fetch&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;从storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server下载文件&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;FDFS_GROUP_NAME_MAX_LEN&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;group&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;name&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;filename&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;filename&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;content&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;STORAGE_PROTO_CMD_GET_METADATA&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;get&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;metat&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;从storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server获取metadata&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;FDFS_GROUP_NAME_MAX_LEN&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;group&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;name&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;filename&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;filename&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;meta&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;buff&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;each&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;meta&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;seperated&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;by&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x01&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;name&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;and&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;seperated&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;by&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x02&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;STORAGE_PROTO_CMD_QUERY_FILE_INFO&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;query&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;info&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;FDFS_GROUP_NAME_MAX_LEN&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;group&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;name&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;filename&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;filename&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;size&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;create&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;timestamp&lt;/span&gt;
    &lt;span class=&#34;err&#34;&gt;@&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TRACKER_PROTO_PKG_LEN_SIZE&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;CRC32&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;signature&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id=&#34;php-client&#34;&gt;php client端接口调用&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;获取客户端版本号&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt; string fastdfs_client_version()
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;获取最近一个错误号&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;long fastdfs_get_last_error_no()
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;获取最近一次错误的信息&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;string fastdfs_get_last_error_info()
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;为http下载获取防盗连接&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;string fastdfs_http_gen_token(string remote_filename, int timestamp)
生成防盗连接
参数：
    @remote_filename:  远程文件名（不包含group name）
    @timestamp: 时间戳
返回：成功则返回token串，否则返回false
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;获取文件信息&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;array fastdfs_get_file_info(string group_name, string remote_filename)
获取文件的meta info
参数：
    @group_name: 文件所在的组名
    @remote_filename: 文件在storage server上的名字
返回：
    成功则返回文件信息数组，否则返回false
    文件信息数组包括以下信息：
    create_timestamp: 文件创建的时间
    file_size: 文件大小
    source_ip_addr: 文件上传的源storage ip地址

array fastdfs_get_file_info(string file_id)
获取文件的meta info
参数：
    @file_id: 组名+远程文件名
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;判断文件是否存在&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;boolean fastdfs_storage_file_exist(string group_name, string remote_filename[, array tracker_server, array storage_server])
判断文件是否存在
参数：
    @group_name: 文件所在的组名
    @remote_filename: 远程文件名
    @array tracker_server: tracker_server数组，包含ip_addr, port and sock
    @array storage_server: storage_server数组，包含ip_addr, port and sock
返回：
    存在返回true，否则返回false

boolean fastdfs_storage_file_exist1(string file_id)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;上传文件&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;array fastdfs_storage_upload_by_filename(string local_filename[, string file_ext_name, array meta_list, string group_name, array tracker_server, array storage_server])
参数：
    @local_filename: 本地要上传的文件名
    @file_ext_name: 文件扩展名，不包含dot
    @meta_list: 文件的一些元信息例如 array(&amp;#39;width&amp;#39;=&amp;gt;1024,&amp;#39;height&amp;#39;=&amp;gt;768)
    @group_name: 指定文件存储到的组
    @array tracker_server: tracker_server数组，包含ip_addr, port and sock
    @array storage_server: storage_server数组，包含ip_addr, port and sock
返回：
    成功返回数组，否则返回false
    数组包含以下字段：group_name, filename

array fastdfs_storage_upload_by_filename1(string local_filename[, string file_ext_name, array meta_list, string group_name, array tracker_server, array storage_server])
返回：
    成功则返回file_id, 否则返回false

array fastdfs_storage_upload_by_filebuff(string file_buff[, string file_ext_name, array meta_list, string group_name, array tracker_server, array storage_server])
参数：
    @file_buff: 文件内容
    @file_ext_name: 文件扩展名，不包含dot
    @meta_list: 文件的一些元信息例如 array(&amp;#39;width&amp;#39;=&amp;gt;1024,&amp;#39;height&amp;#39;=&amp;gt;768)
    @group_name: 指定文件存储到的组
    @array tracker_server: tracker_server数组，包含ip_addr, port and sock
    @array storage_server: storage_server数组，包含ip_addr, port and sock
返回：
    成功返回数组，否则返回false
    数组包含以下字段：group_name, filename

array fastdfs_storage_upload_by_filebuff1(string file_buff[, string file_ext_name, array meta_list, string group_name, array tracker_server, array storage_server])

array fastdfs_storage_upload_by_callback()
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;append modify接口暂时不用&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;删除文件&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;boolean fastdfs_storage_delete_file(string group_name, string remote_filename[, array tracker_server, array storage_server])
从storage server 删除文件
参数：
    @group_name: 文件的组名
    @remote_filename: 文件在storage server上的名字
    @array tracker_server: tracker_server数组，包含ip_addr, port and sock
    @array storage_server: storage_server数组，包含ip_addr, port and sock
返回：
    成功则返回true, 否则返回false

 boolean fastdfs_storage_delete_file1(string file_id[, array tracker_server, array storage_server])
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;下载文件&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;string fastdfs_storage_download_file_to_buff(string group_name, string remote_filename[, long file_offset, long download_bytes, array tracker_server, array storage_server])
从storage server下载文件
参数：
    @group_name；文件的组名
    @remote_filename: 文件在storage server上的名字
    @file_offset:0(默认)
    @array tracker_server: tracker_server数组，包含ip_addr, port and sock
    @array storage_server: storage_server数组，包含ip_addr, port and sock
返回：
    成功则返回文件的内容，否则返回false

string fastdfs_storage_download_file_to_buff1(string file_id[, long file_offset, long download_bytes, array tracker_server, array storage_server])

boolean fastdfs_storage_download_file_to_file(string group_name, string remote_filename, string local_filename[, long file_offset, long download_bytes, array tracker_server, array storage_server])
从storage现在文件到本地文件
参数：
    @local_filename: 要保存到本地的文件名
    其余参数同上
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;设置、获取文件meta_data&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;boolean fastdfs_storage_set_metadata(string group_name, string remote_filename, array meta_list[, string op_type, array tracker_server, array storage server]
设置文件metadata
参数：
    @meta_list:meta信息数组：array(&amp;#39;width&amp;#39;=&amp;gt;1024,&amp;#39;height&amp;#39;=&amp;gt;768)
    @op_type: 操作有两种，合并或者覆盖
        FDFS_STORAGE_SET_METADATA_FLAG_MERGE
        FDFS_STORAGE_SET_METADATA_FLAG_OVERWRITE
返回：
    成功返回true,否则返回false

array fastdfs_storage_get_metadata(string group_name, string remote_filename[, array tracker_server, array storage_server])
获取文件的metadata
返回：
    成功则返回meta_data数组，否则返回false
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;连接/断开连接到server&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;array fastdfs_connect_server(string ip_addr, int port)
连接到server
参数：
    @ip_addr:  server的ip地址
    @port: server的端口
返回：
    连接成功返回true;否则返回false

array fastdfs_disconnect_server(string ip_addr, int port)
断开到server的连接
参数：
    同上
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;Active 测试&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;boolean fastdfs_acitve_test(array server_info)
给server发送active_test命令
参数：
    @server_info: array: ip_addr, port, sock
返回：
    active返回true，否则返回false
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;获取连接&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;array fastdfs_tracker_get_connection()
获取到tracker server的连接
返回：
    成功则返回数组，否则返回false
    数组包括：ip_addr, port, sock

array fastdfs_tracker_make_all_connection()
连接到所有的tracker server
返回：
    成功返回true;否则返回false
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;列出tracker的组&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;array fastdfs_tracker_list_groups([string group_name, array tracker_server])
获取组信息
参数：
    @gourp_name:指定组名，默认列出所有组
返回：
    组信息数组，数组每一项是一个组
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;请求获取storage server to store（上传文件）&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;array fastdfs_tracker_query_storage_store([string group_name, array tracker_server])
获取storage server的信息用以上传文件
返回：
    成功返回一个storage server信息，保存在数组，否则返回false；
    数组包含：ip_addr, port, sock, store_path_index

array fastdfs_tracker_query_storage_store_list
同上，但返回的是storage server列表
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;请求storage server to update（更新meta data）&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;array fastdfs_tracker_query_storage_update(string group_name, string remote_filename[, array tracekr_server]
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;请求storage server to fetch（下载文件）&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;array fastdfs_tracker_query_storage_fetch(string gourp_name, string remote_filename[, array tracker_server])
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;**获取可下载某文件的storage server&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;array fastdfs_tracker_query_storage_list(string group_name, string remote_filename[, array tracker_server])
获取可以下载文件内容的storage server list
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;删除storage&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;boolean fastdfs_tracker_delete_storage(string group, string storage_ip)
将storage 从集群中删除
参数：
    @group_name: storage所在的组名
    @storage_ip: storage server 的ip
返回：
    成功返回true,否则返回false
&lt;/pre&gt;&lt;/div&gt;
    </content>
  </entry>
  <entry>
    <title>让进程在后台运行</title>
    <link type="text/html" rel="alternate" href="/content/ops/让进程在后台运行.html"/>
    <id>/content/ops/让进程在后台运行.html</id>
    <published>2014-12-15 01:12</published>
    <updated>2014-12-15 01:12</updated>
    <content type="html">
      &lt;p&gt;最近搭建了一个分布式的文件系统，替换以前的云存储需要导很多数据，金大侠在他的机器上跑的脚本，但是他是在前台跑的，后来他电脑待机了，结果可想而知。
因为通过ssh连到服务器上跑脚本，默认都是sshd的子进程(通过 &lt;code&gt;pstree&lt;/code&gt; 可以看到)，当ssh断开之后，这些子进程都会接到hup信号而终止。所以跑脚本就一定要后台去跑。
在linux上让进程在后台运行的方式也挺多的。&lt;/p&gt;
&lt;h2 id=&#34;nohupsetsid&#34;&gt;nohup/setsid/&amp;amp;&lt;/h2&gt;
&lt;p&gt;如果只是临时有一个命令需要长时间运行，什么方法能最简便的保证它在后台稳定运行呢？&lt;/p&gt;
&lt;p&gt;我们知道，当用户注销（logout）或者网络断开时，终端会收到 HUP（hangup）信号从而关闭其所有子进程。
因此，我们的解决办法就有两种途径：要么让进程忽略 HUP 信号，要么让进程运行在新的会话里从而成为不属于此终端的子进程。&lt;/p&gt;
&lt;p&gt;比如 &lt;code&gt;nohup SOME_COMMAND &amp;amp;&lt;/code&gt; 就是在后台运行命令，并且禁掉hup信号。标准输出和错误输出都在nohup.out文件中，也可用&#34;&amp;gt;filename 2&amp;gt;&amp;amp;1&#34;来更改缺省的重定向文件名。&lt;/p&gt;
&lt;p&gt;命令 &lt;code&gt;setsid SOME_COMMAND&lt;/code&gt; 让当前进程不再是终端的子进程，所以也可以稳定的在后台运行。&lt;/p&gt;
&lt;p&gt;命令 &lt;code&gt;(SOME_COMMAND &amp;amp;)&lt;/code&gt; 也是通过让进程不再是终端的子进程而不受当前终端的hup信号影响。&lt;/p&gt;
&lt;h2 id=&#34;disown&#34;&gt;disown&lt;/h2&gt;
&lt;p&gt;如果命令已经在跑着了，那么想让它在后台去安稳运行怎么办呢？&lt;/p&gt;
&lt;p&gt;那就可以用 &lt;code&gt;disown&lt;/code&gt; 命令。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;用disown -h jobspec来使某个作业忽略HUP信号&lt;/li&gt;
&lt;li&gt;用disown -ah 来使所有的作业都忽略HUP信号&lt;/li&gt;
&lt;li&gt;用disown -rh 来使正在运行的作业忽略HUP信号&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;需要注意的是，当使用过 disown 之后，会将把目标作业从作业列表中移除，我们将不能再使用jobs来查看它，但是依然能够用ps -ef查找到它。
如果进程实在前台运行的，那就可以先通过Ctrl-z将进程suspend，然后通过 &lt;code&gt;jobs&lt;/code&gt; 命令查看它的作业号，然后在通过 &lt;code&gt;bg&lt;/code&gt; 命令扔到后台运行，最后在 &lt;code&gt;disown&lt;/code&gt; 一下。&lt;/p&gt;
&lt;h2 id=&#34;screen&#34;&gt;screen&lt;/h2&gt;
&lt;p&gt;当然，最好的跑脚本的方式是通过 &lt;code&gt;screen&lt;/code&gt; 命令，就像东颖说得，用screen跑脚本是程序员的基本素质。&lt;/p&gt;
&lt;p&gt;简单的说，screen 提供了 ANSI/VT100 的终端模拟器，使它能够在一个真实终端下运行多个全屏的伪终端。&lt;/p&gt;
&lt;p&gt;基本命令为：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;用screen -dmS session name来建立一个处于断开模式下的会话（并指定其会话名）&lt;/li&gt;
&lt;li&gt;用screen -list 来列出所有会话&lt;/li&gt;
&lt;li&gt;用screen -r session name来重新连接指定会话&lt;/li&gt;
&lt;li&gt;用快捷键CTRL-a d 来暂时断开当前会话&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;通过screen执行的进程，它的父进程是screen而不是sshd，所以当ssh断开时也不会有影响。&lt;/p&gt;
    </content>
  </entry>
  <entry>
    <title>FastDFS的坑以及补救方案</title>
    <link type="text/html" rel="alternate" href="/content/ops/fastdfs的坑以及补救方案.html"/>
    <id>/content/ops/fastdfs的坑以及补救方案.html</id>
    <published>2014-10-27 15:59</published>
    <updated>2014-10-27 15:59</updated>
    <content type="html">
      &lt;p&gt;终于把FastDFS搭起来并在线上环境中稳定下来了，这其中发现了很多问题，除了完全没文档这个大坑之外，还有一些不小的坑。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;如果需要自定义FastDFS的安装路径，需要手动修改源码中make.sh里面TARGET_PREFIX和TARGET_CONF_PATH这2个字段，而不是通过 &lt;code&gt;configure&lt;/code&gt; 指定 &lt;code&gt;--prefix&lt;/code&gt; 的方式。&lt;/p&gt;
&lt;p&gt;并且需要注意的是，目前稳定的版本是5.0.3，其他的版本都会有一些bug.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;编译FastDFS完成之后，需要 &lt;code&gt;cp /path/to/fdfs/lib/* /usr/local/lib/&lt;/code&gt;, 然后 &lt;code&gt;ln -s libfastcommon.so /usr/local/lib/libfastcommon.so.1 &amp;amp;&amp;amp; ln -s libfastclient.so /usr/local/lib/libfastclient.so.1&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;客户端安装php-client的时候，源码包种的 &lt;code&gt;php-client/configure&lt;/code&gt; 文件中需要修改第3415行，改成 &lt;code&gt;ROOT=/path/to/your/fdfs&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;线上运行一段时间后，系统就不能传图了，报的错误是connection reset by beer.&lt;/p&gt;
&lt;p&gt;这个问题实际上是TCP连接没有被释放掉，通过命令 &lt;code&gt;netstat -antp | grep fdfs | wc -l&lt;/code&gt; 可以看到
上传图片完成后tcp连接数是一直增加的，直到超过FastDFS能处理的最大值.&lt;/p&gt;
&lt;p&gt;要解决这个问题，首先要确保客户端，也就是安装了php模块的app服务器中 &lt;code&gt;/path/to/your/fdfs/conf/client.conf&lt;/code&gt; 文件中 &lt;code&gt;use_connection_pool&lt;/code&gt; 字段 &lt;strong&gt;只能&lt;/strong&gt; 是 &lt;code&gt;false&lt;/code&gt;，作者在php客户端使用连接池连接FastDFS的代码中有bug，所以客户端不能开启连接池。&lt;/p&gt;
&lt;p&gt;然后，在封装保存接口的时候，最好使用类的方法，并且要手动关掉tracker的连接，如下:&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;kr&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;save&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;$filename&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;$fdfs&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;FastDFS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;$file_info&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;$fdfs&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;storage_upload_by_filename1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;$filename&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;$fdfs&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;tracker_close_all_connections&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;$fdfs&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;$file_info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;并且如果修改之后要手动重启php-fpm: &lt;code&gt;service php-fpm restart&lt;/code&gt; .
最好在部署FastDFS的机器上也补上一个脚本加入到crontab中，判断连接数过大则重启app服务器的php-fpm:&lt;/p&gt;
&lt;table class=&#34;hlcodetable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;c&#34;&gt;#!/bin/bash&lt;/span&gt;

&lt;span class=&#34;nv&#34;&gt;conn_count&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;netstat -antp &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; grep fdfs &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; wc -l&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$conn_count&lt;/span&gt; -gt &lt;span class=&#34;m&#34;&gt;500&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;then&lt;/span&gt;
    ssh root@your_app_server_ip &lt;span class=&#34;s2&#34;&gt;&amp;quot;service php-fpm restart&amp;quot;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;fi&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;会有内存溢出的可能&lt;/p&gt;
&lt;p&gt;如果调用 &lt;code&gt;vmstat&lt;/code&gt; 命令发现cache字段过大，并且 &lt;code&gt;free&lt;/code&gt; 发现内存使用过大，那么有可能是FastDFS导致的内存泄露问题。&lt;/p&gt;
&lt;p&gt;这个问题应该属于FastDFS的bug，现在只能写一个补救脚本加入到crontab中：&lt;/p&gt;
&lt;table class=&#34;hlcodetable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;&lt;span class=&#34;c&#34;&gt;#!/bin/bash&lt;/span&gt;

&lt;span class=&#34;nv&#34;&gt;mem&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;free -m &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; awk &lt;span class=&#34;s1&#34;&gt;&amp;#39;NR==2{print $4}&amp;#39;&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$mem&lt;/span&gt; -lt &lt;span class=&#34;m&#34;&gt;1024&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;then&lt;/span&gt;
    &lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;quot;1&amp;quot;&lt;/span&gt; &amp;gt; /proc/sys/vm/drop_caches
&lt;span class=&#34;k&#34;&gt;fi&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;最后，将FastDFS部署到线上作为一个稳定的服务是不明智的行为，拿它做简单的内部日志存储还行，但是作为一个线上服务，现阶段它还明显不适合。&lt;/p&gt;
    </content>
  </entry>
  <entry>
    <title>SSH隧道代理</title>
    <link type="text/html" rel="alternate" href="/content/ops/ssh隧道代理.html"/>
    <id>/content/ops/ssh隧道代理.html</id>
    <published>2014-12-14 23:42</published>
    <updated>2014-12-14 23:42</updated>
    <content type="html">
      &lt;p&gt;最近pypi镜像搭建好了，实际上pip本身有一个--proxy的指令，能够制定一个代理，就能完成内网机器无法通过pip访问外网资源的问题.
通过代理就能完成基本的下载包的需求了，而且其他的一些命令如gem，curl等等大多数常见的命令都支持走代理模式。&lt;/p&gt;
&lt;p&gt;而且大家总在说 &#34;用nginx做反向代理&#34;，那么到底什么代理，什么是反向代理呢?&lt;/p&gt;
&lt;h2 id=&#34;_1&#34;&gt;正向代理&lt;/h2&gt;
&lt;p&gt;正向代理是客户端和服务器中间的服务器，为了从原始服务器取得内容，客户端向代理服务器发送一个请求并指定目标（原始服务器），
然后代理服务器向原始服务器转发请求并将获得的内容返回给客户端。&lt;/p&gt;
&lt;p&gt;举个例子，比如正常情况下我没法办上youtube，但是我有个aws的机器，它不受GFW的限制，能够访问youtube，我也能正常访问那个aws的机器，
那么我通过发送请求给aws的机器，让他转发我的请求给youtube，然后把youtube返回的数据给我，我就能通过aws的机器作为跳板访问GFW，
那个aws的机器也就是代理服务器的角色，并且这种方式就是正向代理。&lt;/p&gt;
&lt;p&gt;总结一下，正向代理就是我想访问一台机器，但是被墙了访问不到，我需要一台机器作为跳板转发我的请求。&lt;/p&gt;
&lt;h2 id=&#34;_2&#34;&gt;反向代理&lt;/h2&gt;
&lt;p&gt;于正向代理不同，反向代理更多的是为了保护原始服务器。
对于客户端而言，反向代理中的代理服务器就是原始服务器，客户端并不需要知道有这个代理的角色存在，
因此客户端也不需要一些额外的设置，比如正向代理中制定代理服务器是谁。&lt;/p&gt;
&lt;p&gt;比如在原始服务器A上配置防火墙，使得只有服务器B能够访问A，并且通过B服务器转发A的数据实现于外界的通信。这样对于客户端，它只需要和B交互，
从而隐藏了服务器A，B服务器也就是反向代理服务器。由于有代理服务器的存在，对于后面的原始服务器来说，也就多了一层做负载均衡的服务器。&lt;/p&gt;
&lt;h2 id=&#34;_3&#34;&gt;透明代理&lt;/h2&gt;
&lt;p&gt;还有一种代理方式叫做透明代理，比如我实习的时候机器就不能上qq，这个就是透明代理，它在内网和外网之间捕捉用户的请求，过滤一部分请求。&lt;/p&gt;
&lt;h2 id=&#34;ssh&#34;&gt;SSH端口转发&lt;/h2&gt;
&lt;p&gt;有一种很简单的方式就能做到代理功能，那就是SSH本身提供的端口转发功能。
要想理解清楚SSH端口转发，首先必须记住这样几个原则：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;SSH简单的理解就是2台机器之间安全的数据通道，它包括ssh的client和ssh的server2个角色，这样的一条通道也就是ssh隧道(ssh tunneling)&lt;/li&gt;
&lt;li&gt;SSH 端口转发自然需要 SSH 连接，而 SSH 连接是有方向的，从 SSH Client 到 SSH Server&lt;/li&gt;
&lt;li&gt;我们的应用的请求也是有方向的，一般是客户端向服务器端发出请求&lt;/li&gt;
&lt;li&gt;一旦这2个方向相同，我们称为ssh的本地转发(-L)，不同则为远端转发(-R)&lt;/li&gt;
&lt;li&gt;命令一般是跑在ssh client的机器上的&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;_4&#34;&gt;本地转发&lt;/h3&gt;
&lt;p&gt;ssh本地转发命令为：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;ssh -L &amp;lt;local port&amp;gt;:&amp;lt;remote host&amp;gt;:&amp;lt;remote port&amp;gt; &amp;lt;SSH hostname&amp;gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;这条命令可以翻译成：从本地的&lt;local port&gt;端口发出请求，通过&lt;SSH hostname&gt;这台机器作为跳板转发请求到&lt;remote host&gt;的&lt;remote port&gt;端口。
&lt;remote host&gt;是相对&lt;SSH hostname&gt;而言的，比如&lt;remote host&gt;是127.0.0.1的话，就是&lt;SSH hostname&gt;本身。
所以一般如果&lt;remote host&gt;是127.0.0.1的话，跳板机或者代理服务器就是目标服务器。&lt;/p&gt;
&lt;p&gt;举个例子：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;A是一台在我家的机器macbook air，它可以访问taobao，也就是服务器C&lt;/li&gt;
&lt;li&gt;B是一台在公司的机器imac，由于在公司的内网，所以在家的A访问不到B&lt;/li&gt;
&lt;li&gt;C是taobao的服务器，公司不让上taobao，所以服务器B访问不了C&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;现在要想在让B服务器能访问C的80端口，由于防火墙这条路本身是走不通的，但是由于B能访问A，A能访问C，所以能把A作为代理服务器实现这一要求。&lt;/p&gt;
&lt;p&gt;在服务器B和服务器A之间建立ssh隧道，在SSH端口转发中，由于服务器B能连接到服务器A，并且请求是从服务器B发出，所以B既是ssh的client，也是请求的客户端
所以此时应该在B上去运行ssh的本地转发命令: &lt;code&gt;ssh -L 8080:HOST_C:80 HOST_A&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;_5&#34;&gt;远端转发&lt;/h3&gt;
&lt;p&gt;ssh远端转发的命令为：&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;ssh -R &amp;lt;local port&amp;gt;:&amp;lt;remote host&amp;gt;:&amp;lt;remote port&amp;gt; &amp;lt;SSH hostname&amp;gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;由于本身B是可以访问A的，但是A访问不到B，现在要想服务器A访问到B，也就是在家能连上公司的机器。&lt;/p&gt;
&lt;p&gt;服务器B能连上A，所以B应该是ssh的client，此时请求是由A发起的，所以A是请求客户端，方向不同，所以是远端转发。
因此在B上运行命令: &lt;code&gt;ssh -R 2222:127.0.0.1:22 HOST_A&lt;/code&gt; ,这里127.0.0.1是因为通过A服务器转发的目的服务器就是A本身。
这样在A上的2222端口就映射到了B的22端口。&lt;/p&gt;
&lt;h3 id=&#34;_6&#34;&gt;动态转发&lt;/h3&gt;
&lt;p&gt;不管是本地转发还是远端转发，都需要一个具体的应用服务器的地址和端口号，要想访问其他机器的内容就得绑定很多条这样的转发命令，
通过动态转发就能省去这一个应用服务器的信息。&lt;/p&gt;
&lt;div class=&#34;hlcode&#34;&gt;&lt;pre&gt;ssh -D &amp;lt;local port&amp;gt; &amp;lt;SSH Server&amp;gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;当我们在一个不安全的 WiFi 环境下上网，用 SSH 动态转发来保护我们的网页浏览等信息无疑是十分必要的。
比如在本机运行： &lt;code&gt;sh -D 7001 &amp;lt;SSH Server&amp;gt;&lt;/code&gt; 这样就相当于通过&lt;SSH Server&gt;创建了一个SOCKS代理。&lt;/p&gt;
&lt;p&gt;我们可以直接使用localhost:7001 来作为正常的 SOCKS 代理来使用，直接在浏览器上设置即可。
在 SSH Client 端无法访问的网站现在也都可以正常浏览。
而这里需要值得注意的是，此时 SSH 所包护的范围只包括从浏览器端（SSH Client 端）到 SSH Server 端的连接，并不包含从 SSH Server 端 到目标网站的连接。
如果后半截连接的安全不能得到充分的保证的话，这种方式仍不是合适的解决方案。&lt;/p&gt;
&lt;p&gt;这个时候还可以在本机将SOCKS代理转成HTTP代理。
比如在本地安装&lt;a href=&#34;http://www.pps.univ-paris-diderot.fr/~jch/software/polipo/&#34;&gt;polipo&lt;/a&gt;，修改polipo.conf文件，把SOCKS代理填上127.0.0.1:7001，然后 &lt;code&gt;export http_proxy=&#34;127.0.0.1:8123&#34; &amp;amp;&amp;amp; export https_proxy=&#34;127.0.0.1:8123&#34;&lt;/code&gt; 就在本地的8123端口起了一个http代理。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;参考了IBM的&lt;a href=&#34;https://www.ibm.com/developerworks/cn/linux/l-cn-sshforward/&#34;&gt;实战 SSH 端口转发&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
    </content>
  </entry>
  
</feed>